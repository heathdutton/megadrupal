<?php

/**
 * @file
 * Backlinkseller integration.
 */

/**
 * Install and uninstall functions for the Backlinkseller module.
 */
function backlinkseller_install() {
  variable_set('backlinkseller_affiliate_banner', 1);

  $installation_root = DRUPAL_ROOT . base_path();
  $module_path = drupal_get_path('module', 'backlinkseller');
  $source = $installation_root . $module_path . '/assets/images/banner-1.gif';

  $target = 'public://' . md5('backlinkseller') . '.gif';

  file_unmanaged_copy($source, $target, FILE_EXISTS_REPLACE);
  var_dump($source);

  $t = get_t();

  drupal_set_message($t('Configure the <a href="@url">Backlinkseller module</a> now.', array(
    '@url' => url('admin/config/advertisement/backlinkseller/settings'),
  )), 'warning');
}

/**
 * Remove variables set by this module.
 */
function backlinkseller_uninstall() {
  variable_del('backlinkseller_id');
  variable_del('backlinkseller_site_url');
  variable_del('backlinkseller_html_before_ads');
  variable_del('backlinkseller_html_after_ads');
  variable_del('backlinkseller_html_block_id');
  variable_del('backlinkseller_debug_flag');

  variable_del('backlinkseller_affiliate_id');
  variable_del('backlinkseller_affiliate_html_block_id');
  variable_del('backlinkseller_affiliate_banner');
  variable_del('backlinkseller_affiliate_banner_alt');
  variable_del('backlinkseller_affiliate_link_title');

  $target = DRUPAL_ROOT . base_path() . variable_get('file_public_path', conf_path() . '/files/')
            . md5('backlinkseller') . '.gif';
  drupal_unlink($target);
}
