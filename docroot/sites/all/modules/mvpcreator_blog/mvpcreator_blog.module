<?php
/**
 * @file
 * Code for the MVPCreator Blog feature.
 */

include_once 'mvpcreator_blog.features.inc';

/**
 * Implements of hook_ctools_plugin_directory()
 */
function mvpcreator_blog_ctools_plugin_directory($owner, $plugin_type) {
  if ($owner == 'ctools' && $plugin_type == 'content_types') {
    return 'plugins/' . $plugin_type;
  }
}

/**
 * Implements of hook_views_pre_render()
 */
function mvpcreator_blog_views_pre_view(&$view, &$display_id, &$args) {
  // Modify the options from the view to add in the current sitename into the RSS feed
  if ($view->name == 'mvpcreator_blog' && $display_id == 'rss_feed') {
    $sitename = variable_get('site_name');
    $view->display_handler->options['title'] = str_replace('!sitename', $sitename, $view->display_handler->options['title']);
    $view->display_handler->options['style_options']['description'] = str_replace('!sitename', $sitename, $view->display_handler->options['style_options']['description']);
  }
}
