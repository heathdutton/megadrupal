<?php
/**
 * @file
 * Module file for locale_auto_import
 */

/**
 * Implements hook_help().
 */
function locale_auto_import_help($path, $arg) {
  switch ($path) {
    case 'admin/config/regional/translate/auto_import':
      $output = '<p>' . t('This page imports the translated strings contained in all the individual Gettext Portable Object (<em>.po</em>) files found in the modules you check into the correct text group according to the way the file is named. Importing multiple <em>.po</em> file may be a lengthy process.') . '</p>';
      return $output;
      break;
  }
}

/**
 * Implements hook_menu().
 */
function locale_auto_import_menu() {
  $items = array();

  $items['admin/config/regional/translate/auto_import'] = array(
    'title' => 'Automatic Import',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('locale_auto_import_form'),
    'access arguments' => array('translate interface'),
    'weight' => 19,
    'type' => MENU_LOCAL_TASK,
    'file' => 'locale_auto_import.admin.inc',
  );

  return $items;
}

/**
 * Implements hook_modules_installed().
 */
function locale_auto_import_modules_installed($modules) {
  locale_auto_import_system_update($modules);
}

/**
 * Imports translations of a list of modules.
 */
function locale_auto_import_system_update($components, $mode = LOCALE_AUTO_IMPORT_DEFAULT_MODE) {
  require_once 'locale_auto_import.inc';
  if ($batch = locale_auto_import_batch_by_component($components, $mode)) {
    batch_set($batch);
  }
}
