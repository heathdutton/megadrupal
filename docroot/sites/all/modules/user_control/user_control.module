<?php

/**
 * Implements hook_permission().
 */
function user_control_permission() {
  return array(
    'administer the role' => array(
      'title' => t('Administer the role control'),
      'description' => t('Change the settings of the module and choose roles that will be managed'),
    ),
    'assign roles' => array(
      'title' => t('Assign roles'),
      'description' => t('Have access to a page adding and removing users from roles'),
    ),
  );
}


/**
 * Implements hook_menu().
 */
function user_control_menu() {
  $items = array();
  
  $items['admin/users'] = array(
    'title' => 'Administrative roles',
    'page callback' => '_user_control_page',
    'access arguments' => array('assign roles'),
    'file' => 'user_control.page.inc',
  );
  
  $items['admin_users_js/%/%/%'] = array(
    'title' => 'Administrative roles',
    'page callback' => '_user_control_ajax',
    'page arguments' => array(1, 2, 3),
    'delivery callback' => 'ajax_deliver',
    'access arguments' => array('assign roles'),
    'file' => 'user_control.page.inc',
  );

  $items['admin/people/control_roles'] = array(
    'title' => 'User control',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('_user_control_settings_form'),
    'access arguments' => array('administer the role'),
    'file' => 'user_control.page.inc',
    'type' => MENU_NORMAL_ITEM,
  );
  
  return $items;
}


/**
 * Implements hook_theme().
 */
function user_control_theme() {
  return array(
    'user_control_ajax_buttons' => array(
      'variables' => array(
        'uid' => NULL,
        'roles' => NULL,
      ),
      'file' => 'user_control.page.inc',
    )
  );
}

