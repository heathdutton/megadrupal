<?php
/**
 * Implements hook_requirements().
 * We'll check if job_scheduler module exists, otherwise flag a warning.
 */
function uc_checkoutfi_requirements($phase) {
  $requirements = array();
  $t = get_t();
  
  switch ($phase) {
    case 'runtime':
      // Delayed Payment status checking won't work without jobscheduler.
      if (!module_exists('job_scheduler')) {
        $requirements['uc_checkoutfi_job_scheduler'] = array(
          'title' => $t('Ubercart Checkout.fi Payment Method'),
          'severity' => REQUIREMENT_WARNING,
          'value' => $t('Delayed payment status checking will not work without <a href="http://drupal.org/project/job_scheduler">Job Scheduler</a>.'),
        );
      }
      break;
  }
  return $requirements;
}
