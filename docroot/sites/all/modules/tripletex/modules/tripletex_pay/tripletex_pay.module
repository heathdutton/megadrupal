<?php
/**
 * @file
 * Implements the Tripletex payment method for the Pay payment API
 * http://drupal.org/project/pay
 */

/* Constants declarations */

/**
 * Display help and module information
 * @param path which path of the site we're displaying help
 * @param arg array that holds the current path as would be returned from arg() function
 * @return help text for the path
 */
function tripletex_pay_help($path, $arg) {
  $output = '';
  switch ($path) {
    case "admin/help#tripletex":
      $output = '<p>' . t("Tripletex Pay provides an payment method for Create Orders and Invoices in " .
            "<a href='http://tripletex.no'>Tripletex</a> from Drupal") . '</p>';
      break;
  }
  return $output;
} // function tripletex_pay_help





/**
 * Menu for this module
 * @return array An array with this module's settings.
 */
function tripletex_pay_menu() {
  $items = array();

  //Link to the tripletex admin page:



  $items['admin/config/tripletex/pay'] = array(
    'title' => 'Tripletex Pay',
    'description' => 'Administer Tripletex Pay Settings',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('tripletex_pay_settings'),
    'access arguments' => array('administer tripletex'),
    'type' => MENU_NORMAL_ITEM,
  );

  return $items;
}

/**
 * Provides the menu structure for the settings page.
 * @return array Form structure
 */
function tripletex_pay_settings($form, &$form_state) {

  $form = array();

  $form['settings'] = array(
    '#type' => 'fieldset',
    '#title' => t('Default settings'),
    '#description' => t('Enter the default settings for the Tripletex Pay Payment Method'),
  );

  return system_settings_form($form);

}

/**
 * This hook is used to inform Pay of available payment method handlers.
 * Administrators will be able to create new instances of payment methods,
 * based on the capabilities and options for your handler(s).
 */
function tripletex_pay_pay_method_handler_info() {
  return array(
    'pay_method_custom_tripletex' => array(
      'title' => t('Invoice via Tripletex'),
      'description' => t('Payment through electronic invoice generated via accounting system.'),
      'parent' => 'pay_method_custom',
      'module' => 'tripletex_pay',
      'path' => drupal_get_path('module', 'tripletex_pay') . '/includes',
    ),
  );
}


//---------------------------------------------------------------------------------



// *** Helper functions ***




