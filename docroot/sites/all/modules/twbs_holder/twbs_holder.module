<?php

/**
 * @file
 * Holder library integration.
 */

/**
 * Implements hook_help().
 */
function twbs_holder_help($path, $arg) {
  $output = '';

  switch ($path) {
    case 'admin/help#twbs_holder':
      return '<p>' . t('Client side image placeholders.') . '</p>';
  }

  return $output;
}

/**
 * Implements hook_init().
 */
function twbs_holder_init() {
  drupal_load('module', 'libraries');

  $libraries = twbs_holder_libraries_info();
  foreach ($libraries as $name => $info) {
    libraries_load($name);
  }
}

/**
 * Implements hook_libraries_info().
 */
function twbs_holder_libraries_info() {
  $libraries['holder'] = array(
    'name' => 'Holder',
    'version' => '2.2.0',
    'vendor url' => 'https://github.com/imsky/holder',
    'download url' => 'https://github.com/imsky/holder/archive/v2.2.0.zip',
    'version arguments' => array(
      'file' => 'holder.js',
      'pattern' => '/^Holder - ([0-9a-zA-Z\.-]+)/',
    ),
    'files' => array(
      'js' => array(
        'holder.js' => array(
          'every_page' => TRUE,
          'group' => JS_LIBRARY,
        ),
      ),
    ),
  );

  return $libraries;
}
