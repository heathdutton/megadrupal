<?php

/**
 * @file
 * This is the schema of BeansTag.
 */

/**
 * Implements hook_schema().
 */
function beanstag_schema() {
  $schema = array();

  $schema['beanstag'] = array(
    'description' => 'The base table for saved meta tags and page title for path alias.',
    'fields' => array(
      'id' => array(
        'description' => 'The primary identifier',
        'type' => 'serial',
        'unsigned' => TRUE,
        'not null' => TRUE,
      ),
      'uid' => array(
        'description' => 'The user identifier.',
        'type' => 'int',
        'unsigned' => TRUE,
        'not null' => TRUE,
        'default' => 0,
      ),
      'path_alias' => array(
        'description' => 'The path alias for customized meta tags and page title.',
        'type' => 'varchar',
        'length' => '255',
        'not null' => TRUE,
      ),
      'page_title' => array(
        'description' => 'The page title for the path alias.',
        'type' => 'varchar',
        'length' => '255',
        'not null' => FALSE,
      ),
      'meta_keywords' => array(
        'description' => 'The meta keywords for the path alias.',
        'type' => 'varchar',
        'length' => '255',
        'not null' => FALSE,
      ),
      'meta_description' => array(
        'description' => 'The meta description for the path alias.',
        'type' => 'varchar',
        'length' => '255',
        'not null' => FALSE,
      ),
      'meta_robots' => array(
        'description' => 'The meta robots for the path alias.',
        'type' => 'varchar',
        'length' => '255',
        'not null' => FALSE,
      ),
      'meta_canonical' => array(
        'description' => 'The meta canonical for the path alias.',
        'type' => 'varchar',
        'length' => '255',
        'not null' => FALSE,
      ),
    ),
    'primary key' => array('id'),
  );

  return $schema;

}

/**
 * Add meta_robots and meta_canonical fields to {beanstag} table.
 */
function beanstag_update_7100() {
  // Add meta robots.
  $spec = array(
    'type' => 'varchar',
    'description' => 'The meta robots for the path alias.',
    'length' => '255',
    'not null' => FALSE,
  );
  db_add_field('beanstag', 'meta_robots', $spec);

  // Add meta_canonical.
  $spec = array(
    'type' => 'varchar',
    'description' => 'The meta canonical for the path alias.',
    'length' => '255',
    'not null' => FALSE,
  );
  db_add_field('beanstag', 'meta_canonical', $spec);
}

/**
 * Implements hook_uninstall().
 */
function beanstag_uninstall() {
  variable_del('beanstag_override');
  variable_del('beanstag_enable_meta_robots');
  variable_del('beanstag_enable_meta_canonical');
}
