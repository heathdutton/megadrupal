<?php
/**
 * @file
 * Main bootstrap file of the tmgmt_server_test module.
 */


/**
 * Implements hook_menu().
 */
function tmgmt_server_test_menu() {
  $items['tmgmt_server_test_tc/tmgmt-drupal-callback'] = array(
    'page callback' => 'tmgmt_client_test_mock_ts_submit',
    'type' => MENU_CALLBACK,
    'access callback' => TRUE,
  );

  return $items;
}

/**
 * Fakes clients notify callback.
 */
function tmgmt_client_test_mock_ts_submit() {
  $connector = new TMGMTRemoteGenericConnector(url('', array('absolute' => TRUE)));
  $connector->setEntityInfo('mock_remote_entity', 1);
  $response = $connector->get('translation-job/' . $_REQUEST['id'] . '/item');
  variable_set('tmgmt_server_test_pulled_job', $response);
}
