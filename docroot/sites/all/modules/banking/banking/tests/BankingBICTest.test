<?php

/**
 * @file
 * Contains class BankingBICTest.
 */

/**
 * Tests BankingBIC.
 */
class BankingBICTest extends DrupalWebTestCase {

  static function getInfo() {
    return array(
      'name' => 'BankingBIC',
      'group' => 'Banking',
      'dependencies' => array('banking'),
    );
  }

  function setUp(array $modules = array()) {
    parent::setUp(array_merge($modules, array('banking')));
  }

  /**
   * Tests getBranchCode().
   */
  function testgetBranchCode() {
    $bic = new BankingBIC('DSBACNBXSHA');
    $this->assertEqual($bic->getBranchCode(), 'SHA');
    $bic = new BankingBIC('RABONL2U');
    $this->assertEqual($bic->getBranchCode(), 'XXX');
  }

  /**
   * Tests validate().
   */
  function testValidate() {
    $bics_valid = array('RABONL2U', 'DSBACNBXSHA');
    foreach ($bics_valid as $bic) {
      $bic = new BankingBIC($bic);
      $this->assertTrue($bic->validate());
    }
    $bics_invalid = array('NL91ABNA0417164301', '12ABONL2U');
    foreach ($bics_invalid as $bic) {
      $bic = new BankingBIC($bic);
      $this->assertFalse($bic->validate());
    }
  }
}
