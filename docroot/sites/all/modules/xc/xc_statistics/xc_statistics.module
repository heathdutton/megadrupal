<?php
/**
 * @file
 * XC Statistics module functions
 *
 * @copyright (c) 2010-2011 eXtensible Catalog Organization
 */

/**
 * Save statistical data into database
 * @param $type (String)
 *   The type of statistics. Currently we supports facet and search.
 * @param $data (Object or array)
 *   The statistical data
 */
function xc_statistics_save($type, $data) {
  switch ($type) {
    case 'facet':
      $table = 'xc_statistics_facet';
      break;

    case 'search':
      $table = 'xc_statistics_search';
      break;
  }

  if (is_array($data)) {
    $data = (object) $data;
  }
  if (is_object($data)) {
    if (!isset($data->timestamp)) {
      $data->timestamp = time();
    }
    drupal_write_record($table, $data);
  }
}
