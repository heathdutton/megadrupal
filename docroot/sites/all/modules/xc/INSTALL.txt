

                          The eXtensible Catalog

                              Drupal Toolkit

                               INSTALLATION


Beginning Notes
---------------
Installing the Drupal Toolkit, as with any other Drupal module, requires some
understanding of the Drupal content management system. Drupal is a free and
open source content management system written in PHP and distributed under
the GNU General Public License.

To learn more about Drupal, visit: http://drupal.org

Before installing the Drupal Toolkit, back up all files and databases that may
be affected; specifically, the Drupal document root and primary Drupal
database.


Notice
------
Currently, there have been no public releases of the Drupal Toolkit. Therefore,
installation is primarily for demo and development purposes.

Make sure to back up your file system and database before installing the Drupal
Toolkit or upgrading between versions. The nature of the continuous updates to
the Drupal Toolkit modules may result in deletion or loss of all metadata and
their related nodes.

When installing, pay attention to module dependencies. Although all modules can
be installed at once, you may not want to do so.

When uninstalling, pay very close attention to those dependencies, as one
module’s uninstallation may depend on the existence of another module.


Neccessary Software Requirements
--------------------------------
HTTP web server (such as Apache)
SQL database server (such as MySQL)
PHP 5.2 (currently we do not support PHP 5.3)
Drupal 6.12, or higher
File archiver (such as 7-Zip, tar, or gzip)

For more information, visit: http://drupal.org/requirements


Highly Recommended Software
---------------------------
Sun/Oracle Java 1.5, or higher
Apache Solr 1.3, or higher


Modules Included
----------------
OAI Harvester
ILS Integration
NCIP Integration
EZProxy URL Rewrite
Syndetics Solutions Services

XC Core
XC Account
XC Authentication
XC Metadata
XC Metadata Import and Export
XC OAI Harvester Bridge
XC Schema
XC OAI-DC Schema
XC Solr
XC SQL
XC Browse
XC Search
XC NCIP Integration
XC eXternal Services Framework API


Assumptions
-----------
This installation guide assumes the reader is installing the Drupal Toolkit
with the Apache HTTP web server and MySQL database server. Although not
required, this system setup has been used for development and testing of the
Drupal Toolkit modules.

Apache HTTP, MySQL, and PHP (along with Perl or Python) is such a popular
software stack that they are often bundled together into a suite called LAMP,
WAMP, or MAMP, depending on the operating system: (L)inux, (W)indows, or
(M)ac OS.

The easiest and fastest way to install Apache, MySQL, and PHP together is by
downloading and installing one of these software bundles. One of the most
popular bundles to download is called "XAMPP", released by Apache Friends.

You can find released versions of XAMPP for Linux (LAMP), Windows (WAMP), Mac
OS (MAMP), and even Solaris, from: http://www.apachefriends.org/en/xampp.html

This installation guide assumes the user is using XAMPP for Apache, MySQL,
and PHP. The notible difference for those not using XAMPP is primarily the
versions of each software component used and the directories the configuration
files and other settings are stored.

Running the Drupal Toolkit on a LAMP, WAMP, or MAMP distribution works well
for developing environments, but is not best suited for production environments.
Those who intend to use the Drupal Toolkit for production environments should
download and install Apache (or any other web server), MySQL (or any other
database server), and PHP separately.

Apache: http://httpd.apache.org/download.cgi

MySQL: http://dev.mysql.com/downloads/

PHP: http://php.net/downloads.php

A simple search on Google will result in easy instructions on how to install
and configure either of these on any platform.

This guide also assumes the reader is installing Solr within the Apache Tomcat
servlet container, although Solr comes with pre-packaged and embedded with
Jetty. Tomcat is a very popular and has similar configuration files as the
Apache HTTP web server.


Getting the Drupal Toolkit
--------------------------
The Drupal Toolkit is available for downloaded at:
http://drupal.org/project/xc

Scrolling down this page will reveal a two releases: the "recommended" and
"development" releases.

The recommended release is usually stable and tested, however there may be a
few bugs or issues needing to be fixed. The development release is not always
stable, however it usually includes necessary fixes for bugs and issues in the
recommended release.

As of now, BOTH the recommended and development releases are for development
purpose only. The only difference is that the "development" release is updated
nightly, whereas the "recommended" release is a snapshot of the code at a
particular time of development.

The first step in installing the Drupal Toolkit is to download one of these two
releases to use. Make a choice. The "development" release is better for those
who intend to test all features of the Drupal Toolkit, including those still in
development, such as advanced search and faceting of record sets. The
"recommended" release is for those who intend to only use specific modules for
common tasks; for example, if only desiring to harvest data.

After downloading the archive, extract it to a location on your machine where
you can then copy it to a location accessible to your web server. Use an
appropriate file archiver to extract the contents depending on your operating
system:
  - On Windows, use 7-Zip (http://www.7-zip.org) by right-clicking the file
    and selecting "7-Zip" > "Extract Here"
  - On Linux and Mac OS, use tar and gzip combined as follows:
        tar -zxvpf FILENAME

Throughout this installation guide, some files within the archive may need to
be copied elsewhere. For example, the Solr configuration files need to be
copied from a directory within the archive to the Solr home directory.


Installing Apache, MySQL, and PHP
---------------------------------
 1. Navigate to: http://www.apachefriends.org/en/xampp.html

 2. Choose the correct XAMPP version for your operating system, "XAMPP for..."
      - Linux: http://www.apachefriends.org/en/xampp-linux.html
      - Windows: http://www.apachefriends.org/en/xampp-windows.html
      - Mac OS: http://www.apachefriends.org/en/xampp-macosx.html

 3. Choose the correct package to download
      - For Linux, there is only one package, do not choose the upgrade or
        development versions
      - For Windows, choose the "EXE" package, the self-extracting RAR archive
      - For Mac OS, choose the "Universal Binary"

 4. Follow the rest of the installation instructions on the web page, which
    are specific to the operating system
      - For Windows, follow "Method A" installation, which uses the Windows
        installer

 5. Keep note of important directories used by XAMPP, which should be listed
    on the same web page, as this will be useful when configuring Apache,
    MySQL, and PHP

After installing XAMPP, check the status of each component by navigating to
the URL: http://localhost/xampp

NOTE: Installing Apache HTTP creates a web server on your computer. If attached
to an external network, such as a business intranet, school network, or the
world wide web, this could make your computer more vulnerable to attacks.

Make sure to enable a firewall program and pay attention to security advice
and tips, such as those from Apache:
http://httpd.apache.org/docs/2.0/misc/security_tips.html

KNOWN INCOMPATIBILITIES: Web servers usually run on port 80 for HTTP and may
also use port 443 for HTTPS. Therefore, running multiple web servers is not
suggested.

In addition, some applications, for ease of communication, tend to use these
ports, as they are not typically not blocked by network firewalls or NAT.

The most common problem is with Skype on Windows. Therefore, if Skype is
installed, turn off the setting in the Skype preferences to prevent Skype
from listening on port 80 and 443:

 1. Open Skype

 2. Click the Tools menu and select Options

 3. Click the Advanced tab, and click the Connection tab that slides underneath

 4. Make sure the checkbox for "Use port 80 and 443 as an alternatives..."
    is unchecked

 5. Click the Save

 6. Restart Skype to make the change effective


Configuring Apache
------------------
Find and open the Apache HTTP configuration for editing. It may be in different
locations, depending on the operating system.
  - Linux: /opt/lampp/etc/httpd.conf
  - Windows: C:\xampp\apache\conf\httpd.conf
  - Mac OS: /Applications/XAMPP/etc/httpd.conf

 1. Enable Mod Rewrite by uncommenting the line for "mod_rewrite"

    This line should look like either of the following lines:
        #LoadModule rewrite_module modules/mod_rewrite.so  (Linux and Mac OS)
        #LoadModule rewrite_module modules/mod_rewrite.dll (Windows)

    There should be a specific section listing the Apache modules. This
    is typically at the beginning of the configuration file and can be
    identified by a long sequence of lines beginning with "LoadModule".

    Uncommenting involves simply removing the comment hash "#" from the
    beginning of a line.

 2. Allow .htaccess files to modify Apache configuration options

    The .htaccess file located at the Drupal root adds site specific settings
    to Drupal. For example, it allows the use of Clean URLs, replacing URLs
    such as http://www.example.com?q=node/1 with http://www.example.com/node/1
    and allowing web pages to be accessed by the latter URL.

    To do this, ensure that the "Directory" or "Location" used by Drupal has
    permission to override Apache’s configuration settings by using Apache's
    "AllowOverride" directive, such as in either of the following:

    <Directory [directory]>
        Options Indexes FollowSymLinks
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>

    <Location [location]>
        Options Indexes FollowSymLinks
        AllowOverride All
        Order allow,deny
        Allow from all
    </Location>

    The value of [directory] depends on the operating system and is typically
    the server root for web documents
      - Linux: /opt/lampp/htdocs
      - Windows: C:\xampp\htdocs
      - Mac OS: /Applications/XAMPP/htdocs

    It is the path to the directory within the file system for the server root.
    If installing Drupal at the base root of the server or any directory
    underneath that root, setting this to the web documents root will suffice.

    The value of [location] is not operating system dependent. It is either
    the path to a directory beginning at the server root or the path of an
    alias. If "Directory" is not used, setting this to "/" will suffice.

    Read the Apache HTTP documentation for more information about the use of
    "Directory" or "Location". The important thing is that "AllowOverride" is
    set to "All" for the Drupal or root or any of its parent directories.

    Note that it is possible that there are multiple lines commented out
    (beginning with a hashmark "#" character) between the opening and closing
    <Directory> or <Location> tags. What is important here is only that the
    AllowOverride directive should be set to "All" and not "None".

    You can find more information all about this settings in Clean URLs manual
    page of the Drupal Installation Guide at: http://drupal.org/node/15365.

 3. Restart Apache by either using the XAMPP Control Panel or the operating
    system’s command line/prompt or terminal


Configuring MySQL
-----------------
 1. For security, change the default MySQL "root" user password

    MySQL administration programs are located in the MySQL "bin" directory
      - Linux: /opt/lampp/mysql/bin
      - Windows: C:\xampp\mysql\bin
      - Mac OS: /Applications/XAMPP/mysql/bin

    When in the MySQL "bin" directory, type the following command, where
    "NEWPASSWORD" is the password for the root user
        mysqladmin -u root password NEWPASSWORD
    For example:
        mysqladmin -u root password admin

    To change the password again, type the following
        mysqladmin -u root -p OLDPASSWORD password NEWPASSWORD
    For example:
        mysqladmin -u root -p admin password secr3t


Configuring PHP
---------------
Find and open the PHP configuration for editing. It may be in different
locations, depending on the operating system.
  - Linux: /opt/lampp/php/php.ini
  - Windows: C:\xampp\php\php.ini
  - Mac OS: /Applications/XAMPP/php/php.ini

 1. Enable MySQL extensions by uncommenting the lines for "mysql" and "mysqli"
      - mysql  (original MySQL extension)
      - mysqli (an improved connector for newer MySQL installations)

    These lines should look like either of the following couples of lines:
        ;extension=mysql.so (Linux and Mac OS)
        ;extension=mysqli.so (Linux and Mac OS)

        ;extension=mysql.dll (Windows)
        ;extension=mysql.dll (Windows)

    In the configuration file, there is a specific section listing the PHP
    extensions. This can be identified by a long sequence of lines beginning
    with "extension=".

    Uncommenting involves simply removing the comment semi-colon ";" from the
    beginning of a line.

 2. Set the user-level session storage handler
        session.save_handler = user

 3. Turn off the current cache limiter
        session.cache_limiter = nocache

 4. Set the PHP error reporting level
        error_reporting = E_ALL & ~E_NOTICE

 5. Turn PHP "safe-mode" off
        safe_mode = off

 6. Increase the PHP execution time
        max_execution_time = 90

 7. Increase PHP memory limit
        memory_limit = 64M

Each of these PHP configuration setting provides more information in the
comment sections of the configuration file.

The default PHP maximum execution time and memory limit settings are too low
for the Drupal Toolkit on most machines. Depending on your system, you may want
to increase these levels even more than the suggested amounts above.

Channging these settings in the PHP configuration file will make them global
for all PHP applications. To restrict these settings to the Drupal intance,
edit the .htaccess file inside root of Drupal directory.

Some of the configuration settings can only be set from the configuration file.
For more information, consult the table available at:
http://php.net/manual/pl/ini.list.php.

For the meaning of the column entitled "Changeable", see:
http://php.net/manual/en/configuration.changes.modes.php.

The PHP installer should automatically configure Apache’s configuration file,
but if it does not, then manually edit the file. See the section "Configuring
Apache" for how to locate the Apache configuration file (http.conf). Then,
append the following lines to the end of the file, making sure to change the
paths to the appropriate path, if not using XAMPP.

For Linux:

    # PHP Configuration for Apache
    ScriptAlias /php/ "/opt/lampp/php/"

    # Add PHP type
    AddType text/html php

    # Load PHP modules
    LoadModule php5_module "/opt/lampp/php/php5apache2_2.so"
    LoadModule php5_module "/opt/lampp/php/php5apache2.so"
    LoadModule php5_module "/opt/lampp/php/php5apache.so"

    # PHP Configuration
    PHPIniDir "/opt/lampp/php/"

For Windows:

    # PHP Configuration for Apache
    ScriptAlias /php/ "c:/xampp/php/"

    # Add PHP type
    AddType text/html php

    # Load PHP modules
    LoadModule php5_module "c:/xampp/php/php5apache2_2.dll"
    LoadModule php5_module "c:/xampp/php/php5apache2.dll"
    LoadModule php5_module "c:/xampp/php/php5apache.dll"

    # Handle PHP
    Action application/x-httpd-php "c:/xampp/php/php-cgi.exe"

    # PHP Configuration
    PHPIniDir "c:/xampp/php/"

For Mac OS:

    # PHP Configuration for Apache
    ScriptAlias /php/ "/Applications/XAMPP/php/"

    # Add PHP type
    AddType text/html php

    # Load PHP modules
    LoadModule php5_module "/Applications/XAMPP/php/php5apache2_2.so"
    LoadModule php5_module "/Applications/XAMPP/php/php5apache2.so"
    LoadModule php5_module "/Applications/XAMPP/php/php5apache.so"

    # PHP Configuration
    PHPIniDir "/Applications/XAMPP/php/"

Also, modify the following line, changing:

    <IfModule dir_module>
        DirectoryIndex index.html
    </IfModule>

To the following:

    <IfModule dir_module>
        DirectoryIndex index.html index.php
    </IfModule>


Installing Java
---------------
Java is a necessary prerequiste for Apache Solr, which is required for search,
indexing, and many other features of the Drupal Toolkit. Although, neither Solr
is not required to install for the Drupal Toolkit, it is highly recommended.

Java can be downloaded from: http://www.java.com/en/download/manual.jsp

Before installing, you may want to check if your system has Java already
installed since many Linux and Mac distributions have Java pre-installed. To
check, open your system’s command line/prompt or terminal and type the
following:
    java -version

If Java is installed, it should respond with some detailed information about
the version of Java installed, such as:
    Java(TM) SE Runtime Environment (build 1.6.0_16-b01)
    Java HotSpot(TM) 64-Bit Server VM (build 14.2-b01, mixed mode)

If Java is not installed, the command line/prompt or terminal will likely
respond with statement that a bad or incorrect command has been entered or
that the system is unable to execute a program named "java" because none
exists.

Also, note that Apache Solr requires Sun/Oracle Java 1.5, or higher, not
just any flavor of Java. It works with OpenJDK, Sun/Oracle, or IBM versions
of Java, but is not compatible with GNU’s Compiler for Java. Users running
Ubuntu or similar operating systems that may come pre-installed with the wrong
flavor of Java should remove GNU Java and install one that is supported.

On this web page, scroll down to the section for the appropriate operating
system and choose a desired package to download. Next to each link to download
a package, you will find a link for instructions on how to install it.


Installing Apache Solr
----------------------
Apache Solr is a powerful powerful full-text and faceted search server with
a list of features, such as highlighting, caching, replication, and a web
administration interface.

More information about Solr can be found at:
http://lucene.apache.org/solr/

Solr is a Java application that runs within a servlet container, such as
Apache Tomcat or Jetty. For this reason, there are many ways to install and
configure Solr.

From now on, [solr] will be used to substitute the directory or path where
Apache Solr is installed.

The easiest and fastest way to get Solr up and running is to simply download
the application and run it with the embedded version of Jetty:

 1. Follow the Solr tutorial instructions at:
    http://lucene.apache.org/solr/tutorial.html

 2. Navigate to the Solr administration page in a web browser to verify that
    the server is running at: http://localhost:8983/solr/admin

 3. Take note of the port number (8983) and the Solr directory (solr)

Following the tutorial will require running the Solr sever from the command
line, attached to port 8983 by default.

Although this may be the quickest way, to install Solr the suggested way is to
place the Solr application within a Apache Tomcat. One advantage of Tomcat is
the ability to easily run Tomcat as a service on Windows platforms to start
Solr when the machine boots. It is not as easy to run Jetty as a service.

From now on, [tomcat] will be used to substitute the directory or path where
Apache Tomcat is installed.

If using Tomcat, follow the instructions in the next section entitled
"Installing and Configuring Apache Tomcat". After Tomcat is installed, follow
the instructions below to install Solr:

 1. Navigate to: http://www.apache.org/dyn/closer.cgi/lucene/solr/

 2. Choose a suitable mirror site to download from if one is not already chosen

 3. From the "Solr Releases" page, select the "1.4.0" directory

 4. Select "apache-solr-1.4.0.zip" to download the ZIP archive for Solr

 5. Unzip the archive to a convenient location, such as "C:\Program Files\Solr"
    on Windows or "~/solr" on Linux or Mac OS.

 6. Stop Apache Tomcat

    This may be different depending on your operating system and Tomcat setup.

    On Windows, it usually involves stopping the Tomcat by either:
      a) Opening the Apache Tomcat control panel
      b) Click STOP

    Or:
      a) Opening the Windows services by navigating to Start > Run
      b) Typing "services.msc" in the textfield, without the quotes
      c) Selecting the Tomcat service from the list
      d) Click STOP to stop the service

    On Linux and Mac OS, from the terminal, navigate to the Tomcat home
    directory and type "./bin/shutdown.sh", without the quotes

 7. Copy the Solr web application archive to the Tomcat webapps directory

    The Solr WAR file is usually in the form of *solr*.war and located in
    the [solr]/dist directory. The Tomcat webapps directory is usually
    located at [tomcat]/webapps. In Windows, replace "/" with "\".

    The asterisk, "*", signify that there could be characters surrounding the
    word "solr" in the file name, such as: "apache-solr-1.4.0.war".

 8. Rename the Solr WAR file to "solr.war"

 9. Configure Tomcat to recognize the solr home directory

    On Windows, use the following Java option:
        -Dsolr.solr.home=[solr]\example\solr

    From the Tomcat system tray icon, add this Java option in the Java tab. Or
    manually edit the environment script located at [tomcat]\bin\setenv.bat
    to include this option in the JAVA_OPTS environment variable.

    On Linux or Mac OS, use the following Java option:
        -Dsolr.solr.home=/opt/solr/example

    The simplest way to do this is to add it to one of the shell scripts
    executed when Tomcat is started. Append the following line to
    [tomcat]/bin/startup.sh or a system startup script, such as ~/.bashrc:
        export JAVA_OPTS="$JAVA_OPTS -Dsolr.solr.home=/opt/solr/example"

    If not using the Bash shell, change "export" to the appropriate command to
    assign environment variables.

10. Copy the Solr configuration files from the Drupal Toolkit to the Solr
    configuration directory

    The Drupal Toolkit archive downloaded from: http://drupal.org/project/xc
    contains a single directory named "xc", which contains directories named
    after each Drupal module within the Drupal Toolkit.

    Within the "xc_solr" directory, for the XC Solr module, there is a
    directory named "resources", which contains two configuration files to
    copy: "schema.xml" and "solrconfig.xml".

    In summary, if the Drupal Toolkit was extracted to the root of a directory,
    the path to the two files would be as follows:
        xc/xc_solr/resource/schema.xml
        xc/xc_solr/resource/solrconfig.xml

    In Windows, replace "/" with "\".

    Copy these two files to the Solr configuration directory within Tomcat. In
    Windows, if Tomcat was installed to C

11. Start Apache Tomcat

    As with stopping Tomcat, this depends on your operating system and Tomcat
    setup.

    On Windows, it usually involves stopping the Tomcat by either:
      a) Opening the Apache Tomcat control panel
      b) Click STOP

    Or:
      a) Opening the Windows services by navigating to Start > Run
      b) Typing "services.msc" in the textfield, without the quotes
      c) Selecting the Tomcat service from the list
      d) Click STOP to stop the service

    On Linux and Mac OS, from the terminal, navigate to the Tomcat home
    directory and type "./bin/startup.sh", without the quotes

12. Navigate to the Solr administration page in a web browser to verify that
    the server is running at: http://localhost:8080/solr/admin

13. Take note of the port number (8080) and the Solr directory (solr)

Following these instructions will run the Solr sever when your machine boots,
attached to port 8080, the default port for Apache Tomcat.

Further in this document, in the Drupal section, the standard Solr port (8983)
is used when instructing how to connect to Solr. If installing Solr with Tomcat,
make sure to use the Tomcat port (8080 by default) instead of the default Solr
port (8983).


Installing and Configuring Apache Tomcat
----------------------------------------
Apache Tomcat is an open source servlet container for Java web applications
and, although Solr can be installed without Tomcat, it is suggested that Solr
be installed alongside Tomcat.

There are numerous ways to install Apache Tomcat, even for specific operating
systems. For example, Tomcat can be installed in Windows with an installer, as
suggested in this document, or by an archive, as is done with Linux and Mac OS.
However, For those not as skilled in installing this kind of software,
following the instructions in this guide, may make the process less difficult.

More information about Apache Tomcat can be found at:
http://tomcat.apache.org

A wiki is also available at:
http://wiki.apache.org/tomcat/FrontPage

 1. Navigate to: http://tomcat.apache.org/download-60.cgi

 2. Download the latest version of Tomcat 6
      a) Scroll down to the section for the latest Tomcat version. As of this
         writing, 6.0.24 is the latest version.
      b) In the sub-section entitled "Binary Distributions" and under the
         bullet entitled "Core" is a listing of different versions to download
         depending on your operating system:
            - On Windows, download the 32-bit/64-bit Windows Service Installer:
                apache-tomcat-[version].exe (apache-tomcat-6.0.24.exe)
            - On Linux or Mac OS, download the zip
                apache-tomcat-[version].zip (apache-tomcat-6.0.24.zip)

 3. Follow the instructions to install Tomcat at:
    http://tomcat.apache.org/tomcat-6.0-doc/setup.html

    On Windows, while using the installer, select Tomcat/Service and
    Tomcat/Native checkboxes to install Tomcat as service and enhance
    performance.

    On Windows, If you accept the default values, Tomcat will be installed
    to: "C:\Program Files\Apache Software Foundation\Tomcat 6.0"

    On Linux and Mac OS, unzip the archive to a convenient location:
        - On Linux, "/opt/tomcat" is a decent location
        - On Mac OS, "/Library/Tomcat" is a decent location

    Keep track of this locations. For the rest of this document, it is referred
    to as [tomcat].

 4. Configure Tomcat, if neccessary
      a) Open the Tomcat user configuration file, located at
         [tomcat]/conf/tomcat-users.xml file, for editing (On Windows, replace
         "/" with "\")

      b) Edit or append the following lines, using a secure password nstead of
         "secr3t":
            <tomcat-users>
                <role rolename="manager"/>
                <user username="admin" password="secr3t" roles="manager"/>
            </tomcat-users>

         This sets up a role "manager" with a user "admin". This user is
         necessary for Tomcat administration.

 5. Check if Tomcat is installed correctly by navigating to:
    http://localhost:8080

 6. On Windows, check if Tomcat is installed as a service
      a) Open the Windows services by navigating to Start > Run
      b) Type "services.msc" in the textfield, without the quotes
      c) Look for "Tomcat" in the list of services

      d) Check if the "Launch Type" column is set to "Automatic"
            - If not, click on the row and set it to "Automatic"

 7. On Linux, create a startup script to start Tomcat when the machine boots
      a) Create a file "/etc/init.d/tomcat" with the following contents:
            #!/bin/bash

            . /etc/init.d/functions

            RETVAL=$?
            CATALINA_HOME="/opt/tomcat"

            case "$1" in
             start)
                    if [ -f $CATALINA_HOME/bin/startup.sh ];
                      then
                        echo $"Starting Tomcat"
                        /bin/su tomcat $CATALINA_HOME/bin/startup.sh
                    fi
                    ;;
             stop)
                    if [ -f $CATALINA_HOME/bin/shutdown.sh ];
                      then
                        echo $"Stopping Tomcat"
                        /bin/su tomcat $CATALINA_HOME/bin/shutdown.sh
                    fi
                    ;;
             *)
                    echo $"Usage: $0 {start|stop}"
                    exit 1
                    ;;
            esac

            exit $RETVAL

      b) Make sure to replace "/opt/tomcat" with the correct location of
         Tomcat on your system

      c) Create a symbolic link to the appropriate run levels to launch this
         script at startup (this may be different, depending on the distro)
            sudo ln -s /etc/init.d/tomcat /etc/rc1.d/S71tomcat
            sudo ln -s /etc/init.d/tomcat /etc/rc2.d/S71tomcat
            sudo ln -s /etc/init.d/tomcat /etc/rc3.d/S71tomcat
            sudo ln -s /etc/init.d/tomcat /etc/rc4.d/S71tomcat
            sudo ln -s /etc/init.d/tomcat /etc/rc5.d/S71tomcat

 8. On Mac, add a LaunchDaemon to start Tomcat when the machine boots
      a) Create a file "/Library/LaunchDaemons/org.apache.tomcat.plist" with
         the following content:
            <?xml version="1.0" encoding="UTF-8"?>
            <!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
            <plist version="1.0">
            <dict>
                    <key>Disabled</key>
                    <false/>
                    <key>Label</key>
                    <string>com.apache.tomcat</string>
                    <key>ProgramArguments</key>
                    <array>
                            <string>/Library/Tomcat/bin/startup.sh</string>
                    </array>
                    <key>RunAtLoad</key>
                    <true/>
            </dict>
            </plist>

      b) Make sure to replace "/Library/Tomcat" with the correct location of
         Tomcat on your system

 9. Modify the Tomcat server configuration file to support UTF-8 encoding
      a) Open [tomcat]/conf/server.xml for editing
      b) Add the URIEncoding Connector element as following to every <Connector>
         element:
           <Server ...>
             <Service ...>
               <Connector ... URIEncoding="UTF-8"/>
                ...
               </Connector>
             </Service>
           </Server>

         Note, that there may be multiple <Connector> elements. You need to
         modify all instances!

More information on installing Tomcat on Mac OS is at:
http://wiki.apache.org/tomcat/TomcatOnMacOS

More information on installing Tomcat on Windows is at:
http://wiki.apache.org/tomcat/FAQ/Windows

Finally, keep in mind that Tomcat is a very popular Java servlet container. A
simple search on Google would lead to many resources, tip, and advice as well
as instructional text and video tutorials to guide you through the installation
process.


Installing Drupal and the Drupal Toolkit
----------------------------------------
Drupal is easy to install. There is a lot of documentation available online
and a very detailed installation guide at:
http://drupal.org/getting-started/install

 1. Navigate to: http://drupal.org/project/drupal

 2. Download the current recommended release for Drupal 6

    Scroll down the page to the releases. At the time of this writing, the
    current release is Drupal 6.15. To download, click the "Download" link for
    that row.

 4. Extract the archive to a directory accessible to the web server

    Use an appropriate file archiver to extract the file, depending on your
    operating system:
      - On Windows, use 7-Zip (http://www.7-zip.org) by right-clicking the file
        and selecting "7-Zip" > "Extract Here"
      - On Linux and Mac OS, use tar and gzip combined as follows:
            tar -zxvpf FILENAME

    If using XAMPP as described above, it is located as follows:
      - On Windows: C:\xampp\htdocs
      - On Linux: /opt/lampp/htdocs
      - On Mac OS: /Applications/XAMPP/htdocs

    NOTE: There is a directory within the archive that contains all the Drupal
    files. If you simply extract the archive to the web server root, you will
    have to access Drupal by that directory. For example, simply extracting
    results in this:
        C:\xampp\htdocs\drupal-6.15\index.php

    With this, Drupal would be accessed as follows:
        http://localhost/drupal-6.15/node/123

    Depending on your site, it may be better to extract the contents on the
    "drupal" folder within the archive to the root of the web server, resulting
    in this:
        C:\xampp\htdocs\index.php

    With this, Drupal would be accessed directly:
        http://localhost/node/123

    The rest of this documentation assumes that you have extracted a directory
    named "drupal" on the web server root. However, unless you have other uses
    for the web server on your computer, you may want to choose the second
    method.

 5. Rename the extracted folder to "drupal", if applicable

    This is somewhat optional. The extracted folder will usually be in the
    form of: drupal-[version], such as: drupal-6.15. However, this is not
    user-friendly to be accessed from the web browser, so simply "drupal" is
    works fine.

    From this point forward, the folder where Drupal is installed will be
    referred to as [drupal].

 6. Copy the default settings file to create a new settings file

    The default settings file should be located in:
    [drupal]/sites/default/default.settings.php

    Copy this to create:
    [drupal]/sites/default/settings.php

 7. Set up permissions for the files directory and settings file

    Prior to installing Drupal, the "files" directory, and the newly created
    settings file (settings.php) shoudl be set to allow all users to have read
    and write access, so that the web server can modify those files.

    The "files" directory is located at:
        [drupal]/sites/default/files

    The settings file is located at:
        [drupal]/sites/default/settings.php

    For security, after the Drupal installation is complete, the settings file
    should be set back to only allow specific users access. However, the "files"
    directory should remain accessible to all users.

    On Windows, file permissions should not be an issue. However, if a warning
    appears during installation, then:
      a) Right-click the settings.php and select to edit it’s properties
      b) In the file properties window, select the "Sharing" tab (this may
         be somewhat different depending on the version of Windows)
      c) Give all users access to the file

    On Linux and Mac OS, file permissions can be set as follows:
        chmod -R 777 [drupal]/sites/default/files
        chmod 777 [drupal]/sites/default/settings.php

    Afterwards, change the settings file back as follows:
        chmod 644 [drupal]/sites/default/settings.php

 8. Setup Drupal database

    Create a SQL database for Drupal to use. This guide will discuss how to
    setup a MySQL database, although other database servers can be used. For
    more information about Drupal and databases, go to:
    http://drupal.org/getting-started/6/install/create-database

    To create a database, you will need to know the "root" username and
    password from the section called "Installing MySQL".

    When creating databases, remember not to use the same name of an existing
    database.

    If using XAMPP, there is a popular tool called phpMyAdmin which makes it
    easier to create and browse the Drupal  database right from your web
    browser.

    To access phpMyAdmin from the XAMPP control within the web browser:
      - Navigate to: http://localhost/xampp
      - In the "Tools" section on the left sidebar, click "phpMyAdmin"

    If this is not available, try navigating directly to:
      http://localhost/phpmyadmin

    From phpMyAdmin, follow these instructions:
      a) If necessary, enter the "root" username and password to access the
         server adminstration page
      b) In a section called "MySQL localhost", type the name of the database
         in a box labeled "Create new database"
           - The recommended name is "drupal" (without quotes)

    If not using phpMyAdmin, you will need to create a new database from the
    MySQL server prompt. To do so, open up a command line/prompt or terminal
    and navigate to the MySQL "bin" directory:
      - Linux: /opt/lampp/mysql/bin
      - Windows: C:\xampp\mysql\bin
      - Mac OS: /Applications/XAMPP/mysql/bin

    Follow these directions to access the MySQL prompt and create a new
    database with the user "root" having access to it. Replace the name ROOT
    and PASSWORD with the appropriate root user and password.
      a) From within the MySQL "bin" directory, type the following into the
         command line/prompt or terminal:
            mysql -u ROOT -p
      b) The program will request a password, if there is none, then click enter
         otherwise enter the PASSWORD and if done correctly, the system should
         be within the MysQL prompt, identified by:
            mysql>
     c) Enter the following command, replacing the word DATABASENAME by the
        actual name for the database you will create, such as "drupal":
            CREATE DATABASE DATABASENAME;
        For example:
            CREATE DATABASE drupal;
     d) Grant permission to the "root" user to access this database by the
        following command, replacing the words DATABASENAME, ROOT, and PASSWORD
        appropriately:
            GRANT ALL ON DATABASENAME.* TO 'ROOT'@'localhost' IDENTIFIED BY 'PASSWORD';
        For example:
            GRANT ALL ON drupal.* TO 'root'@'localhost' IDENTIFIED BY 'secr3t';
     e) Flush all priviledges to make this change effective by entering the
        following command, with no replacements:
            FLUSH PRIVILEGES;
     f) Exit the MySQL prompt by entering this command:
            quit
     g) Exit the system command line/prompt or terminal

 9. Navigate to: http://localhost/drupal/install.php

    REMEMBER: This location may differ based on the directory where the contents
    of the Drupal installation was extracted. If the contents, and not the
    "drupal" folder, were extracted to the web server root, the path to
    navigate to would be: http://localhost/install.php

10. Run the Drupal installation process

    This form requires entering the name of the Drupal database created and
    the "root" username and password that was granted access to the database.

11. Setup and configure Drupal

    This form involves setting up site information and creating the first
    "root" user for Drupal. This user will have all priviledges within the
    Durpal site, so make sure the password given to the user is secure.

    In the rest of this documentation we will refer to this root Drupal user
    with the username "root" and the password "secr3t" (although this is not
    secure at all). Replace these with whatever username and password you set
    on this form.

    Submit the form. Once submitted, Drupal is set up. Continue to install the
    Drupal Toolkit.

12. Navigate to: http://drupal.org/project/xc

13. Download the current recommended release for the Drupal Toolkit

    Read the section entitled "Getting the Drupal Toolkit" that is written
    earlier in this document for more information on downloading and extracting
    the Drupal Toolkit modules.

    The location to extract them to is:
        [drupal]/sites/all/modules

    Extract the "xc" directory within the archive, such that a the following
    exists:
        [drupal]/sites/all/modules/xc

    If directories, such as "all" or "modules" do not already exist, create
    them.

14. Navigate to the Drupal module configuration page

    If CleanURLs is enabled, it should be directly accessible by:
        http://localhost/drupal/admin/build/modules

    Otherwise, use the query string format:
        http://localhost/drupal/index.php?q=admin/build/modules

    An alternative method would be to navigate to the module configuration
    page from the menu system by:
      a) Clicking "Administer"
      b) Clicking "Site building"
      c) Clicking "Modules"

    REMEMBER: The location may differ based on the directory where the contents
    of the Drupal installation was extracted. If the contents, and not the
    "drupal" folder, were extracted to the web server root, replace
    "localhost/drupal" with simply "localhost".

15. Install Drupal Toolkit modules
      a) Scroll down the page module configuration page to the sub-section for
         "eXtensible Catalog System"
      b) Select all desired modules (note that all modules can be installed at
         once, if desired, but the process may take longer)
      c) Click the submit button entitled "Save configuration" at the bottom
         of the form

    NOTE: After submitting the form, Drupal may recognize that some modules
    need to be "installed" or "enabled" in a certain order. If you see a
    confirmation form with the words similar to "X module must be
    installed/enabled for Y module", then click to continue and allow that
    required module to be installed or enabled.


More Information
----------------
For more information about installing the Drupal Toolkit, contact one of the
developers through Drupal or at the eXensible Catalog website:
http://www.extensiblecatalog.org


Appreciation
------------
Thanks for downloading and testing the Drupal Toolkit. Please remember that it
is still in early development and is NOT suitable for production environments.

