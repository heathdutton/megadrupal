<?xml version="1.0"?>

<table name="xc_search_display_template">
	<row>
		<template_id>1</template_id>
		<metadata_schema>xc</metadata_schema>
		<entity_type>work</entity_type>
		<display_type>title</display_type>
		<template>&lt;?php if ($element['title']) { ?&gt;
&lt;div class="xc-title"&gt;
  &lt;strong&gt;&lt;?php echo l($element['title'], $xc_record['full_display_link']); ?&gt;&lt;/strong&gt;
&lt;/div&gt;
&lt;?php } ?&gt;

&lt;?php if ($element['creator']) { ?&gt;
&lt;div class="xc-creator"&gt;
  by &lt;?php echo $element['creator'] ?&gt;
&lt;/div&gt;
&lt;?php } ?&gt;</template>
		<highlighter_id>1</highlighter_id>
	</row>
	<row>
		<template_id>2</template_id>
		<metadata_schema>xc</metadata_schema>
		<entity_type>work</entity_type>
		<display_type>snippet</display_type>
		<template>&lt;?php if (isset($element['citation'])): ?&gt;
&lt;div class="xc-citation"&gt;
  citation: &lt;?php echo $element['citation'] ?&gt;
&lt;/div&gt;
&lt;?php endif ?&gt;

&lt;?php if (isset($element['date'])): ?&gt;
&lt;div class="xc-date"&gt;
  date: &lt;?php echo $element['date'] ?&gt;
&lt;/div&gt;
&lt;?php endif ?&gt;

&lt;?php if (isset($element['format'])): ?&gt;
&lt;div class="xc-format"&gt;
  format: &lt;?php echo $element['format'] ?&gt;
&lt;/div&gt;
&lt;?php endif ?&gt;

&lt;?php if (isset($element['abstract'])): ?&gt;
&lt;div class="xc-abstract"&gt;
  abstract: &lt;?php echo $element['abstract'] ?&gt;
&lt;/div&gt;
&lt;?php endif ?&gt;

&lt;div class="xc-frbr-navigation"&gt;
see it's &lt;?php print
  l(format_plural(count($frbr['expressions']), 'expression', '@count expressions'),
    'xc/search/xc__workExpressed_t:"' . $xc_record['id'] . '"',
    array('absolute' =&gt; TRUE, 'query' =&gt; 'search_type=uplink')); ?&gt;
&lt;/div&gt;

&lt;div class="xc-debug-info"&gt;
FRBR level: work
 - [&lt;?php echo $xc_record['schema_record_link']; ?&gt;]
 - [&lt;?php echo $xc_record['remote_xml_link']; ?&gt;]
&lt;?php if (!empty($xc_record['oclc_urls'])) {
  echo ' - [&lt;a href="' . join('"&gt;oclc&lt;/a&gt;] [&lt;a href="', $xc_record['oclc_urls']) . '"&gt;oclc&lt;/a&gt;]';
} ?&gt;
&lt;/div&gt;
</template>
		<highlighter_id>1</highlighter_id>
	</row>
	<row>
		<template_id>3</template_id>
		<metadata_schema>xc</metadata_schema>
		<entity_type>expression</entity_type>
		<display_type>title</display_type>
		<template>&lt;?php if ($frbr['type'] == 'e-m') {
  if ($frbr['manifestations'][0]['element']['title']) { ?&gt;
&lt;div class="xc-title"&gt;
  &lt;?php $title = $frbr['manifestations'][0]['element']['title'];
    if (is_array($title)) { $title = join(' &amp;mdash; ', $title); }
  ?&gt;
  &lt;strong&gt;&lt;?php echo l($title, $xc_record['full_display_link'], array('html' =&gt; TRUE)); ?&gt;&lt;/strong&gt;
&lt;/div&gt;
&lt;?php
  }
}
else {
  if ($element['title']) { ?&gt;
&lt;div class="xc-title"&gt;
  &lt;strong&gt;&lt;?php echo l($element['title'], $xc_record['full_display_link']); ?&gt;&lt;/strong&gt;
&lt;/div&gt;
&lt;?php }
} ?&gt;
&lt;?php if ($element['creator']) { ?&gt;
&lt;div class="xc-creator"&gt;
  by &lt;?php echo $element['creator'] ?&gt;
&lt;/div&gt;
&lt;?php
}
elseif ($frbr['works'][0]['element']['creator']) { ?&gt;
&lt;div class="xc-creator"&gt;
  by &lt;?php echo $frbr['works'][0]['element']['creator'] ?&gt;
&lt;/div&gt;
&lt;?php } ?&gt;


&lt;?php if ($element['contributor']) { ?&gt;
&lt;div class="xc-contributor"&gt;
  &lt;?php if (is_array($element['contributor'])) {
    echo 'contributors: ', join(' &amp;mdash; ', $element['contributor']);
  }
  else {
    echo 'contributor: ', $element['contributor'];
  } ?&gt;
&lt;/div&gt;
&lt;?php }?&gt;</template>
		<highlighter_id>1</highlighter_id>
	</row>
	<row>
		<template_id>4</template_id>
		<metadata_schema>xc</metadata_schema>
		<entity_type>expression</entity_type>
		<display_type>snippet</display_type>
		<template>&lt;?php if (isset($element['citation'])): ?&gt;
&lt;div class="xc-citation"&gt;
  citation: &lt;?php echo $element['citation'] ?&gt;
&lt;/div&gt;
&lt;?php endif ?&gt;

&lt;?php if (isset($element['date'])): ?&gt;
&lt;div class="xc-date"&gt;
  date: &lt;?php echo $element['date'] ?&gt;
&lt;/div&gt;
&lt;?php endif ?&gt;

&lt;?php if ($frbr['type'] == 'e-m+'):
  if (isset($element['format'])): ?&gt;
&lt;div class="xc-format"&gt;
    format: &lt;?php echo $element['format'] ?&gt;
&lt;/div&gt;
&lt;?php
  endif;
else: // type == 'e-m'
  if (isset($frbr['manifestations'][0]['element']['format'])): ?&gt;
&lt;div class="xc-format"&gt;
    format: &lt;?php echo $frbr['manifestations'][0]['element']['format'] ?&gt;
&lt;/div&gt;
&lt;?php
  endif;
endif;
?&gt;

&lt;?php if (isset($element['abstract'])): ?&gt;
&lt;div class="xc-abstract"&gt;
  abstract: &lt;?php echo $element['abstract'] ?&gt;
&lt;/div&gt;
&lt;?php endif ?&gt;

&lt;div class="xc-frbr-navigation"&gt;
see the expressed
&lt;?php echo l(format_plural(count($frbr['works']), 'work', '@count works'),
  'xc/search/id:("' . join('" OR "', $xc_record['xc:workExpressed']) . '")',
  array('absolute' =&gt; TRUE, 'query' =&gt; 'search_type=uplink'));?&gt;
, and its
&lt;?php echo l(format_plural(count($frbr['manifestations']), 'manifestation', '@count manifestations'),
  'xc/search/xc__expressionManifested_t:"' . $xc_record['id'] . '"',
  array('absolute' =&gt; TRUE, 'query' =&gt; 'search_type=uplink'));?&gt;
!
&lt;/div&gt;

&lt;div class="debugInfo"&gt;
FRBR level: expression
 - [&lt;?php echo $xc_record['schema_record_link']; ?&gt;]
 - [&lt;?php echo $xc_record['remote_xml_link']; ?&gt;]

&lt;?php if (!empty($xc_record['oclc_urls'])) {
  echo ' - [&lt;a href="' . join('"&gt;oclc&lt;/a&gt;] [&lt;a href="', $xc_record['oclc_urls']) . '"&gt;oclc&lt;/a&gt;]';
} ?&gt;
&lt;/div&gt;
</template>
		<highlighter_id>1</highlighter_id>
	</row>
	<row>
		<template_id>5</template_id>
		<metadata_schema>xc</metadata_schema>
		<entity_type>manifestation</entity_type>
		<display_type>title</display_type>
		<template>&lt;?php if ($element['title']) { ?&gt;
&lt;div class="xc-title"&gt;
  &lt;?php $title = $element['title'];
  if (is_array($title)) { $title = join(' &amp;mdash; ', $title); }
  ?&gt;
  &lt;strong&gt;&lt;?php echo l($title, $xc_record['full_display_url'], array('html' =&gt; TRUE, 'absolute' =&gt; TRUE)); ?&gt;&lt;/strong&gt;
&lt;/div&gt;
&lt;?php } ?&gt;

&lt;?php if ($element['creator']) { ?&gt;
&lt;div class="xc-creator"&gt;
  by &lt;?php echo xc_util_conditional_join(' &amp;mdash; ', $element['creator']) ?&gt;
&lt;/div&gt;
&lt;?php }
elseif ($frbr['expressions'][0]['element']['creator']) { ?&gt;
&lt;div class="xc-creator"&gt;
  by &lt;?php echo $frbr['expressions'][0]['element']['creator'] ?&gt;
&lt;/div&gt;
&lt;?php }
elseif ($frbr['works'][0]['element']['creator']) { ?&gt;
&lt;div class="xc-creator"&gt;
  by &lt;?php echo $frbr['works'][0]['element']['creator'] ?&gt;
&lt;/div&gt;
&lt;?php } ?&gt;</template>
		<highlighter_id>1</highlighter_id>
	</row>
	<row>
		<template_id>6</template_id>
		<metadata_schema>xc</metadata_schema>
		<entity_type>manifestation</entity_type>
		<display_type>snippet</display_type>
		<template>&lt;table width="100%" class="xc-snippet"&gt;
&lt;?php if (isset($element['citation'])):?&gt;
&lt;tr class="xc-citation"&gt;
  &lt;td width="20%"&gt;citation:&lt;/td&gt;
  &lt;td&gt;&lt;?php echo $element['citation'] ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endif ?&gt;

&lt;?php if (isset($element['publisher'])): ?&gt;
&lt;tr class="xc-date"&gt;
  &lt;td width="20%"&gt;published:&lt;/td&gt;
  &lt;td&gt;&lt;?php
    if (is_array($element['publisher'])) {
        echo join(', ', $element['publisher']);
    }
    else {
      echo $element['publisher'];
    }
    if (isset($xc_record['dcterms:issued'])) {
      echo ' ';
      if (is_array($xc_record['dcterms:issued'])) {
        echo join(', ', $xc_record['dcterms:issued']);
      }
      else {
        echo $xc_record['dcterms:issued'];
      }
    }
    if (isset($xc_record['dcterms:extent'])) {
      echo ' ';
      echo $xc_record['dcterms:extent'];
    }?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endif ?&gt;

&lt;?php if (isset($element['date'])): ?&gt;
&lt;tr class="xc-date"&gt;
  &lt;td width="20%"&gt;date:&lt;/td&gt;
  &lt;td&gt;&lt;?php echo $element['date'] ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endif ?&gt;

&lt;?php if (isset($element['format'])): ?&gt;
&lt;tr class="xc-format"&gt;
  &lt;td width="20%"&gt;format:&lt;/td&gt;
  &lt;td&gt;&lt;?php echo xc_util_conditional_join(', ', $element['format']); ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endif ?&gt;

&lt;?php if (isset($element['abstract'])): ?&gt;
&lt;tr class="xc-abstract"&gt;
  &lt;td width="20%"&gt;abstract:&lt;/td&gt;
  &lt;td&gt;&lt;?php echo $element['abstract'] ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endif ?&gt;

&lt;tr class="xc-availability"&gt;
  &lt;td width="20%"&gt;Availability:&lt;/td&gt;
  &lt;td id="xc-availability-&lt;?php echo $xc_record['node_id'] ?&gt;"&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;

&lt;div class="xc-frbr-navigation"&gt;
see it's &lt;?php echo
  l(format_plural(count($xc_record['xc:expressionManifested']), 'expression', '@count expressions'),
    'xc/search/id:' . '("' . join('" OR "', $xc_record['xc:expressionManifested']) . '")',
    array('absolute' =&gt; TRUE, 'query' =&gt; 'search_type=uplink'));?&gt;
!
&lt;/div&gt;

&lt;?php if ($xc_record['admin']['debug_mode'] == TRUE) { ?&gt;
&lt;div class="xc-debug-info"&gt;
FRBR level: manifestation
 - [&lt;?php echo $xc_record['full_display_link']; ?&gt;]
 - [&lt;?php echo $xc_record['schema_record_link']; ?&gt;]
 - [&lt;?php echo $xc_record['remote_xml_link']; ?&gt;]
 - [&lt;?php echo $xc_record['solr_link']; ?&gt;]
 - [&lt;?php echo $xc_record['mlt_link']; ?&gt;]
&lt;?php if (!empty($xc_record['sibling_link'])) { ?&gt;
 - [&lt;?php echo $xc_record['sibling_link']?&gt;]
&lt;?php } ?&gt;
&lt;?php if (!empty($xc_record['oclc_urls'])) {
  echo ' - [&lt;a href="' . join('"&gt;oclc&lt;/a&gt;] [&lt;a href="', $xc_record['oclc_urls']) . '"&gt;oclc&lt;/a&gt;]';
} ?&gt;
&lt;/div&gt;
&lt;?php } // debug ?&gt;</template>
		<highlighter_id>1</highlighter_id>
	</row>
	<row>
		<template_id>7</template_id>
		<metadata_schema>oai_dc</metadata_schema>
		<entity_type>oai_dc</entity_type>
		<display_type>title</display_type>
		<template>&lt;?php
if (isset($xc_record['dc:title'])) {
  echo l($xc_record['dc:title'], $xc_record['full_display_url']);
}
else {
  echo 'no title';
}
?&gt;
</template>
		<highlighter_id>0</highlighter_id>
	</row>
	<row>
		<template_id>8</template_id>
		<metadata_schema>oai_dc</metadata_schema>
		<entity_type>oai_dc</entity_type>
		<display_type>snippet</display_type>
		<template>&lt;?php
if (isset($xc_record['dc:description'])) {
  echo $xc_record['dc:description'];
}
?&gt;
</template>
		<highlighter_id>0</highlighter_id>
	</row>
	<row>
		<template_id>9</template_id>
		<metadata_schema>xc</metadata_schema>
		<entity_type>manifestation</entity_type>
		<display_type>full</display_type>
		<template>&lt;table width="100%"&gt;
&lt;tr valign="top"&gt;
&lt;td&gt;
&lt;table width="100%" class="xc-full"&gt;
&lt;?php if ($element['creator']) { ?&gt;
&lt;tr&gt;
	&lt;td ="xc-label"&gt;Author:&lt;/td&gt;
	&lt;td&gt;&lt;?php echo xc_util_conditional_joined_link(', ', $element['creator'],
  array('rdarole:artist', 'rdarole:author', 'rdarole:compiler', 'rdarole:composer',
  'rdarole:speaker', 'xc:creator', 'dcterms:creator'), array('phrase' =&gt; 1)); ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php } ?&gt;

&lt;?php if (isset($element['publisher'])
          || isset($xc_record['rdvocab:placeOfPublication'])
          || isset($element['date'])): ?&gt;
&lt;tr&gt;
  &lt;td class="xc-label"&gt;Publisher:&lt;/td&gt;
  &lt;td&gt;&lt;?php
  if (isset($xc_record['rdvocab:placeOfProduction'])) {
    echo xc_util_conditional_join(', ', $xc_record['rdvocab:placeOfProduction']);
  }
  if (isset($element['publisher'])) {
    if (isset($xc_record['rdvocab:placeOfProduction'])) {
      echo ' ';
    }
    echo xc_util_conditional_join(', ', $element['publisher']);
  }
  if (isset($element['publisher']) &amp;&amp; isset($xc_record['dcterms:issued'])) {
    echo ' ';
  }
  if (isset($element['date'])) {
    echo xc_util_conditional_join(', ', $element['date']);
  }
  ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endif ?&gt;

&lt;?php if (isset($element['format']) || isset($xc_record['language'])): ?&gt;
&lt;tr&gt;
	&lt;td class="xc-label"&gt;Edition/Format:&lt;/td&gt;
	&lt;td&gt;
	  &lt;?php
	  if (isset($element['format'])) {
	    echo xc_util_conditional_join(', ', $element['format']);
	  }
	  if (isset($element['format']) &amp;&amp; isset($xc_record['language'])) {
	    echo '; ';
	  }
	  if (isset($element['language'])) {
	    echo xc_util_conditional_join('&amp;mdash;', $element['language']);
	  }
	  if ((isset($element['format']) || isset($element['language']))
	    &amp;&amp; isset($xc_record['rdvocab:editionStatement'])) {
	    echo '; ';
	  }
	  if (isset($xc_record['rdvocab:editionStatement'])) {
	    echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['rdvocab:editionStatement']);
	  }
	  ?&gt;
	&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endif ?&gt;
&lt;/table&gt;

&lt;fieldset class=" collapsible " style="clear:both"&gt;
	&lt;legend&gt;Find a Copy&lt;/legend&gt;
	&lt;table width="100%" class="xc-full"&gt;
&lt;?php if (isset($xc_record['dcterms:identifier'])): ?&gt;
	&lt;tr&gt;
		&lt;td class="xc-label"&gt;Online:&lt;/td&gt;
	  &lt;td&gt;&lt;?php echo xc_util_conditional_joined_link('&lt;br/&gt;', $xc_record['dcterms:identifier'],
	    '', array('external' =&gt; 1, 'regex' =&gt; '/^http/')); ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
&lt;?php endif ?&gt;
	&lt;tr&gt;
		&lt;td class="xc-label"&gt;Delivery Info:&lt;/td&gt;
		&lt;td&gt;..&lt;/td&gt;
	&lt;/tr&gt;
&lt;?php if (isset($xc_record['locations'])): ?&gt;
	&lt;tr valign="top"&gt;
		&lt;td class="xc-label"&gt;Availability:&lt;/td&gt;
	  &lt;td id="xc-availability-' . $node_id . '" valign="top"
	    style="padding: 0; margin: 0;"&gt;
	  &lt;table cellpadding="0" cellspacing="0" border="0" style="margin: 0;"&gt;
	  	&lt;thead&gt;
	  	&lt;tr&gt;
	  		&lt;th&gt;Location&lt;/th&gt;
	  		&lt;th&gt;Call number&lt;/th&gt;
	  		&lt;th&gt;Availability&lt;/th&gt;
	  	&lt;/tr&gt;
	  	&lt;/thead&gt;
	  	&lt;tbody&gt;
	    &lt;?php foreach ($xc_record['locations'] as $lid =&gt; $locations) {?&gt;
	      &lt;?php foreach ($locations as $location) { ?&gt;
	      	&lt;tr valign="top"&gt;
	      		&lt;td style="padding: 0 0 0 0"&gt;&lt;?php echo $location['location']; ?&gt;&lt;/td&gt;
	      		&lt;td style="padding: 0 0 0 0"&gt;&lt;?php echo $location['call_number']; ?&gt;&lt;/td&gt;
	      		&lt;td style="padding: 0 0 0 0"&gt;&lt;?php echo $location['availability']; ?&gt;&lt;/td&gt;
	      	&lt;/tr&gt;
	      &lt;?php }} ?&gt;
	      &lt;/tbody&gt;
	  &lt;/table&gt;
	  &lt;/td&gt;
	&lt;/tr&gt;
&lt;?php endif ?&gt;
	&lt;/table&gt;
&lt;/fieldset&gt;

&lt;/td&gt;
&lt;td width="10%"&gt;&lt;div id="coverart-&lt;?php echo $xc_record['node_id']; ?&gt;" style="float: right"&gt;
&lt;?php if (isset($xc_record['image_url_large'])) { ?&gt;
	&lt;a href="&lt;?php echo $xc_record['image_url_large'] ?&gt;" rel="lightbox"
	  title="&lt;?php
	  if (isset($element['title'])) {
	    echo $element['title'];
	  }
	  if (isset($element['creator'])) {
      echo ' by ' . $element['creator'];
	  }
?&gt;"&gt;
		&lt;img src="&lt;?php echo $xc_record['image_url_medium']; ?&gt;"/&gt;
	&lt;/a&gt;
&lt;?php
}
else { ?&gt;
	&lt;img src="&lt;?php echo $xc_record['image_url_medium']; ?&gt;"/&gt;
&lt;?php } ?&gt;
&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;

&lt;fieldset class=" collapsible"&gt;
	&lt;legend&gt;Details&lt;/legend&gt;
	&lt;table width="100%" class="xc-full"&gt;
&lt;?php if (isset($xc_record['genre'])):?&gt;
	&lt;tr&gt;
		&lt;td class="xc-label"&gt;Genre/Form:&lt;/td&gt;
		&lt;td&gt;&lt;?php echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['genre']); ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
&lt;?php endif; ?&gt;


&lt;?php if (isset($xc_record['rdvocab:natureOfContent'])):?&gt;
	&lt;tr&gt;
		&lt;td class="xc-label"&gt;Material Type:&lt;/td&gt;
		&lt;td&gt;&lt;?php echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['rdvocab:natureOfContent']); ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($element['format'])):?&gt;
	&lt;tr&gt;
		&lt;td class="xc-label"&gt;Document Type:&lt;/td&gt;
		&lt;td&gt;&lt;?php echo xc_util_conditional_join(' &amp;mdash; ', $element['format']);?&gt;&lt;/td&gt;
	&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($element['creator']) || isset($element['contributor'])):?&gt;
	&lt;tr&gt;
		&lt;td class="xc-label"&gt;All Authors/Contributors:&lt;/td&gt;
		&lt;td&gt;&lt;?php
		  if (isset($element['creator'])) {
		    echo xc_util_conditional_joined_link(' &amp;mdash; ', $element['creator'],
		      array('rdarole:artist', 'rdarole:author', 'rdarole:compiler',
		      'rdarole:composer', 'rdarole:speaker', 'xc:creator', 'dcterms:creator'));
		  }
		  if (isset($element['creator']) &amp;&amp; isset($element['contributor'])) {
		    echo '&lt;br/&gt;';
		  }
		  if (isset($element['contributor'])) {
		    $contributors = array('rdarole:director' =&gt; 'director',
		    'rdarole:editor' =&gt; 'editor', 'rdarole:illustrator' =&gt; 'illustrator',
		    'rdarole:performer' =&gt; 'performer', 'rdarole:producer' =&gt; 'producer',
		    'rdarole:translator' =&gt; 'translator', 'xc:contributor' =&gt; 'contributor',
		    'dcterm:contributor' =&gt; 'contributor');
		    $links = array();
		    foreach ($contributors as $contibutor =&gt; $label) {
  		    if (isset($xc_record[$contibutor])) {
  		      $links[] = xc_util_conditional_joined_link(', ', $xc_record[$contibutor], $contibutor)
  		               . ' ('. $label . ')';
  		    }
		    }
		    echo join(' &amp;mdash ', $links);
		    /*
		    echo xc_util_conditional_joined_link(' &amp;mdash; ', $element['contributor'],
		    array('rdarole:director', 'rdarole:editor', 'rdarole:illustrator',
		    'rdarole:performer', 'rdarole:producer', 'rdarole:translator'));
		    */
		  } ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($xc_record['xc:thesisAdvisor'])):?&gt;
	&lt;tr&gt;
		&lt;td class="xc-label"&gt;Thesis Advisor:&lt;/td&gt;
		&lt;td&gt;&lt;?php echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['xc:thesisAdvisor']); ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($xc_record['dcterms:identifier_ISBN'])):?&gt;
	&lt;tr&gt;
		&lt;td class="xc-label"&gt;ISBN:&lt;/td&gt;
		&lt;td&gt;&lt;?php echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['dcterms:identifier_ISBN']); ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($xc_record['dcterms:identifier_ISSN'])):?&gt;
	&lt;tr&gt;
		&lt;td class="xc-label"&gt;ISSN:&lt;/td&gt;
		&lt;td&gt;&lt;?php echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['dcterms:identifier_ISSN']); ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($xc_record['xc:recordID_OCoLC'])):?&gt;
	&lt;tr&gt;
		&lt;td class="xc-label"&gt;OCLC:&lt;/td&gt;
		&lt;td&gt;&lt;?php echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['xc:recordID_OCoLC']); ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($xc_record['rdvocab:dissertationOrThesesInformation'])
       || isset($xc_record['dcterms:description'])):?&gt;
	&lt;tr&gt;
		&lt;td class="xc-label"&gt;Notes:&lt;/td&gt;
		&lt;td&gt;&lt;?php
		  if (isset($xc_record['rdvocab:dissertationOrThesesInformation'])) {
        echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['xc:recordID_OCoLC']);
		  }
		  if (isset($xc_record['rdvocab:dissertationOrThesesInformation'])
		  &amp;&amp; isset($xc_record['dcterms:description'])) {
		    echo ' &amp;mdash; ';
		  }
		  if (isset($xc_record['dcterms:description'])) {
		    echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['dcterms:description']);
		  }
		  ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($xc_record['dcterms:audience'])):?&gt;
	&lt;tr&gt;
		&lt;td class="xc-label"&gt;Target Audience:&lt;/td&gt;
		&lt;td&gt;&lt;?php echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['dcterms:audience']);?&gt;&lt;/td&gt;
	&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($xc_record['dcterms:extent'])
       || isset($xc_record['dcterms:otherPhisicalDetails'])
       || isset($xc_record['drvocab:dimensions'])):?&gt;
&lt;tr&gt;
	&lt;td class="xc-label"&gt;Description:&lt;/td&gt;
	&lt;td&gt;&lt;?php
      if (isset($xc_record['dcterms:extent'])) {
        echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['dcterms:extent']);
      }
      if (isset($xc_record['dcterms:otherPhisicalDetails'])) {
        echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['dcterms:otherPhisicalDetails']);
      }
      if (isset($xc_record['drvocab:dimensions'])) {
        echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['drvocab:dimensions']);
      }

    ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($xc_record['dcterms:requires'])):?&gt;
&lt;tr&gt;
  &lt;td class="xc-label"&gt;Details:&lt;/td&gt;
  &lt;td&gt;&lt;?php echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['dcterms:requires']);?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($xc_record['dcterms:tableOfContents'])):?&gt;
&lt;tr&gt;
  &lt;td class="xc-label"&gt;Contents:&lt;/td&gt;
  &lt;td&gt;&lt;?php echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['dcterms:tableOfContents']);?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($xc_record['rdvocab:titleOfWork'])):?&gt;
&lt;tr&gt;
  &lt;td class="xc-label"&gt;Other titles:&lt;/td&gt;
  &lt;td&gt;&lt;?php echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['rdvocab:titleOfWork']);?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($xc_record['rdvocab:statementOfResponsibilityRelatingToTitle'])):?&gt;
&lt;tr&gt;
  &lt;td class="xc-label"&gt;Responsibility:&lt;/td&gt;
  &lt;td&gt;&lt;?php echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['rdvocab:statementOfResponsibilityRelatingToTitle']);?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($xc_record['xc:isPartOf']) || isset($xc_record['dcterms:isPartOf'])):?&gt;
&lt;tr&gt;
  &lt;td class="xc-label"&gt;Series Title:&lt;/td&gt;
  &lt;td&gt;&lt;?php
  if (isset($xc_record['xc:isPartOf'])) {
    echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['xc:isPartOf']);
  }
  if (isset($xc_record['dcterms:isPartOf'])) {
    echo xc_util_conditional_join(' &amp;mdash; ', $xc_record['dcterms:isPartOf']);
  }
  ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($element['abstract'])): ?&gt;
&lt;tr&gt;
  &lt;td class="xc-label"&gt;Abstract:&lt;/td&gt;
  &lt;td&gt;&lt;?php echo $element['abstract'] ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endif ?&gt;
	&lt;/table&gt;
&lt;/fieldset&gt;

&lt;fieldset class=" collapsible"&gt;
  &lt;legend&gt;Reviews&lt;/legend&gt;
  &lt;div&gt;
  &lt;?php echo xc_util_conditional_join('&lt;br/&gt;', $xc_record['summary']); ?&gt;
  &lt;/div&gt;
&lt;/fieldset&gt;

&lt;fieldset class=" collapsible"&gt;
  &lt;legend&gt;Similar items&lt;/legend&gt;
  &lt;table width="100%" class="xc-full"&gt;

&lt;?php if (isset($xc_record['xc:subject'])
       || isset($xc_record['dcterms:subject'])
       || isset($xc_record['xc:spatial'])
       || isset($xc_record['dcterms:spatial'])
       || isset($xc_record['xc:temporal'])
       || isset($xc_record['dcterms:temporal'])
       || isset($xc_record['dcterms:coverage'])
       ):?&gt;
&lt;tr&gt;
  &lt;td class="xc-label"&gt;Related Subjects:&lt;/td&gt;
  &lt;td&gt;&lt;?php
  if (isset($xc_record['xc:subject']) || isset($xc_record['dcterms:subject'])) {
    echo '&lt;em&gt;subject&lt;/em&gt;' . '&lt;br/&gt;';
  }
  if (isset($xc_record['xc:subject'])) {
    echo xc_util_conditional_joined_link('&lt;br/&gt;', $xc_record['xc:subject'], 'xc:subject') . '&lt;br/&gt;';
  }
  if (isset($xc_record['dcterms:subject'])) {
    echo xc_util_conditional_joined_link('&lt;br/&gt;', $xc_record['dcterms:subject'], 'dcterms:subject') . '&lt;br/&gt;';
  }

  if (isset($xc_record['xc:spatial']) || isset($xc_record['dcterms:spatial'])) {
    echo '&lt;em&gt;spatial&lt;/em&gt;';
  }
  if (isset($xc_record['xc:spatial'])) {
    echo '&lt;br/&gt;';
    echo xc_util_conditional_joined_link('&lt;br/&gt;', $xc_record['xc:spatial'], 'xc:spatial');
  }
  if (isset($xc_record['dcterms:spatial'])) {
    echo '&lt;br/&gt;';
    echo xc_util_conditional_joined_link('&lt;br/&gt;', $xc_record['dcterms:spatial'], 'dcterms:spatial');
  }

  if (isset($xc_record['xc:temporal']) || isset($xc_record['dcterms:temporal'])) {
    echo '&lt;br/&gt;';
    echo '&lt;em&gt;temporal&lt;/em&gt;';
  }
  if (isset($xc_record['xc:temporal'])) {
    echo '&lt;br/&gt;';
    echo xc_util_conditional_joined_link('&lt;br/&gt;', $xc_record['xc:temporal'], 'xc:temporal');
  }
  if (isset($xc_record['dcterms:temporal'])) {
    echo '&lt;br/&gt;';
    echo xc_util_conditional_joined_link('&lt;br/&gt;', $xc_record['dcterms:temporal'], 'dcterms:temporal') . '&lt;br/&gt;';
  }

  if (isset($xc_record['dcterms:coverage'])) {
    echo '&lt;br/&gt;';
    echo '&lt;em&gt;coverage&lt;/em&gt;' . '&lt;br/&gt;';
    echo xc_util_conditional_joined_link('&lt;br/&gt;', $xc_record['dcterms:coverage'], 'dcterms:coverage') . '&lt;br/&gt;';
  }
  ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($xc_record['xc:relation'])
       || isset($xc_record['dcterms:relation'])
       ):?&gt;
&lt;tr&gt;
  &lt;td class="xc-label"&gt;Related Resources:&lt;/td&gt;
  &lt;td&gt;&lt;?php
  if (isset($xc_record['xc:relation'])) {
    echo xc_util_conditional_joined_link('&lt;br/&gt;', $xc_record['xc:relation'], '') . '&lt;br/&gt;';
  }
  if (isset($xc_record['dcterms:relation'])) {
    echo xc_util_conditional_joined_link('&lt;br/&gt;', $xc_record['dcterms:relation'], '') . '&lt;br/&gt;';
  }
  ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endif; ?&gt;

&lt;?php if (isset($xc_record['mlt'])):?&gt;
&lt;tr&gt;
  &lt;td class="xc-label"&gt;Browse similar items:&lt;/td&gt;
  &lt;td&gt;
&lt;table width="100%"&gt;
&lt;?php foreach ($xc_record['mlt'] as $mlt) { ?&gt;
&lt;tr valign="top"&gt;
&lt;td id="coverart-&lt;?php echo $mlt['xc_record']['node_id']; ?&gt;" width="10%" align="right"&gt;
&lt;?php if (isset($mlt['image_url']) &amp;&amp; $mlt['image_url'] != ''): ?&gt;
	&lt;img src="&lt;?php echo $mlt['image_url']; ?&gt;"/&gt;
&lt;?php endif; ?&gt;
&lt;/td&gt;
&lt;td&gt;&lt;?php
    if (isset($mlt['element']['title'])) {
      echo l(
        '&lt;em&gt;' . xc_util_conditional_join(' &amp;mdash; ', $mlt['element']['title']) . '&lt;/em&gt;',
        xc_search_get_full_display_path($mlt['xc_record']),
        array('html' =&gt; TRUE)
      );
      if (isset($mlt['element']['creator'])) {
        echo '&lt;br/&gt;';
      }
    }
    if (isset($mlt['element']['creator'])) {
      echo 'by ' . xc_util_conditional_join(' &amp;mdash; ', $mlt['element']['creator']) ;
    }
    ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php } // foreach mlt ?&gt;
&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endif; // if mlt?&gt;

&lt;/table&gt;
&lt;/fieldset&gt;

&lt;?php $processed_fields = array('id', 'node_id', 'timestamp', 'type', 'node_type',
'processed', 'metadata_id', 'metadata_type', 'syndetics_ids', 'image_url',
'dcterms:tableOfContents',
'rdvocab:titleOfWork', 'dcterms:description', 'xc:relation', 'dcterms:relation',
'rdvocab:placeOfPublication', 'xc:workExpressed', 'xc:expressionManifested',
'xc:recordID_OCoLC', 'dcterms:extent', 'mlt', 'xc:subject', 'dcterms:subject',
'rdvocab:natureOfContent', 'dcterms:identifier_ISBN', 'summary', 'language',
'xc:isPartOf', 'dcterms:isPartOf', 'rdvocab:placeOfProduction',
'dcterms:identifier', 'rdvocab:editionStatement',
// display template elements
'dcterms:language', // language

// special fields
'image_url_large', 'image_url_medium', 'status', 'serialized_tsn',
// facets
'format', 'classification', 'topic', 'date', 'genre', 'subject', 'authors_contributors',
'other_contributors', 'related_resources'
); ?&gt;
&lt;fieldset class=" collapsible"&gt;
  &lt;legend&gt;Other fields&lt;/legend&gt;
  &lt;table width="100%" class="xc-full"&gt;
&lt;?php foreach ($xc_record as $key =&gt; $value) { ?&gt;
  &lt;?php if (!in_array($key, $processed_fields)) { ?&gt;
&lt;tr&gt;
  &lt;td class="xc-label"&gt;&lt;?php echo $key; ?&gt;&lt;/td&gt;
  &lt;td&gt;&lt;?php echo xc_util_conditional_join('&lt;br/&gt;', $value); ?&gt;&lt;/td&gt;
&lt;/tr&gt;
  &lt;?php } ?&gt;
&lt;?php } ?&gt;
  &lt;/table&gt;
&lt;/fieldset&gt;
</template>
		<highlighter_id>0</highlighter_id>
	</row>
</table>
