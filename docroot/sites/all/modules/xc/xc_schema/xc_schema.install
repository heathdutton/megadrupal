<?php
/**
 * @file
 * Installation functions for XC schema module
 *
 * @copyright (c) 2010-2011 eXtensible Catalog Organization
 */

/**
 * Implements hook_instal().
 */
function xc_schema_enable() {
  if (!module_exists('xc_metadata')) {
    drupal_install_modules(array('xc_metadata'));
  }

  // Get Metadata module
  module_load_include('module', 'xc_metadata');

  // Enable metadata schema format
  $formats = xc_schema_xc_format();
  require_once drupal_get_path('module', 'xc_metadata') . '/includes/xc_metadata.format.inc';
  foreach ($formats as $type => $format) {
    xc_format_enable($type);
  }

  // Install any extra schema elements
  $schema = xc_load_schema_by_module('xc_schema');
  xc_install_schema($schema);
}

/**
 * Implements hook_uninstall().
 */
function xc_schema_disable() {
  // Get Metadata module
  module_load_include('module', 'xc_metadata');

  // Disable metadata schema formats
  $formats = xc_schema_xc_format();
  require_once drupal_get_path('module', 'xc_metadata') . '/includes/xc_metadata.format.inc';
  foreach ($formats as $type => $format) {
    xc_format_disable($type);
  }

  // Uninstall any extra schema elements
  $schema = xc_load_schema_by_module('xc_schema');
  xc_uninstall_schema($schema);
}
