<?php

/**
 * @file
 * Add/remove fields for the commerce Pay with a Tweet module.
 *
 * @ingroup commerce_pay_with_a_tweet
 */


/**
 * Implements hook_enable().
 */
function commerce_pay_with_a_tweet_enable() {
  // Add fields on product and product_display.
  commerce_pay_with_a_tweet_add_fields();

  // Fix bug when module is disabled (rules warning message).
  // "1 Rules configuration requires some of the disabled modules
  // to function and cannot be executed any more."
  // Enable and clear cache of rules.
  db_update('rules_config')
    ->fields(array('active' => 1))
    ->condition('name', 'commerce_payment_commerce_pay_with_a_tweet', '=')
    ->execute();
  rules_clear_cache(TRUE);
}

/**
 * Implements hook_disable().
 */
function commerce_pay_with_a_tweet_disable() {
  // Fix bug when module is disabled (rules warning message).
  // "1 Rules configuration requires some of the disabled modules
  // to function and cannot be executed any more."
  // Disable and clear cache of rules.
  db_update('rules_config')
    ->fields(array('active' => 0))
    ->condition('name', 'commerce_payment_commerce_pay_with_a_tweet', '=')
    ->execute();
  rules_clear_cache(TRUE);
}
/**
 * Implements hook_uninstall().
 */
function commerce_pay_with_a_tweet_uninstall() {
  // Delete fields.
  commerce_delete_field('cpwat_tweet_reference');

  // Delete variables.
  variable_del('commerce_pay_with_a_tweet_default_tweet');
}
