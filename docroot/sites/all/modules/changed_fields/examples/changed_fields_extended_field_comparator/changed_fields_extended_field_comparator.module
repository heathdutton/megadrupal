<?php

/**
 * @file
 * changed_fields_extended_field_comparator.module file.
 */

/**
 * Implements hook_node_presave().
 */
function changed_fields_extended_field_comparator_node_presave($node) {
  // Enlist node types with their fields for watching.
  $notifySettings = array(
    'article' => array(
      'title',
      'body',
    ),
  );

  // Create CFNodeSubject object that will check node fields by your ExtendedFieldComparator.
  // See includes/changed_fields_extended_field_comparator.field_comparator.inc file.
  $nodeSubject = new CFNodeSubject($node, $notifySettings, new ExtendedFieldComparator());

  // Add your observer object to CFNodeSubject.
  // See includes/changed_fields_extended_field_comparator.observer.inc file.
  $nodeSubject->addObserver(new ExtendedFieldComparatorObserver('test_observer'));

  // Check if node fields have been changed.
  $nodeSubject->checkNodeFields();
}
