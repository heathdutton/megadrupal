<?php


/**
 * Implements of Drupal's hook_schema().
 * Define some schemas.
 */
function soauth_schema() {
  $schema['soauth_user'] = array(
    'description' => 'Binded users accounts',
    'fields' => array(
      'aid' => array(
        'description' => 'Account ID',
        'type' => 'serial',
        'unsigned' => TRUE,
        'not null' => TRUE,),
      'uid' => array(
        'description' => 'User id that is owner of this account',
        'type' => 'int',
        'unsigned' => TRUE,
        'not null' => TRUE,
        'default' => 0,),
      'app' => array(
        'description' => 'An application name',
        'type' => 'varchar',
        'length' => 32,
        'not null' => TRUE,
        'default' => '',),
      'app_uid' => array(
        'description' => 'External user id',
        'type' => 'varchar',
        'length' => 32,
        'not null' => TRUE,
        'default' => '',),
      'mail' => array(
        'description' => 'User email',
        'type' => 'varchar',
        'length' => 320,),), // Like Drupal's mail, but actual max 254 + 2. See RFC3696
      'foreign keys' => array(
        'owner' => array(
          'table' => 'users',
          'columns' => array('uid' => 'uid'),),),
      'indexes' => array(
        'uid' => array('uid',),
        'app' => array('app', 'app_uid',),
        'mail' => array('mail',),),
      'primary key' => array('aid',),
  );
          
  return $schema;
}
