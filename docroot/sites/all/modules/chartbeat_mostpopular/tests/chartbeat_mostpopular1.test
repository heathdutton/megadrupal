<?php
/**
 * @file
 * Simpletests for the chartbeat_mostpopular module.
 */

/**
 * This class creates tests to test the chartbeat_mostpopular module.
 */
class ChartbeatMostPopularTests1 extends DrupalWebTestCase {
  /**
   * Metadata about our test case.
   */
  public static function getInfo() {
    return array(
      // The human readable name of the test case.
      'name' => 'Enable module and test configuration screen',
      // A short description of the tests this case performs.
      'description' => 'Tests for the chartbeat_mostpopular module.',
      // The group that this case belongs too, used for grouping tests together
      // in the UI.
      'group' => 'Chartbeat Most Popular',
    );
  }

  /**
   * Perform any setup tasks for our test case.
   */
  public function setUp() {
    parent::setUp(array('chartbeat_mostpopular'));
    $web_user = $this->drupalCreateUser(array('administer_chartbeat_mostpopular'));
    $this->drupalLogin($web_user);
  }

  /**
   * This function does most of the testing for Chartbeat Most Popular.
   */
  public function testChartbeatMostPopular() {
    $web_user = $this->drupalCreateUser(array('administer_chartbeat_mostpopular'));
    $this->drupalLogin($web_user);
    debug($web_user);
    // Navigate to /admin/config/services/chartbeat_mostpopular.
    $this->drupalGet('admin/config/services/chartbeat_mostpopular');
    // Verify that the correct text exists on the page.
    $this->assertText('In order to use this module, you need a Chartbeat API key', 'The module has been enabled and the admin screen is present.');
  }


  /**
   * Tears down the Drupal environment created for testing.
   */
  public function tearDown() {
    parent::tearDown();
  }
  
}
