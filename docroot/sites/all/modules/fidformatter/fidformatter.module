<?php

/**
 * @file
 * Provides a field formatter for file/image fields to display the file ID.
 */

/**
 * Implements hook_field_formatter_info().
 */
function fidformatter_field_formatter_info() {
  return array(
    'fid_formatter_fid' => array(
      'label' => t('File ID'),
      'description' => t('Display the File id of the file.'),
      'field types' => array('file', 'image'),
    ),
  );
}

/**
 * Implements hook_field_formatter_view().
 */
function fidformatter_field_formatter_view($entity_type, $entity, $field, $instance, $langcode, $items, $display) {
  $result = array();

  if ($display['type'] == 'fid_formatter_fid') {
    foreach ($items as $delta => $item) {
      $result[$delta] = array('#markup' => check_plain($item['fid']));
    }
  }

  return $result;
}
