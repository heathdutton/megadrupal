<?php

/**
 * @file
 * Installation procedure for Drupal Commerce PayWay2 SOAR payment gateway.
 */

/**
 * Implements hook_requirements().
 */
function commerce_payway2_soar_requirements($phase) {
  $requirements = array();

  if ($phase == 'runtime') {
    $t = get_t();
    $settings = commerce_payway2_soar_getsettings();

    if (!is_array($settings) || empty($settings['merchant_id'])) {
      $requirements['merchant_id'] = array(
        'title' => $t('PayWay2 Merchant ID'),
        'description' => $t('You need to set your Merchant id in order to complete a checkout with PayWay2 SOAR payment method. Click !here to insert your merchant id', array(
          '!here' => l($t('here'), 'admin/commerce/config/payment-methods/manage/commerce_payment_soar'),
        )),
        'severity' => REQUIREMENT_WARNING,
      );

      drupal_set_message($requirements['merchant_id']['description'], 'warning');
    }
  }

  return $requirements;
}
