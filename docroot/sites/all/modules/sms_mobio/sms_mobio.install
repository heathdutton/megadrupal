<?php

/**
 * @file
 * Uninstall functions for the sms_mobio module variables.
 */

/**
 * Implements hook_schema().
 */
function sms_mobio_schema() {
  $schema = array();

  $schema['sms_mobio'] = array(
    'description' => 'Collect valid code data',
    'fields' => array(
      'id' => array(
        'description' => 'The id.',
        'type' => 'serial',
        'size' => 'big',
        'unsigned' => TRUE,
        'not null' => TRUE,
      ),
      'uid' => array(
        'description' => 'User id.',
        'type' => 'int',
        'length' => 10,
      ),
      'sess_id' => array(
        'description' => 'sess_id.',
        'type' => 'varchar',
        'length' => 50,
      ),
      'ip' => array(
        'description' => 'Visitor ip.',
        'type' => 'varchar',
        'length' => 20,
      ),
      'time' => array(
        'description' => 'timestamp',
        'type' => 'varchar',
        'length' => 10,
      ),
      'sms_code' => array(
        'description' => 'Sms code.',
        'type' => 'varchar',
        'length' => 10,
      ),
      'serv_id' => array(
        'description' => 'Service id.',
        'type' => 'int',
        'length' => 10,
      ),
      'rules_used' => array(
        'description' => 'Used by Rules - 0 = FALSE, 1 = TRUE.',
        'type' => 'int',
        'default' => 0,
        'length' => 1,
      ),
    ),
    'primary key' => array('id'),
  );
  return $schema;
}

/**
 * Implements hook_install().
 */
function sms_mobio_install() {
  $services = array('Test sms service');
  $sms_mobio_service = array();
  //your service id on mobio
  $sms_mobio_service['sms_mobio_service_id'] = '123456';
  //internal uri - node/nid or alias
  $sms_mobio_service['sms_mobio_help_page'] = 'help-page';
  $sms_mobio_service['sms_mobio_block_message'] = t('SMS Mobio payment service Message for users.');
  $sms_mobio_service['sms_mobio_service_name'] = $services[0];
  
  variable_set('sms_mobio_services', serialize($services));
  variable_set('sms_mobio_service_0', serialize($sms_mobio_service));
}

/**
 * Implements hook_uninstall().
 */
function sms_mobio_uninstall() {
  db_query('DELETE FROM variable WHERE name LIKE :pattern', array(':pattern' => db_like('sms_mobio_') . '%'));
}
