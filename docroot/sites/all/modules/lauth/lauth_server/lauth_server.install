<?php

function lauth_server_schema() {
  $schema['lauth_server_keys'] = array(
    'fields' => array(
      'key_id' => array(
        'description' => 'The key identifier.',
        'type' => 'char',
        'length' => 26,
        'not null' => TRUE
      ),
      'secret' => array(
        'description' => 'The secret key.',
        'type' => 'char',
        'length' => 52,
        'not null' => TRUE
      ),
      'uid' => array(
        'description' => 'The {users}.uid that owns this key.',
        'type' => 'int',
        'not null' => TRUE,
        'default' => 0,
      ),
      'description' => array(
        'description' => 'A user description for this key.',
        'type' => 'varchar',
        'length' => 255,
        'not null' => TRUE
      ),
    ),
    'primary key' => array('key_id'),
    'indexes' => array(
      'lauth_server_keys_uid' => array('uid'),
    ),
  );
  
  $schema['lauth_keys_roles'] = array(
    'description' => 'Maps keys to roles.',
    'fields' => array(
      'key_id' => array(
        'type' => 'char',
        'length' => 26,
        'not null' => TRUE,
        'description' => 'Primary Key: {lauth_server_keys}.key_id for key.',
      ),
      'rid' => array(
        'type' => 'int',
        'unsigned' => TRUE,
        'not null' => TRUE,
        'default' => 0,
        'description' => 'Primary Key: {role}.rid for role.',
      ),
    ),
    'primary key' => array('key_id', 'rid'),
    'indexes' => array(
      'rid' => array('rid'),
    ),
  );
    
  return $schema;
}
