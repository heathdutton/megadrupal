<?php

/**
 * @file
 * Provides the Activable script.
 */

/**
 * Implements hook_library().
 */
function activable_library() {
  $libraries = array();

  $libraries['activable'] = array(
    'title' => 'Activable',
    'website' => 'https://github.com/louisremi/Activable#activable',
    'version' => '1',
    'js' => array(
      _activable_library_path('js') => array(
        'group' => JS_LIBRARY,
      ),
    ),
    'css' => array(
      _activable_library_path('css') => array(
        'type' => 'file', 
        'media' => 'screen',
      ),
    ),
  );

  return $libraries;
}

/**
 * Gets the path to the jQuery activable library.
 *
 * @return
 *   The path to the activable library js file, or FALSE if not found.
 */
function _activable_library_path($type = 'js') {
  $activable_path = libraries_get_path('activable');
  $result = FALSE;

  if (!empty($activable_path)) {
    if ($type == 'js') {
      // Attempt to use minified version of jQuery activable plugin.
      if (file_exists($activable_path . '/activable.min.js')) {
        $result = $activable_path . '/activable.min.js';
      }
      // Otherwise use non-minified version if available.
      elseif (file_exists($activable_path . '/activable.js')) {
        $result = $activable_path . '/activable.js';
      }
    }
    elseif ($type == 'css') {
      if (file_exists($activable_path . '/activable-bootstrap.css')) {
        $result = $activable_path . '/activable-bootstrap.css';
      }
    }
  }

  return $result;
}
