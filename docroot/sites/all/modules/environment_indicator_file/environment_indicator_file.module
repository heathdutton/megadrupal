<?php

/**
 * Implements hook_environment_indicator_matched_indicator_alter().
 */
function environment_indicator_file_environment_indicator_matched_indicator_alter(&$environment_info) {
  $site = str_replace('sites/', '', conf_path());
  $path = DRUPAL_ROOT;

  if (file_exists($path . '/sites/' . $site . '/version')) {
    $version_file = fopen($path . '/sites/' . $site . '/version', 'r');
    $content = fread($version_file, filesize($path . '/sites/' . $site . '/version'));
    $environment_info['git_branch'] = check_plain($content);
  }
}
