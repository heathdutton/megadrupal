<?php

/**
 * @file
 * Contains basic functions for OpenstackQueues
 */

/**
 * Ensure that php-opencloud library is loaded.
 *
 * @return bool
 *   Returns TRUE if the library is loaded.
 */
function openstack_queues_loaded() {
  $loaded = &drupal_static(__FUNCTION__);
  if ($loaded == FALSE) {
    // Try loading via Composer Manager.
    composer_manager_register_autoloader();
    $loaded = class_exists('\OpenCloud\OpenStack');
  }

  return $loaded;
}

/**
 * Get queue parameters.
 *
 * @param string $name
 *   The name of the queue.
 *
 * @return array
 *   An array of parameters for this queue.
 */
function openstack_queues_get_queue_options($name) {
  if (!isset($options[$name])) {
    $options[$name] = variable_get('openstack_queues_queue_' . $name, array());

    $defaults = variable_get('openstack_queues_default_queue', array());
    $options[$name] += $defaults;
  }

  return $options[$name];
}
