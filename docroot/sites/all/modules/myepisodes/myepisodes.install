<?php

/**
 * @file
 * My Episodes module schema.
 */

/**
 * Implementation of hook_field_schema().
 */
function myepisodes_field_schema($field) {
  return array(
    'columns' => array(
      'uid' => array(
        'type' => 'varchar',
        'length' => 128,
        'not null' => TRUE,
      ),
      'password_hash' => array(
        'type' => 'varchar',
        'length' => 64,
        'not null' => TRUE,
      ),
      'refresh_enabled' => array(
        'type' => 'int',
        'unsigned' => TRUE,
        'not null' => TRUE,
        'default' => 0,
      ),
      'public_display' => array(
        'type' => 'int',
        'unsigned' => TRUE,
        'not null' => TRUE,
        'default' => 0,
      ),
      'last_refresh' => array(
        'type' => 'int',
        'unsigned' => TRUE,
        'not null' => TRUE,
        'default' => 0,
      ),
      'cache_mylist' => array(
        'type' => 'blob',
      ),
    ),
    'indexes' => array(
      'uid_idx' => array('uid'),
      'public_display_idx' => array('public_display'),
    ),
    'unique keys' => array('uid_key' => array('uid')),
  );
}

/**
 * Implements hook_uninstall().
 */
function myepisodes_uninstall() {
  // Ensure constants.
  require_once dirname(__FILE__) . '/myepisodes.module';
  variable_del(MYEPISODES_REFRESH_DELAY_VAR);
}
