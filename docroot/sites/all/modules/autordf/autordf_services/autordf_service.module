<?php

/**
 * Implementation of hook_permission()
 */
function autordf_service_permission() {
	return array(
    'autordf retrieve tags' => array(
      'title' => t('Autordf Service Retrieve tags'),
    ),
    'autordf suggest tags' => array(
      'title' => t('Autordf Service Suggest tags'),
    ),
  );
}
/**
 * Implementation of hook_service()
 */
function autordf_service_service() {
	return array(
    array(
      '#method' => 'autordf.autordf_text',
      '#callback' => 'autordf_service_text',
      '#access arguments' => array('autordf retrieve tags'),
      '#args' => array(
        array(
          '#name' => 'text',
          '#type' => 'string',
          '#description' => t('Text to tag and return back to server'),
        ),
      ),
      '#return' => 'string',
      '#help' => t('This service tag the content back to user'),
    )
  );
}

/**
 * Implementation of hook_services_resources()
 */
function autordf_service_services_resources() {
  return array(
    'autordf' => array(
      'file' => array('type' => 'resource.inc', 'module' => 'autordf_service'),
      'retrieve' => array(
        'callback' => '_autordf_service_terms_retrieve',
        'args' => array(
          array(
            'name' => 'nid',
            'optional' => FALSE,
            'source' => array('path' => 0),
            'type' => 'int',
            'description' => 'The nid to fetch terms from',
          ),
        ),
        'access callback' => 'autordf_service_access',
        'access arguments' => array('retrieve'), 
      ),
      'suggest' => array(
        'callback' => '_autordf_service_terms_suggest',
        'args' => array(
          array(
            'name' => 'nid',
            'optional' => FALSE,
            'source' => array('path' => 0),
            'type' => 'int',
            'description' => '',
          ),
        ),
        'access callback' => 'autordf_service_access',
        'access arguments' => array('suggest'), 
      ),
    ),
  );	
}

function autordf_service_text($text) {
	return $text;
}

function autordf_service_access($args = array()) {
  $op = $args[0];
	return user_access("autordf $op tags");
}