<?php

/**
 * @file
 * The V8 JavaScript Engine Drupal module.
 *
 * @see http://www.php.net/manual/en/book.v8js.php
 */

/**
 * Implements hook_help().
 */
function v8js_help($path, $arg) {
  $output = '';

  switch ($path) {
    case 'admin/help#v8js':
      $output = '<p>' . t('Provides integration with the <a href="@v8">V8 JavaScript Engine</a>.') . '</p>';
      $output .= '<h2>' . t('Example') . '</h2>';

      // Create the JavaScript code.
      $js = <<< EOT
var hi = function() {
  return 'Hello' + ' ' + 'World!';
}
hi();
EOT;
      $output .= '<h4>' . t('Input') . '</h4>';
      $output .= '<code>' . str_replace("\n", '<br />', $js) . '</code>';

      // Execute the code.
      $v8 = new V8Js();
      $result = $v8->executeString($js);

      // Output it to the user.
      $output .= '<h4>' . t('Output') . '</h4>';
      $output .= $result;
  }

  return $output;
}
