<?php
/**
 * @file
 * fancyinput module file
 */

/**
 * Implements hook_init().
 */
function fancyinput_init() {
  // Add the required js and css files
  $fancy_input_path = libraries_get_path('fancyinput');

  if (!empty($fancy_input_path) && !path_is_admin(current_path())) {
    // This is to make sure that the text fields have a wrapper and no
    // unwanted things happen.
    drupal_add_js(<<<FANCYINPUTJSWRAPPER
      // Add a wrapper div around the contact form text-fields
      jQuery('form .form-text').wrap("<div class='form-text-wrapper'></div>");
FANCYINPUTJSWRAPPER
      , array('type' => 'inline', 'scope' => 'footer'));

    drupal_add_js($fancy_input_path . '/fancyInput.js', array('scope' => 'footer'));
    drupal_add_css($fancy_input_path . '/fancyInput.css', array('scope' => 'footer'));
  }

  // If has any selectors.
  $fancyinput_html_selectors = variable_get('fancyinput_html_tags', NULL);
  if (!empty($fancyinput_html_selectors)) {
    // Add them so we can use them.
    drupal_add_js(
      <<<FANCYINPUT
      jQuery('$fancyinput_html_selectors').fancyInput();
FANCYINPUT
    , array('type' => 'inline', 'scope' => 'footer'));
  }
}

/**
 * Implements hook_menu().
 *
*/
function fancyinput_menu() {
  $items['admin/config/user-interface/fancyinput'] = array(
    'title' => ('Configure Fancy Input'),
    'page callback' => 'drupal_get_form',
    'page arguments' => array('fancyinput_admin_settings'),
    'access arguments' => array('administer content'),
    'file' => 'fancyinput.admin.inc',
  );
  return $items;
}

