<?php

/**
 * @file
 * Install, update, and uninstall functions for Social Media Bar.
 */

/**
 * Moves the ShareThis API key to a new variable.
 *
 * Enables all the networks in the new admin interface.
 */
function socialmediabar_update_701() {
  $api_key = variable_get('socialmediabar_apikey', '');
  variable_set('socialmediabar_sharethis_apikey', $api_key);
  variable_del('socialmediabar_apikey');

  variable_set('socialmediabar_enabled_networks', array(
    'twitter' => 'twitter',
    'linkedin' => 'linkedin',
    'googleplus' => 'googleplus',
    'email' => 'email',
  ));
}

/**
 * Cache time is now user configurable.
 */
function socialmediabar_update_702() {
  variable_set('socialmediabar_cache_time', 30);
}

/**
 * Implements hook_uninstall().
 */
function socialmediabar_uninstall() {
  variable_del('socialmediabar_sharethis_apikey');
  variable_del('socialmediabar_enabled_networks');
  variable_del('socialmediabar_cache_time');
  variable_del('socialmediabar_always_visible');
}
