================================
ABOUT
================================

This file guides you through the installation and configuration of nginx_securelink module
and configuration of nginx server.

for installation of nginx, please read "INSTALL.nginx.txt".

This files also guides you about the usage of this module.
You will learn how to use this module correctly.

================================
INTRODUCTION
================================

The installation of This software has two parts.
1 - Installation of nginx with securelink module
2 - Installation of this module in Drupal.


================================
DRUPAL INSTALLATION
================================
1 - Install the module as usual
2 - Go to admin/config/media/nginx-securelink
3 - Configure all fields.

Hash format, Secret code, MD5 Argument name and expires Argument name
should be the same as configured in nginx server.

Base URL is the URL that files can be downloaded. (Address of nginx server)

4 - Go to admin/config/media/nginx-securelink/handlers
5 - If you enable some access control modules, they can add secondary tabs to this page.

Read README.txt file in each module to learn how to configure them

This module comes with an access controller module named
"Nginx Secure Link: Access By conf Files"

you can enable it to see its options.

It's highly recommended to enable that module. because most of the flexibility of the software
is provided by that module.


================================
NGINX INSTALLATION
================================

For installation of Nginx on your server, please read "INSTALL.nginx.txt"


================================
NGINX CONFIGURATION
================================

After compiling and installing nginx with securelink module enabled,
you should configure it.

The nginx_securelink module can generate nginx configuration for you.

1 - Go to admin/config/media/nginx-securelink/generator
2 - Configure all fields and save.
3 - Go to admin/config/media/nginx-securelink/generator/generate
4 - You should copy the generated commands and adjust them if needed.
Then copy it to your nginx.conf file.

NOTE for Directadmin:
Directadmin overwrites nginx.conf every time you compile or upgrade nginx.
So you should modify nginx.conf every time.
I don't have an idea about how to accomplish this.
If you know a workaround, please let me know by opening a new issue here:

https://www.drupal.org/node/add/project-issue/nginx_securelink

NOTE:
You should restart or reload nginx after changing its configuration

# service nginx reload

or 

# /etc/init.d/nginx reload

or for systemd (Debian 8 and CentOS 7 and some other distros)

# systemctl reload nginx.service


================================
HOW TO USE THIS MODULE
================================

When you installed and configure this module, and your nginx server,
it's time to use it.

You should place your private files in your nginx server.
Suppose we have a file named "private.zip"
we want to create a request link for this file.

Your link should be like this:

http://www.yourdomain.com/requestlink/private.zip.html

Note the .html extension. It should always be added to the end of request links.

If you have a folder named 'videos' and a file named 'vide.mp4' in it, then the
request link will look like ths:

http://www.yourdomain.com/requestlink/videos/vide.mp4.html


NOTE: There is a helper module called "Nginx SecureLink: Text format"
 If you enable that module, it will help you create download request links more easily.
 see README.txt file inside that module's folder for more information.

If you Open the above URL in your browser, you probably will see this message:

"
You don't have access to download this file.
"

That's bacause this module denies all access requests by default unless an access controller
explicitly allows your access.

You should first enable an access controller module.
Fortunately a great one is included :)

Please go to admin/mdoules and enable "Nginx Secure Link: Access By conf Files" module.

Then you should configure that module.
Please read the README.txt file inside that module's folder for more information.

If you configure access handlers correctly, Opening the URL mentioned above, will show you
a download request page.

Good Luck.
