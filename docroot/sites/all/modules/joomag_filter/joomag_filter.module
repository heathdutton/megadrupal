<?php

/**
 * @file
 * Module file for joomag_filter.
 */

// Include .inc with the specific parser functions.
include_once 'joomag_filter.filter.inc';

/**
 * Implements hook_help().
 */
function joomag_filter_help($path, $arg) {
  switch ($path) {
    case 'admin/help#joomag_filter':
      return t('<p>To use this filter, go to <a href="@link">admin/config/content/formats</a> and configure an input format, or create a new one.</p>', array(
        '@link' => url('admin/config/content/formats'),
      ));
  }
}

/**
 * Implements hook_filter_info().
 *
 * Here we define the filter provided by the module.
 */
function joomag_filter_filter_info() {
  $filters['joomag'] = array(
    'title' => t('Joomag filter'),
    'description' => t('For more info visit <a href="@link">joomag.com</a>.', array(
      '@link' => url('http://joomag.com/', array('external' => TRUE)))
    ),
    'process callback' => '_joomag_filter_filter_joomag_process',
  );

  return $filters;
}

/**
 * Joomag filter process callback.
 *
 * The actual filtering is performed here. The supplied text should be returned,
 * once any necessary substitutions have taken place.
 */
function _joomag_filter_filter_joomag_process($text, $filter, $format) {
  return joomag_filter_parser($text);
}
