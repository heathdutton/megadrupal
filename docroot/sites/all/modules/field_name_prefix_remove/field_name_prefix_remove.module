<?php

/**
 * Implements hook_form_FORM_ID_alter().
 * For: field_ui_field_overview_form
 */
function field_name_prefix_remove_form_field_ui_field_overview_form_alter(&$form, &$form_state) {
  global $language;

  //Get language direction
  $direction = $language->direction ? 'rtl' : 'ltr';

  //Remove the unnecessary field_ prefix.
  $form['#validate'][] = 'field_name_prefix_remove_form_field_ui_field_overview_form_remove_field_prefix';
  // Attach validate function to prevent adding the field_ prefix.
  $form['fields']['_add_new_field']['field_name']['#field_prefix'] = '<span dir="' . $direction . '">';
  // Increase maximum characters to 32 as per database constraint
  $form['fields']['_add_new_field']['field_name']['#maxlength'] = 32;
}

/**
 * Validate function to prevent adding the field_ prefix.
 */
function field_name_prefix_remove_form_field_ui_field_overview_form_remove_field_prefix(&$form, &$form_state) {
  $field_name = & $form_state['values']['fields']['_add_new_field']['field_name'];
  $field_name = preg_replace('/^field_/', '', $field_name);
}
