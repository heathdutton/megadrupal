<?php

/**
 * @file
 * Installation file of Entity Documentation Confluence module.
 */

/**
 * Implements hook_uninstall().
 */
function entity_documentation_confluence_uninstall() {
  // Remove the ed_confluence_api_values variable.
  variable_del('ed_confluence_api_values');

  // Remove auto export settings.
  module_load_include('inc', 'entity_documentation', 'includes/entity_documentation.functions');
  $auto_export_settings = ed_get_auto_export();

  foreach ($auto_export_settings as $key => $value) {
    $exist = preg_match('#confluence#', $key, $matches);
    if ($exist == TRUE) {
      unset($auto_export_settings[$key]);
    }
  }

  $new_value = serialize($auto_export_settings);
  variable_set('ed_auto_export', $new_value);
}
