<?php
/**
 * @file
 * Losungen install.
 */

/**
 * Implements hook_requirements().
 */
function losungen_requirements($phase) {

  $requirements = array();

  $t = get_t();

  if ($phase == 'runtime') {
    $filename = "losungen" . date("Y") . ".dat";
    $path = drupal_get_path("module", "losungen") . "/data/";
    if (!file_exists('.' . $path . $filename)) {
      $requirements['losungen'] = array(
        'title' => $t("Losungen data-file not found."),
        'value' => $filename,
        'severity' => REQUIREMENT_ERROR,
        'description' => $t("Download the file 'Losungen Free @year.csv' from http://losungen.de " .
          "and convert it using 'conv.php' in dir @dir. Consult the README-file for more advise.", array(
            '@dir' => $path,
            '@year' => date("Y"),
          )),
      );
    }
  }
  return $requirements;
}
