<?php
/**
 * @file
 * Main file for module seed_tools.
 */

/**
 * Implements hook_block_info().
 */
function seed_tools_block_info() {
  $blocks['seed_breadcrumb'] = array(
    'info' => t('SeeD Breadcrumb'),
    'cache' => DRUPAL_CACHE_GLOBAL,
  );
  $blocks['seed_logo'] = array(
    'info' => t('SeeD Logo'),
    'cache' => DRUPAL_NO_CACHE,
  );
  $blocks['seed_messages'] = array(
    'info' => t('SeeD Messages'),
    'cache' => DRUPAL_NO_CACHE,
  );
  $blocks['seed_title'] = array(
    'info' => t('SeeD Title'),
    'cache' => DRUPAL_CACHE_GLOBAL,
  );
  $blocks['seed_sitename'] = array(
    'info' => t('SeeD site name'),
    'cache' => DRUPAL_NO_CACHE,
  );
  $blocks['seed_siteslogan'] = array(
    'info' => t('SeeD site slogan'),
    'cache' => DRUPAL_NO_CACHE,
  );

  return $blocks;
}

/**
 * Implements hook_block_view().
 */
function seed_tools_block_view($delta = '') {
  $block = array();

  switch ($delta) {
    case 'seed_breadcrumb':
    case 'seed_title':
      $block['content'] = t('Temporary content for block %block, will be altered in hook_process_block() from <a href="http://drupal.org/project/seed">SeeD Theme</a>.', array('%block' => $delta));
      break;

    case 'seed_messages':
      $seed = &drupal_static('seed');
      $seed['messages_as_block'] = TRUE;
      $block['content'] = t('This block (%block) should not be invoked directly. It relies on hook_process_page() and hook_process_block() from <a href="http://drupal.org/project/seed">SeeD Theme</a>.', array('%block' => $delta));
      break;

    case 'seed_logo':
      $block['content'] = l(theme('image', array('path' => theme_get_setting('logo'), 'alt' => t('Home'))), '<front>', array('html' => TRUE, 'attributes' => array('title' => t('Home'), 'rel' => 'home', 'id' => 'logo')));
      break;

    case 'seed_sitename':
      $site_name = variable_get('site_name', FALSE);
      if ($site_name) {
        if (drupal_get_title()) {
          $block['content'] = '<div class="site-name">' . l($site_name, '<front>', array('html' => TRUE, 'attributes' => array('title' => t('Home'), 'rel' => 'home'))) . '</div>';
        }
        else {
          $block['content'] = '<h1 class="site-name">' . l(t('Home') . ' - ' . $site_name, '<front>', array('html' => TRUE, 'attributes' => array('title' => t('Home'), 'rel' => 'home'))) . '</h1>';
        }
      }
      break;

    case 'seed_siteslogan':
      $site_slogan = variable_get('site_slogan', null);

      if ($site_slogan) {
        $block['content'] = '<span class="site-slogan">' . $site_slogan . '</span>';
      }
      break;
  }
  return $block;
}
