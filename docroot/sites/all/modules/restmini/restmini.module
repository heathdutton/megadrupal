<?php
/**
 * @file
 * Drupal RestMini module.
 *
 * Nothing much here. Check RestMini.php and the sub modules restmini_service and restmini_client instead.
 */


/**
 * Implements hook_menu().
 *
 * @return array
 */
function restmini_menu() {
  return array(
    'admin/config/restmini' => array(
      'title' => 'RESTmini',
      'description' => 'RESTmini Services and Clients',
      'page callback' => 'restmini_admin_help',
      'access arguments' => array('administer site configuration'),
      'file' => 'admin/restmini.admin.inc',
      'type' => MENU_NORMAL_ITEM,
    ),
    'admin/config/restmini/help' => array(
      'title' => 'Methods, Operations and Status',
      'type' => MENU_DEFAULT_LOCAL_TASK,
      'weight' => -30,
    ),
  );
}

/**
 * Rebuilds validation patterns cache.
 *
 * Implements hook_flush_caches().
 * Doesn't provide any cache table names; only implements hook_flush_caches, because there's no other way to detect cache flushing.
 *
 * D8: consider hook_rebuild().
 *
 * @see RestMini::validationPattern()
 *
 * @return array
 */
function restmini_flush_caches() {
  // Flush validation patterns cache.
  cache_clear_all('restmini__validation_patterns', 'cache');
  // Rebuid validation patterns cache.
  RestMini::validationPattern();

  // Satisfy return value contract with hook_flush_caches().
  return array();
}
