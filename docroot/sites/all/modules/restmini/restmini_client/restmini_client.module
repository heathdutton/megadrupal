<?php
/**
 * @file
 * Drupal RestMini Client module.
 *
 * No functions?
 * This module does not provide any functions, because it would effectively prevent extensions to the module.
 * The reason being that a function can only call a class method using literal class name;
 * a function has no means of using the static:: pattern.
 * And if some accessors are being called via functions, and others via an extending class,
 * the result is utter inconsistency; '- why does this module sometimes behave one way, and at other times another way?'.
 */


/**
 * Implements hook_menu().
 *
 * @return array
 */
function restmini_client_menu() {
  return array(
    'admin/config/restmini/client' => array(
      'title' => 'Client settings',
      'page callback' => 'drupal_get_form',
      'page arguments' => array('restmini_client_admin_form'),
      'access arguments' => array('administer site configuration'),
      'file' => 'admin/restmini_client.admin.inc',
      'type' => MENU_LOCAL_TASK,
      'weight' => -10,
    ),
  );
}

/**
 * Downloads new SSL CA certs bundle, if variable 'restmini_client_cacertscron' is set to truthy.
 *
 * Implements hook_cron().
 */
function restmini_client_cron() {
  if (variable_get('restmini_client_cacertscron', FALSE)) {
    RestMiniClient::downloadCaCertBundle();
  }
}
