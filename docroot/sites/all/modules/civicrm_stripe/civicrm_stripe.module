<?php

/**
 * @file
 * CiviCRM Stripe core functions.
 */

/**
 * Implements hook_civicrm_buildForm().
 *
 * @param string $formName
 *   The name of the form.
 * @param object $form
 *   Reference to the form object.
 */
function civicrm_stripe_civicrm_buildForm($formName, &$form) {
  if (isset($form->_paymentProcessor['payment_processor_type']) && $form->_paymentProcessor['payment_processor_type'] == 'Stripe') {
    if (!stristr($formName, '_Confirm') && !stristr($formName, '_ThankYou')) {
      if (!isset($form->_elementIndex['stripe_token'])) {
        $form->addElement('hidden', 'stripe_token', NULL, array('id' => 'stripe-token'));
      }
    }
  }
}
