<?php

/**
 * @file
 * JQuery Image Zoomer Formatter install file.
 */

/**
 * Implements hook_requirements().
 */
function jquery_image_zoomer_formatter_requirements($phase) {
  if (!module_exists('libraries')) {
    module_enable(array('libraries'));
  }
  $requirements = array();
  $t = get_t();
  if ($phase == 'install') {
    $requirements['jquery_image_zoomer_formatter'] = array(
      'title' => $t('jQuery Zoomer Library'),
    );
    $path = libraries_get_path('jquery_zoomer');

    if ($path && file_exists($path . '/jquery.fs.zoomer.js')) {
      $requirements['jquery_image_zoomer_formatter']['value'] = $t('The jQuery Zoomer
        Library is installed at <code>!path</code>', array(
          '!path' => $path,
        )
      );
    }
    else {
      $requirements['jquery_image_zoomer_formatter']['description'] = $t('The jQuery
        Zoomer Library could not be found. Please <a href="!url">
        download it</a>, install it in the <code>libraries</code> directory, and
        rename the directory to <code>jquery_zoomer</code>. The library
        should be available at a path like 
        <code>sites/all/libraries/jquery_zoomer/jquery.fs.zoomer.js</code>', array(
          '!url' => 'http://plugins.jquery.com/zoomer/',
        )
      );
      $requirements['jquery_image_zoomer_formatter']['severity'] = REQUIREMENT_ERROR;
      $requirements['jquery_image_zoomer_formatter']['value'] = $t('is not found.');
    }
  }
  return $requirements;
}

/**
 * Implements hook_enable().
 */
function jquery_image_zoomer_formatter_enable() {
  drupal_set_message(t('The JQuery Image Zoomer Formatter module has been successfully installed.
      This module requires juqery 1.7 or greater. Please go to jquery update module configuration 
      page or  click <a href="!url">here</a> to select the required jquery version.',
      array('!url' => url('admin/config/development/jquery_update'))));
}
