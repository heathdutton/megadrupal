<?php

use Pimple\Container;
use Pimple\ServiceProviderInterface;

/**
 * Get the Pimple container.
 *
 * @return \Pimple\Container
 */
function pimple_container_get_container() {
  $container = &drupal_static(__FUNCTION__);

  if (isset($container)) {
    return $container;
  }

  $container = new Container();

  drupal_alter('pimple_container_info', $container);

  return $container;
}

/**
 * Get a service from the Pimple container.
 */
function pimple_container_get_instance($name) {
  $container = pimple_container_get_container();
  return isset ($container[$name]) ? $container[$name] : NULL;
}

/**
 * Register a ServiceProvider to the Pimple container.
 *
 * @param \Pimple\ServiceProviderInterface $serviceProvider
 */
function pimple_container_register_provider(ServiceProviderInterface $serviceProvider) {
  $container = pimple_container_get_container();

  if ($container) {
    $container->register($serviceProvider);
  }
}
