<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
	<title>Media: Webcam</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="language" content="en" />
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	
	<script src="js/swfobject.js" type="text/javascript"></script>
	<SCRIPT LANGUAGE="JavaScript">

	function recordClick() {
            var webcamFlash = document.getElementById("webcamFlash");
            webcamFlash.recordClick();
        }
        function stopClick() {
            var webcamFlash = document.getElementById("webcamFlash");
            webcamFlash.stopClick();
        }        
		function stopTimer() {
			alert('timer reached max duration');
		}
		function playClick() {
            var webcamFlash = document.getElementById("webcamFlash");
            webcamFlash.playClick();
        }
		function snapImage() {
            var webcamFlash = document.getElementById("webcamFlash");
			var canvas = document.getElementById("c");
			var ctx = canvas.getContext("2d");

			var image = new Image();

			image.src = webcamFlash.snapImage();
			ctx.drawImage(image, 0, 0);
        }

</SCRIPT>
	<script type="text/javascript">
		var flashvars = {
			id: "webcamFlash",
			width: 637,
			height: 357,
			connectUrl: 'rtmp://localhost/oflaDemo',
			baseFilename: 'webcamTest',
			maxDuration: 1000,
			textfield: 'my-text',
			stopTimerFunction: 'stopTimer'
		};
		var params = {
			menu: "false",
			scale: "noScale",
			allowFullscreen: "true",
			allowScriptAccess: "always",
			bgcolor: "#FFFFFF"
		};
		var attributes = {
			id:"webcamFlash"
		};
		swfobject.embedSWF("webcam.swf", "webcamFlash", 637, 357, "10.0.0", "expressInstall.swf", flashvars, params, attributes);
	</script>

	<style type="text/css">
		html, body { height:100%; overflow:hidden; }
		body { margin:0; }
		.webcam-button {
			width: 40px; height: 40px; float: left; margin: 5px; background-repeat: no-repeat;
		}
		.webcam-record {
			background-image: url(img/record.png);
		}
		.webcam-record:hover {
			background-image: url(img/record-over.png);
		}
		.webcam-stop {
			background-image: url(img/stop.png);
		}
		.webcam-stop:hover {
			background-image: url(img/stop-over.png);
		}
	</style>
</head>
<body>
	<div id="webcamFlash">
		<h1>webcam</h1>
		<p>Webcam Uploader</p>
		<p><a href="http://www.adobe.com/go/getflashplayer"><img 
			src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" 
			alt="Get Adobe Flash player" /></a></p>
	</div>
	<div class="webcam-buttons">
		<div class="webcam-button webcam-record" onclick="recordClick();"></div>
		<div class="webcam-button webcam-stop" onclick="stopClick();"></div>
		<div class="webcam-button webcam-stop" onclick="playClick();"></div>
		<div class="webcam-button webcam-stop" onclick="snapImage();"></div>
	</div>
	<canvas id="c"></canvas>

</body>
</html>