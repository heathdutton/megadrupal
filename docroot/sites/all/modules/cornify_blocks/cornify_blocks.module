<?php

/**
 * @file
 * create three blocks
 */

/**
 * Implements hook_help().
 */
function cornify_blocks_help($path, $arg) {
  switch ($path) {
    case 'admin/help#cornify_blocks':
      $output = '<h3>' . t('About') . '</h3>';
      $output .= '<p>' . t('This module provides three different Cornify blocks') . '</p>';
      $output .= '<p>' . t('For more information visit <a href="!link">Cornify</a>', array(
                  '!link' => url('http://www.cornify.com'))) . '</p>';
      $output .= '<h3>' . t('Usage') . '</h3>';
      $output .= '<dl>';
      $output .= '<dt>' . t('Configuration') . '</dt>';
      $output .= '<dd>' . t("No configuration needed.") . '</dd>';
      $output .= '<dt>' . t('How to use') . '</dt>';
      $output .= '<dd>' . t("You can simply add the blocks at your favored regions. After that click on the pictures for happiness.") . '</dd>';
      $output .= '</dl>';
      return $output;
  }
}

/**
 * Implements hook_block_info().
 *
 * This block declares which blocks are provided by the module
 */
function cornify_blocks_block_info() {

  $blocks = array();
  $blocks['cornify_blocks_corn'] = array(
    'info' => t('Cornify Corn'),
  );
  $blocks['cornify_blocks_big'] = array(
    'info' => t('Cornify big'),
  );
  $blocks['cornify_blocks'] = array(
    'info' => t('Cornify'),
  );

  return $blocks;
}

/**
 * Implements hook_block_view().
 *
 * This hook generates the contents of the blocks themselves.
 */
function cornify_blocks_block_view($delta = '') {
  // The $delta parameter tells us which block is being requested.

  switch ($delta) {
    case 'cornify_blocks_corn':
      // The subject is displayed at the top of the block. Note that it
      // should be passed through t() for translation. The title configured
      // for the block using Drupal UI supercedes this one.
      $block['subject'] = t('Cornify corn');
      // The content of the block is typically generated by calling a custom
      // function.
      $block['content'] = cornify_blocks_contents($delta);
      break;
    case 'cornify_blocks_big':
      $block['subject'] = t('Cornify big');
      $block['content'] = cornify_blocks_contents($delta);
      break;
    case 'cornify_blocks':
      $block['subject'] = t('Cornify');
      $block['content'] = cornify_blocks_contents($delta);
      break;
  }
  return $block;
}

/**
 * Add Cornify JavaScript element to the page.
 */
function cornify_blocks_add() {
  drupal_add_js('http://www.cornify.com/js/cornify.js', 'external');
}

/**
 * A module-defined block content function.
 */
function cornify_blocks_contents($which_block) {
  // add cornify script.
  cornify_blocks_add();
  // fill content of each different block.
  switch ($which_block) {
    case 'cornify_blocks_corn':
      $content = ('
        <a href="http://www.cornify.com" onclick="cornify_add();return false;">
          <img src="http://www.cornify.com/assets/cornifycorn.gif" width="52" height="51" border="0" alt="Cornify" />
        </a>
        ');
      break;
    case 'cornify_blocks_big':
      $content = ('
        <a href="http://www.cornify.com" onclick="cornify_add();return false;">
          <img src="http://www.cornify.com/assets/cornifybig.gif" width="82" height="25" border="0" alt="Cornify" />
        </a>
        ');
      break;
    case 'cornify_blocks':
      $content = ('
        <a href="http://www.cornify.com" onclick="cornify_add();return false;">
          <img src="http://www.cornify.com/assets/cornify.gif" width="61" height="16" border="0" alt="Cornify" />
        </a>
        ');
      break;
  }
  return $content;
}
