<?php

/**
 * @file
 * Available for Work
 * This module provides a block that let's you choose whether you're available
 * for new work. Will likely be most useful to freelancers for their personal sites.
 */


/* Implementation of hook_block_info */
function afw_block_info() {

    $blocks['afw'] = array(
      'info' => t('Available for work'),
      'properties' => array('administrative'),
    );

    return $blocks;

}

/* implementation of hook_block_view */

function afw_block_view( $delta = '' ) {
    $block = array();

    if ( $delta == 'afw' ) {
        $block['subject'] = t('Available for work?');
        $block['content'] = variable_get('afw_available', t('Available for work.'));
    }

    return $block;

}

function afw_block_configure( $delta = '' ) {
    $form = array();

    if ( $delta == 'afw' ) {

        $form['afw_toggle'] = array(
          '#type' => 'textfield',
          '#title' => t('Available for work?'),
          '#default_value' => variable_get('afw_available'),
        );

    }

    return $form;

}


function afw_block_save( $delta = '', $edit = array() ) {

    if ( $delta == 'afw' ) {
        variable_set('afw_available', check_plain($edit['afw_toggle']));
    }

}