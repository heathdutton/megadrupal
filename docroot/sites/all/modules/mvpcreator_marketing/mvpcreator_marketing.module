<?php
/**
 * @file
 * Code for the MVPCreator Marketing feature.
 */

/**
 * Implements hook_ctools_plugin_directory().
 */
function mvpcreator_marketing_ctools_plugin_directory($owner, $plugin_type) {
  if ($owner == 'ctools' && $plugin_type == 'content_types') {
    return 'plugins/' . $plugin_type;
  }
  elseif ($owner == 'panels' && $plugin_type == 'layouts') {
    return 'plugins/' . $plugin_type;
  }
  elseif ($owner == 'panels' && $plugin_type == 'styles') {
    return 'plugins/' . $plugin_type;
  }
}

/**
 * Implements hook_entity_info_alter().
 */
function mvpcreator_marketing_entity_info_alter(&$entity_info) {
  $widgets = array(
    'mvpcreator_marketing_cta' => array(
      'label' => t('Call to action'),
      'description' => t('A button that you want the user to click!'),
      'pane category' => t('Marketing'),
    ),
    'mvpcreator_marketing_testimonial' => array(
      'label' => t('Testimonial'),
      'description' => t('A customer testimonial'),
      'pane category' => t('Marketing'),
    ),
  );

  foreach ($widgets as $name => $widget) {
    $entity_info['fieldable_panels_pane']['bundles'][$name] = array(
      'label' => $widget['label'],
      'description' => $widget['description'],
      'pane category' => $widget['pane category'],
      'admin' => array(
        'path' => 'admin/structure/fieldable-panels-panes/manage/%fieldable_panels_panes_type',
        'bundle argument' => 4,
        'real path' => 'admin/structure/fieldable-panels-panes/manage/' . str_replace('_', '-', $name),
        'access arguments' => array('administer fieldable panels panes'),
      ),
    );
  }
}

