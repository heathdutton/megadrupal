<?php
/**
 * @file Contains stuff that doesn't really fit anywhere else.
 */

/**
 * Sets the field items.
 * @param $entity_type
 * @param $entity
 * @param $field_name
 * @param $items
 * @param $langcode
 *
 * Stolen from http://drupal.org/node/1500308#comment-6832522
 */
function cash_flow_field_set_items($entity_type, &$entity, $field_name, $items, $langcode = NULL) {
  if ($langcode) {
    $lang = $langcode;
  }
  else {
    $field_info = field_info_field($field_name);
    $lang = $field_info['translatable'] ? entity_language($entity_type, $entity) : LANGUAGE_NONE;
  }
  if (empty($entity->{$field_name})) {
    $entity->{$field_name} = array();
  }
  $entity->{$field_name}[$lang] = $items;
}

