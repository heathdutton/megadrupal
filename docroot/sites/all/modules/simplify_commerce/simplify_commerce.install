<?php

/**
 * @file Contains requirements function for Simplify Commerce.
 */

/**
 * Implements hook_requirements().
 */
function simplify_commerce_requirements($phase) {
  $requirements = array();
  $requirements['simplify_commerce'] = array(
    'title' => 'Simplify Commerce PHP SDK',
  );

  $t = get_t();
  if ($phase == 'install') {
    // Check for the Simplify Commerce's PHP library.
    if (file_exists(libraries_get_path('simplify_commerce') . '/lib/Simplify.php')) {
      $requirements['simplify_commerce']['value'] = $t('Installed');
      $requirements['simplify_commerce']['severity'] = REQUIREMENT_OK;
    }
    else {
      $requirements['simplify_commerce']['value'] = $t('Not Installed');
      $requirements['simplify_commerce']['severity'] = REQUIREMENT_ERROR;
      $link = '<a href = "https://www.simplify.com/commerce/docs/sdk/php">here</a>';
      $requirements['simplify_commerce']['description'] = $t('Simplify Commerce PHP SDK is missing. You can click ' . $link . ' to download it.');
    }
  }
  return $requirements;
}
