<?php
/**
 * @file
 * Code for the QD Core Activity Level installation.
 */


/**
 * Implements hook_enable().
 */
function qd_core_activitylevel_enable() {
  uuid_sync_all();
}


/**
 * Implements hook_schema().
 */
function qd_core_activitylevel_schema() {
  $schema['qd_core_activitylevel'] = array(
    'description' => 'The table for quantified data activity level measurements.',
    'fields' => array(
      'id' => array(
        'description' => 'The activity summary id.',
        'type' => 'serial',
        'unsigned' => TRUE,
        'not null' => TRUE,
      ),
      'uuid' => uuid_schema_field_definition(),
      'timestamp' => array(
        'description' => 'The timestamp of when the measurement was taken.',
        'type' => 'int',
        'unsigned' => TRUE,
        'not null' => TRUE,
      ),
      'utc_offset' => array(
        'description' => 'The timestamp offset from UTC.',
        'type' => 'int',
        'unsigned' => FALSE,
        'not null' => TRUE,
      ),
      'uid' => array(
        'description' => 'The user ID this value belongs to.',
        'type' => 'int',
        'unsigned' => TRUE,
        'not null' => TRUE,
      ),
      'service_id' => array(
        'description' => 'The tid of the service (taxonomy) this value came from.',
        'type' => 'int',
        'unsigned' => TRUE,
        'not null' => TRUE,
      ),
      'source_id' => array(
        'description' => 'The ID from the service that identifies this record on that source service.',
        'type' => 'varchar',
        'length' => 256,
        'not null' => FALSE,
      ),
      'min_sedentary' => array(
        'description' => 'The number of sedentary minutes this day.',
        'type' => 'int',
        'unsigned' => TRUE,
        'not null' => FALSE,
      ),
      'min_lightlyactive' => array(
        'description' => 'The number of lightly active minutes this day.',
        'type' => 'int',
        'unsigned' => TRUE,
        'not null' => FALSE,
      ),
      'min_fairlyactive' => array(
        'description' => 'The number of fairly active minutes this day.',
        'type' => 'int',
        'unsigned' => TRUE,
        'not null' => FALSE,
      ),
      'min_veryactive' => array(
        'description' => 'The number of very active minutes this day.',
        'type' => 'int',
        'unsigned' => TRUE,
        'not null' => FALSE,
      ),

    ),
    'primary key' => array('id'),
  );

  return $schema;
}
