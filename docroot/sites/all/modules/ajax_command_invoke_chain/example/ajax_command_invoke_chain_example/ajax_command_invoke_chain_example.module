<?php

/**
 * @file
 * Ajax Command Invoke Chain Example module.
 *
 * Example code on how to implement the new ajax command added by module Ajax
 * Command Invoke Chain.
 */

/**
 * Implements hook_menu().
 */
function ajax_command_invoke_chain_example_menu() {
  $items['acic-example'] = array(
    'page callback' => 'drupal_get_form',
    'page arguments' => array('ajax_command_invoke_chain_example_form'),
    'access arguments' => array('access content'),
    'type' => MENU_CALLBACK,
  );

  return $items;
}

/**
 * Function used to display the example form.
 */
function ajax_command_invoke_chain_example_form($form, &$form_state) {
  $form['text'] = array(
    '#type' => 'markup',
    '#markup' => t('Just click the button to see the changes!'),
  );

  $form['button'] = array(
    '#type' => 'submit',
    '#value' => t('Go'),
    '#ajax' => array(
      'callback' => 'ajax_command_invoke_chain_example_form_ajax',
    ),
  );

  return $form;
}

/**
 * Ajax callback used to test madule functionality.
 */
function ajax_command_invoke_chain_example_form_ajax($form, $form_state) {
  $commands = array();

  // All defined methods and arguments will be run on top of selected element.
  $commands[] = ajax_command_invoke_chain(
    'body',
    array(
      array(
        'prepend',
        '<h1>Prepended text</h1>',
      ),
      array(
        'append',
        '<h1>Appended text</h1>',
      ),
      'fadeOut',
      'fadeIn',
    )
  );

  return array(
    '#type' => 'ajax',
    '#commands' => $commands,
  );
}
