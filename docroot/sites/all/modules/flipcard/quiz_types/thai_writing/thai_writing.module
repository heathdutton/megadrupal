<?php

define('QUIZ_THAI_WRITING', '6 - quiz_thai_writing');

/**
 * Implements hook_quiz_option().
*/
function thai_writing_quiz_option() {
  $lang_name = flipcard_lang_name();
  $option[] = array(
    'key' => QUIZ_THAI_WRITING,
    'prompt' => t('!lang_name Writing (Listen to the sound and say how it is written)',
      array('!lang_name' => $lang_name)),
    'weight' => -20
  );

  return $option;
}

/**
 * Implements hook_view_quiz_question().
 */
function thai_writing_view_quiz_question($quiz_type, $node, $tid) {
  $form = array();

  if ($quiz_type == QUIZ_THAI_WRITING) {
    $form = node_view($node, "question_thai_writing");
    $form['instructions'] = array(
      '#type' => 'item',
      '#prefix' => '<p>',
      '#description' => "Listen to the following Thai and say how you think it is written:",
      '#suffix' => '</p>',
      '#weight' => -40
    );
    
    $form['show_answer'] = array(
      '#type' => 'submit',
      '#value' => t('Show Answer'),
      '#weight' => 10
    );
  }

  return $form;
}
/**
 * Implements hook_view_quiz_answer().
 */
function thai_writing_view_quiz_answer($quiz_type, $node) {
  $form = array();

  if ($quiz_type == QUIZ_THAI_WRITING) {
    $form = node_view($node, "answer_thai_writing");
    $form['prompt'] = array(
      '#type' => 'item',
      '#description' => "The Thai spelling for the English word <b>" .
      $node->title . "</b> is:",
      '#weight' => -10);
    
    flipcard_add_i_was_right_wrong_buttons($form);
    flipcard_add_move_to_level_10_checkbox($form);
  }

  return $form;
}

/**
 * Implements hook_entity_info_alter().
 */
function thai_writing_entity_info_alter(&$entity_info) {
  $entity_info['node']['view modes'] = array_merge($entity_info['node']['view modes'],
    array(
      'question_thai_writing' => array(
        'label' => t('Writing Thai question'),
        'custom settings' => TRUE,
      ),
      'answer_thai_writing' => array(
        'label' => t('Writing Thai answer'),
        'custom settings' => TRUE,
      ),
    ));
}

