<?php

define('QUIZ_THAI_READING', '5 - quiz_thai_reading');

/**
 * Implements hook_quiz_option().
*/
function thai_reading_quiz_option() {
  $lang_name = flipcard_lang_name();
  $option[] = array(
    'key' => QUIZ_THAI_READING,
    'prompt' => t('!lang_name Reading (Read the !lang_name and say how it is pronounced)', 
      array('!lang_name' => $lang_name)),
  );

  return $option;
}

/**
 * Implements hook_view_quiz_question().
 */
function thai_reading_view_quiz_question($quiz_type, $node, $tid) {
  $form = array();

  if ($quiz_type == QUIZ_THAI_READING) {
    $form = node_view($node, "question_thai_reading");
    $form['instructions'] = array(
      '#type' => 'item',
      '#prefix' => '<p>',
      '#description' => "Look at the following Thai and say how you think it is pronounced:",
      '#suffix' => '</p>',
      '#weight' => -40
    );
   
    $form['show_answer'] = array(
      '#type' => 'submit',
      '#value' => t('Show Answer'),
      '#weight' => 10
    );
  }

  return $form;
}

/**
 * Implements hook_view_quiz_answer().
 */
function thai_reading_view_quiz_answer($quiz_type, $node) {
  $form = array();

  if ($quiz_type == QUIZ_THAI_READING) {
    $form = node_view($node, "answer_thai_reading");
    $form['prompt'] = array(
      '#type' => 'item',
      '#description' => "The pronunciation of the Thai for <b>" . $node->title . "</b> is:",
      '#weight' => -10);
    
    flipcard_add_i_was_right_wrong_buttons($form);
    flipcard_add_move_to_level_10_checkbox($form);
  }

  return $form;
}

/**
 * Implements hook_entity_info_alter().
 */
function thai_reading_entity_info_alter(&$entity_info) {
  $entity_info['node']['view modes'] = array_merge($entity_info['node']['view modes'],
    array(
      'question_thai_reading' => array(
        'label' => t('Reading Thai question'),
        'custom settings' => TRUE,
      ),
      'answer_thai_reading' => array(
        'label' => t('Reading Thai answer'),
        'custom settings' => TRUE,
      ),
    ));
}

