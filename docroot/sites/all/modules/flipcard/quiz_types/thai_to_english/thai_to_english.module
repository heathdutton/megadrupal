<?php

define('QUIZ_THAI_TO_ENGLISH', '3 - quiz_thai_to_english');

/**
 * Implements hook_quiz_option().
*/
function thai_to_english_quiz_option() {
  $lang_name = flipcard_lang_name();
  $option[] = array(
    'key' => QUIZ_THAI_TO_ENGLISH,
    'prompt' => $lang_name . ' ' . t('to English (Recommended quiz type)'),
    'weight' => -20
  );

  return $option;
}

/**
 * Implements hook_view_quiz_question().
 */
function thai_to_english_view_quiz_question($quiz_type, $node, $tid) {
  $form = array();

  if ($quiz_type == QUIZ_THAI_TO_ENGLISH) {
    $form = node_view($node, "question_thai_to_english");
    $form['instructions'] = array(
      '#type' => 'item',
      '#prefix' => '<p>',
      '#description' => "Listen to the following recording and say what you think the English translation is:",
      '#suffix' => '</p>',
      '#weight' => -40
    );
    
    $form['show_answer'] = array(
      '#type' => 'submit',
      '#value' => t('Show Answer'),
      '#weight' => 10
    );
  }

  return $form;
}

/**
 * Implements hook_view_quiz_answer().
 */
function thai_to_english_view_quiz_answer($quiz_type, $node) {
  $form = array();
  if ($quiz_type == QUIZ_THAI_TO_ENGLISH) {
    $form = node_view($node, "answer_thai_to_english");
    $form['prompt'] = array(
      '#type' => 'item',
      '#description' => "The answer is:",
      '#weight' => -10);
    
    flipcard_add_i_was_right_wrong_buttons($form);
    flipcard_add_move_to_level_10_checkbox($form);
  }

  return $form;
}

/**
 * Implements hook_entity_info_alter().
 */
function thai_to_english_entity_info_alter(&$entity_info) {
  $entity_info['node']['view modes'] = array_merge($entity_info['node']['view modes'],
    array(
      'question_thai_to_english' => array(
        'label' => t('Thai to English question'),
        'custom settings' => TRUE,
      ),
      'answer_thai_to_english' => array(
        'label' => t('Thai to English answer'),
        'custom settings' => TRUE,
      ),
    ));
}

