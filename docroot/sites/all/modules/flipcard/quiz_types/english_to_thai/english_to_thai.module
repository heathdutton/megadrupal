<?php

define('QUIZ_ENGLISH_TO_THAI', '4 - quiz_english_to_thai');

/**
 * Implements hook_quiz_option().
*/
function english_to_thai_quiz_option() {
  $lang_name = flipcard_lang_name();
  $option[] = array(
    'key' => QUIZ_ENGLISH_TO_THAI,
    'prompt' => t('English to !lang_name (Tough challenge; master the !lang_name to English quiz type first)', 
      array('!lang_name' => $lang_name))
  );

  return $option;
}

/**
 * Implements hook_view_quiz_question().
 */
function english_to_thai_view_quiz_question($quiz_type, $node, $tid) {
  $form = array();

  if ($quiz_type == QUIZ_ENGLISH_TO_THAI) {
    $form = node_view($node, "question_english_to_thai");
    
    $lang_name = variable_get('lingopolo_subsite_language');
    $form['instructions'] = array(
      '#type' => 'item',
      '#prefix' => '<p>',
      '#description' => "Look at the following English text and say what you think the " .
        $lang_name . " translation is:",
      '#suffix' => '</p>',
      '#weight' => -40
    );
    
    $form['show_answer'] = array(
      '#type' => 'submit',
      '#value' => t('Show Answer'),
      '#weight' => 10
    );
  }

  return $form;
}

/**
 * Implements hook_view_quiz_answer().
 */
function english_to_thai_view_quiz_answer($quiz_type, $node) {
  $form = array();

  if ($quiz_type == QUIZ_ENGLISH_TO_THAI) {
    $form = node_view($node, "answer_english_to_thai");
    
    $lang_name = variable_get('lingopolo_subsite_language');
    $form['prompt'] = array(
      '#type' => 'item',
      '#description' => "The " . $lang_name . " for <b>" . $node->title . "</b> is:",
      '#weight' => -10);
    
    flipcard_add_i_was_right_wrong_buttons($form);
    flipcard_add_move_to_level_10_checkbox($form);
  }

  return $form;
}

/**
 * Implements hook_entity_info_alter().
 */
function english_to_thai_entity_info_alter(&$entity_info) {
  $entity_info['node']['view modes'] = array_merge($entity_info['node']['view modes'],
    array(
      'question_english_to_thai' => array(
        'label' => t('English to Thai question'),
        'custom settings' => TRUE,
      ),
      'answer_english_to_thai' => array(
        'label' => t('English to Thai answer'),
        'custom settings' => TRUE,
      ),
    ));
}