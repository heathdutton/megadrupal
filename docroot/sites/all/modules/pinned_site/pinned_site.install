<?php 
/**
 * @file
 * 
 * Installation script for Pinned Site. 
 */

/**
 * Implements hook_schema().
 */
function pinned_site_schema() {
  $schema = array();
  
  $schema['pinned_site_tasks'] = array(
    'description' => 'The table containing data for static tasks o Pinned Site.',
    'fields' => array(
      'id' => array(
        'description' => 'The primary key.',
        'type' => 'serial',
        'not null' => TRUE,
      ),
      'name' => array(
        'description' => 'The task name.',
        'type' => 'varchar',
        'length' => 128,
        'not null' => TRUE,
        'default' => '',
      ),
      'action_uri' => array(
        'description' => 'The task action URI.',
        'type' => 'varchar',
        'length' => 255,
        'not null' => TRUE,
        'default' => '',
      ),
      'icon_uri' => array(
        'description' => 'The task icon URI.',
        'type' => 'varchar',
        'length' => 255,
        'not null' => TRUE,
        'default' => '',
      ),
      'window_type' => array(
        'description' => 'The window type for action.',
        'type' => 'varchar',
        'length' => 6,
        'not null' => TRUE,
        'default' => 'tab',
      ),
      'weight' => array(
        'description' => 'The weight of the task.',
        'type' => 'int',
        'size' => 'tiny',
        'not null' => TRUE,
        'default' => 0,
      ),
    ),
    'primary key' => array('id'),
  );

  return $schema;
}

/**
 * Implements hook_install().
 */
function pinned_site_install() {
  drupal_set_message(
    st('The Pinned Site module is not configured yet. Please, visit the <a href="@settings-url">Pinned Site settings page</a> to configure your settings.', 
      array('@settings-url' => url('admin/config/system/pinned_site'))));
}

/**
 * Implements hook_uninstall().
 */
function pinned_site_uninstall() {

  variable_del('pinned_site_application_name');
  variable_del('pinned_site_msapplication_tooltip');
  variable_del('pinned_site_msapplication_starturl');
  variable_del('pinned_site_msapplication_navbutton_color');
  variable_del('pinned_site_msapplication_window_width');
  variable_del('pinned_site_msapplication_window_height');
  variable_del('pinned_site_msapplication_navbutton_color');
  variable_del('pinned_site_recent_posts_jump_list_category_name');
  variable_del('pinned_site_recent_posts_node_types');
  variable_del('pinned_site_recent_posts_count');
  variable_del('pinned_site_use_browserconfig_xml');
  variable_del('pinned_site_msapplication_tileimage');
  variable_del('pinned_site_msapplication_tile_square70x70logo');
  variable_del('pinned_site_msapplication_tile_square150x150logo');
  variable_del('pinned_site_msapplication_tile_wide310x150logo');
  variable_del('pinned_site_msapplication_tile_square310x310logo');
  variable_del('pinned_site_notification_polling_uri1');
  variable_del('pinned_site_notification_polling_uri2');
  variable_del('pinned_site_notification_polling_uri3');
  variable_del('pinned_site_notification_polling_uri4');
  variable_del('pinned_site_notification_polling_uri5');
  variable_del('pinned_site_notification_freqency');
  variable_del('pinned_site_notification_cycle');
  variable_del('pinned_site_badge_polling_uri');
  variable_del('pinned_site_badge_freqency');

}
