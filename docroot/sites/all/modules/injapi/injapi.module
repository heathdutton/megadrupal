<?php


/**
 * Helper function for modules that use injapi as a hook_schema() replacement.
 * Unfortunately we cannot implement hook_schema on behalf of other modules.
 * See example/injapi_example.install
 */
function injapi_get_schema($module) {

  $data = array();
  $api = new injapi_InjectedAPI_hookSchema($data);

  $f = $module . '_injapi_schema';
  $api->setModule($module);
  $f($api);

  return $data;
}


/**
 * Implements hook_menu()
 */
function injapi_menu() {
  return injapi_invoke_all('injapi_menu', 'hookMenu');
}


/**
 * Implements hook_image_styles()
 */
function injapi_image_default_styles() {
  return injapi_invoke_all('injapi_image_default_styles', 'hookImageDefaultStyles');
}


/**
 * Helper function for info hooks
 */
function injapi_invoke_all($hook, $class_suffix) {

  $data = array();
  $class = 'injapi_InjectedAPI_' . $class_suffix;
  $api = new $class($data);
  foreach (module_implements($hook) as $module) {
    $f = $module . '_' . $hook;
    $api->setModule($module);
    $f($api);
  }
  return $data;
}
