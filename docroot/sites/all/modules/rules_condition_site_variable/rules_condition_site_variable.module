<?php
/**
 * @file
 * Code for the Rules Site Variable Condition module.
 */

/**
 * Implements hook_rules_condition_info().
 */
function rules_condition_site_variable_rules_condition_info() {
  return array(
    'rules_condition_site_variable_compare_variable' => array(
      'label' => t('Site variable to check'),
      'arguments' => array(
        'variable_name' => array('type' => 'text', 'label' => t('The site variable you want to check')),
        'variable_value' => array('type' => 'text', 'label' => t('The value that the site variable should have')),
      ),
      'module' => 'rules_condition_site_variable',
      'group' => t('Data'),
    ),
  );
}

/**
 * Condition rules_condition_site_variable_compare_variable.
 *
 *  Future enhancement could include passing the data type, instead of
 *  casting it to string.
 */
function rules_condition_site_variable_compare_variable($variable_name, $variable_value) {
  $variable = variable_get($variable_name);
  if (is_numeric($variable)) {
    $variable = (string) $variable;
  }
  return ($variable === $variable_value);
}

