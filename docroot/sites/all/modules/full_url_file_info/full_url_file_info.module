<?php 
/**
 * @file
 * Full URL file information module
 */

/*
 * Implements hook_file_load().
 */
function full_url_file_info_file_load($files) {
  if (variable_get('full_url_file_info_file_full_url', 0) == 1) {
    foreach ($files as $fid => &$file) {
      $file->full_url =  file_create_url($file->uri);
    }
  }
}

/*
 * Implements hook_form_alter().
 */
function full_url_file_info_form_system_file_system_settings_alter(&$form, &$form_state, $form_id) {
  $form['full_url_file_info_file_full_url'] = array(
    '#type' => 'checkbox',
    '#title' => t('Add full url value into files information'),
    '#default_value' => variable_get('full_url_file_info_file_full_url', 0),
    '#description' => t('By default, files information url has schema name but no full url. When used from external sites, such as via Services, getting the full url information is a needed addition. Note: cache should be cleared after changing this setting.'),
  );
}

?>
