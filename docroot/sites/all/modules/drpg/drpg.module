<?php

/**
 * @file
 * Defines core DRPG functionality.
 */

/**
 * Implements hook_menu().
 */
function drpg_menu() {
  $items = array();

  $items['admin/drpg'] = array(
    'title' => 'DRPG',
    'description' => 'Manage DRPG.',
    'access arguments' => array('administer drpg'),
    'type' => MENU_NORMAL_ITEM,
    'weight' => 0,
  );

  return $items;
}

/**
 * Implements hook_permission().
 */
function drpg_permission() {
  return array(
    'administer drpg' => array(
      'title' => t('Administer DRPG'),
      'description' => t('Administer DRPG data and settings.'),
    ),
  );
}

/**
 * Implements hook_ctools_plugin_api().
 */
function drpg_ctools_plugin_api($owner, $api) {
  if ($owner == 'services' && $api == 'services') {
    return array(
      'version' => 3,
      'file' => 'drpg.services.inc',
      'path' => drupal_get_path('module', 'drpg') . '/includes',
    );
  }
}

/**
 * Renders a PHP variable as JSON string.
 *
 * Used in place of drupal_json_output to allow for JSON_NUMERIC_CHECK option
 * and ensure numbers are not rendered as strings.
 *
 * @param mixed $var
 *   The PHP variable to render as a JSON string.
 */
function drpg_json_output($var) {
  drupal_add_http_header('Content-Type', 'application/json');
  echo json_encode($var, JSON_NUMERIC_CHECK);
}
