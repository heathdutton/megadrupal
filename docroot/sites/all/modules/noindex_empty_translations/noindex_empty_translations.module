<?php
function noindex_empty_translations_page_alter($page){
  // Check that the page has a localised title
  
  //Get the current language
  global $language;
  global $language_content;
  
  $lang = $language->prefix;
  if (!$lang){
    $lang == 'en';
  }
  
  if (arg(0) == 'node') {
    $nid = arg(1);
  }else{
	 $nid = NULL;
  }
    
  // Only attempt this on pages that are nodes
  if ($nid){
    // Check that the current page has a title in the local language
    if (array_key_exists ($language_content->language, $page['content']['system_main']['nodes'][$nid]['#node']->body)){
      // do nothing.
    }else{
  	  _add_meta_tags();
    }
  }
}

function _add_meta_tags(){
  $meta_robots = array(
    '#type' => 'html_tag',
    '#tag' => 'meta',
    '#attributes' => array(
      'name' => 'robots',
      'content' => 'noindex',
     )
  );
      
  $meta_robots_google = array(
    '#type' => 'html_tag',
    '#tag' => 'meta',
    '#attributes' => array(
    'name' => 'googlebot',
    'content' => 'noindex',
  )
  );
      
  drupal_add_html_head($meta_robots, 'meta_robots');
  drupal_add_html_head($meta_robots_google, 'meta_robots_google');	
	
}