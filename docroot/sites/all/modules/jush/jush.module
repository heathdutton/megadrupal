<?php

/**
 * Implements hook_library().
 */
function jush_library() {
  $libraries = array();

  // Retrieve the information about JUSH from the Libraries API.
  $library = libraries_detect('jush');

  // If it's available, then register it as a Drupal library.
  if ($library['installed']) {
    $libraries['jush'] = array(
      'title' => $library['name'],
      'website' => $library['vendor url'],
      'version' => $library['version'],
      'js' => array(
        // The JUSH Library.
        libraries_get_path('jush') . '/jush.js' => array(
          'type' => 'file',
          'weight' => JS_LIBRARY + 5,
        ),
        libraries_get_path('jush') . '/jush-api.js' => array(
          'type' => 'file',
          'weight' => JS_LIBRARY + 6,
        ),
        // The JUSH Drupal integration.
        drupal_get_path('module', 'jush') . '/jush.js' => array(
          'type' => 'file',
        ),
      ),
      'css' => array(
        libraries_get_path('jush') . '/jush.css' => array(
          'type' => 'file',
          'weight' => CSS_SYSTEM,
        ),
      ),
    );
  }
  return $libraries;
}

/**
 * Implements hook_libraries_info().
 */
function jush_libraries_info() {
  $libraries['jush'] = array(
    'name' => 'JUSH',
    'vendor url' => 'http://jush.sourceforge.net',
    'download url' => 'http://jush.sourceforge.net/#download',
    'download' => array(
      'type' => 'git',
      'url' => 'git://jush.git.sourceforge.net/gitroot/jush/jush',
    ),
    'version arguments' => array(
      'file' => 'changes.txt',
      'pattern' => '@JUSH ([0-9]+.[0-9]+.[0-9]+):@',
      'lines' => 1,
      'cols' => 50,
    ),
    'files' => array(
      'js' => array(
        'jush.js',
        'jush-api.js',
      ),
      'css' => array(
        'jush.css',
      ),
    ),
  );
  return $libraries;
}
