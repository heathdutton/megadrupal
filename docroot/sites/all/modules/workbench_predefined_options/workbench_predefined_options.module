<?php

/**
 * @file
 * Workbench Predefined Options module file.
 */

/**
 * Implements hook_list_option_info().
 */
function workbench_predefined_options_list_option_info() {
  return array(
    'workbench_sections' => array(
      'label' => t('Workbench Access Sections'),
      'callback' => 'workbench_predefined_options_access_sections',
    ),
  );
}

/**
 * Get's a list of the users available sections.
 */
function workbench_predefined_options_access_sections() {
  // Get the users available categories.
  global $user;

  workbench_access_user_load_data($user);
  $active = workbench_access_get_active_tree();
  $account_access = array_keys($user->workbench_access);

  $categories = array();

  foreach ($account_access as $key => $value) {
    if (isset($active['tree'][$value])) {
      $category = $active['tree'][$value]['name'];
      $categories[$category] = $category;
    }
  }

  return $categories;
}
