<?php
// @todo make sure that variables are deleted on removal

function ideainformer_widget_requirements($phase) {
  global $base_path;
  $requirements = array();
  // Ensure translations don't break at install time
  $t = get_t();

  if ($phase == 'runtime') {
    if (!variable_get('ideainformer_domain')) {
      $requirements['ideainformer'] = array(
        'title' => 'Idea Informer',
        'description' => $t('The correct settings for the Idea Informer widget has not been setup. Check the help pages for <a href="@url">configuring the widget</a>.', array('@url' => $base_path . '/admin/settings/ideainformer')), 
        'severity' => REQUIREMENT_ERROR, 
        'value' => $t('Not set'),
      );

    }

    // @todo write requirements if the block is enabled, but the settings are not set
  }
  return $requirements;
}
