(function(e){Drupal.behaviors.blockSettingsSummary={attach:function(t){if(typeof jQuery.fn.drupalSetSummary=="undefined")return;e("fieldset#edit-path",t).drupalSetSummary(function(t){return e('textarea[name="pages"]',t).val()?Drupal.t("Restricted to certain pages"):Drupal.t("Not restricted")}),e("fieldset#edit-node-type",t).drupalSetSummary(function(t){var n=[];return e('input[type="checkbox"]:checked',t).each(function(){n.push(e.trim(e(this).next("label").text()))}),n.length||n.push(Drupal.t("Not restricted")),n.join(", ")}),e("fieldset#edit-role",t).drupalSetSummary(function(t){var n=[];return e('input[type="checkbox"]:checked',t).each(function(){n.push(e.trim(e(this).next("label").text()))}),n.length||n.push(Drupal.t("Not restricted")),n.join(", ")}),e("fieldset#edit-user",t).drupalSetSummary(function(t){var n=e('input[name="custom"]:checked',t);return n.val()==0?Drupal.t("Not customizable"):n.next("label").text()})}},Drupal.behaviors.blockDrag={attach:function(t,n){if(typeof Drupal.tableDrag=="undefined"||typeof Drupal.tableDrag.blocks=="undefined")return;var r=e("table#blocks"),i=Drupal.tableDrag.blocks;i.row.prototype.onSwap=function(e){s(r,this)},Drupal.theme.tableDragChangedWarning=function(){return'<div class="messages warning">'+Drupal.theme("tableDragChangedMarker")+" "+Drupal.t("The changes to these blocks will not be saved until the <em>Save blocks</em> button is clicked.")+"</div>"},i.onDrop=function(){dragObject=this;var t=e(dragObject.rowObject.element).prevAll("tr.region-message").get(0),n=t.className.replace(/([^ ]+[ ]+)*region-([^ ]+)-message([ ]+[^ ]+)*/,"$2"),r=e("select.block-region-select",dragObject.rowObject.element);if(e("option[value="+n+"]",r).length==0)alert(Drupal.t("The block cannot be placed in this region.")),r.change();else if(e(dragObject.rowObject.element).prev("tr").is(".region-message")){var i=e("select.block-weight",dragObject.rowObject.element),s=i[0].className.replace(/([^ ]+[ ]+)*block-weight-([^ ]+)([ ]+[^ ]+)*/,"$2");r.is(".block-region-"+n)||(r.removeClass("block-region-"+s).addClass("block-region-"+n),i.removeClass("block-weight-"+s).addClass("block-weight-"+n),r.val(n))}},e("select.block-region-select",t).once("block-region-select",function(){e(this).change(function(t){var n=e(this).closest("tr"),o=e(this);i.rowObject=new i.row(n),r.find(".region-"+o[0].value+"-message").nextUntil(".region-message").last().before(n),s(r,n),o.get(0).blur()})});var s=function(t,n){e("tr.region-message",t).each(function(){e(this).prev("tr").get(0)==n.element&&(n.method!="keyboard"||n.direction=="down")&&n.swap("after",this),e(this).next("tr").is(":not(.draggable)")||e(this).next("tr").length==0?e(this).removeClass("region-populated").addClass("region-empty"):e(this).is(".region-empty")&&e(this).removeClass("region-empty").addClass("region-populated")})}}}})(jQuery);