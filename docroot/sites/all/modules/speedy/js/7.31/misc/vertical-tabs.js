(function(e){Drupal.behaviors.verticalTabs={attach:function(t){e(".vertical-tabs-panes",t).once("vertical-tabs",function(){var t=e(":hidden.vertical-tabs-active-tab",this).val(),n,r=e("> fieldset",this);if(r.length==0)return;var i=e('<ul class="vertical-tabs-list"></ul>');e(this).wrap('<div class="vertical-tabs clearfix"></div>').before(i),r.each(function(){var r=new Drupal.verticalTab({title:e("> legend",this).text(),fieldset:e(this)});i.append(r.item),e(this).removeClass("collapsible collapsed").addClass("vertical-tabs-pane").data("verticalTab",r),this.id==t&&(n=e(this))}),e("> li:first",i).addClass("first"),e("> li:last",i).addClass("last"),n||(window.location.hash&&e(this).find(window.location.hash).length?n=e(this).find(window.location.hash).closest(".vertical-tabs-pane"):n=e("> .vertical-tabs-pane:first",this)),n.length&&n.data("verticalTab").focus()})}},Drupal.verticalTab=function(t){var n=this;e.extend(this,t,Drupal.theme("verticalTab",t)),this.link.click(function(){return n.focus(),!1}),this.link.keydown(function(t){if(t.keyCode==13)return n.focus(),e("fieldset.vertical-tabs-pane :input:visible:enabled:first").focus(),!1}),this.fieldset.bind("summaryUpdated",function(){n.updateSummary()}).trigger("summaryUpdated")},Drupal.verticalTab.prototype={focus:function(){this.fieldset.siblings("fieldset.vertical-tabs-pane").each(function(){var t=e(this).data("verticalTab");t.fieldset.hide(),t.item.removeClass("selected")}).end().show().siblings(":hidden.vertical-tabs-active-tab").val(this.fieldset.attr("id")),this.item.addClass("selected"),e("#active-vertical-tab").remove(),this.link.append('<span id="active-vertical-tab" class="element-invisible">'+Drupal.t("(active tab)")+"</span>")},updateSummary:function(){this.summary.html(this.fieldset.drupalGetSummary())},tabShow:function(){return this.item.show(),this.item.parent().children(".vertical-tab-button").removeClass("first").filter(":visible:first").addClass("first"),this.fieldset.removeClass("vertical-tab-hidden").show(),this.focus(),this},tabHide:function(){this.item.hide(),this.item.parent().children(".vertical-tab-button").removeClass("first").filter(":visible:first").addClass("first"),this.fieldset.addClass("vertical-tab-hidden").hide();var e=this.fieldset.siblings(".vertical-tabs-pane:not(.vertical-tab-hidden):first");return e.length&&e.data("verticalTab").focus(),this}},Drupal.theme.prototype.verticalTab=function(t){var n={};return n.item=e('<li class="vertical-tab-button" tabindex="-1"></li>').append(n.link=e('<a href="#"></a>').append(n.title=e("<strong></strong>").text(t.title)).append(n.summary=e('<span class="summary"></span>'))),n}})(jQuery);