(function(a){Drupal.behaviors.fileValidateAutoAttach={attach:function(b,c){if(c.file&&c.file.elements){a.each(c.file.elements,function(d){var e=c.file.elements[d];a(d,b).bind("change",{extensions:e},Drupal.file.validateExtension)})}},detach:function(b,c){if(c.file&&c.file.elements){a.each(c.file.elements,function(d){a(d,b).unbind("change",Drupal.file.validateExtension)})}}};Drupal.behaviors.fileButtons={attach:function(b){a("input.form-submit",b).bind("mousedown",Drupal.file.disableFields);a("div.form-managed-file input.form-submit",b).bind("mousedown",Drupal.file.progressBar)},detach:function(b){a("input.form-submit",b).unbind("mousedown",Drupal.file.disableFields);a("div.form-managed-file input.form-submit",b).unbind("mousedown",Drupal.file.progressBar)}};Drupal.behaviors.filePreviewLinks={attach:function(b){a("div.form-managed-file .file a, .file-widget .file a",b).bind("click",Drupal.file.openInNewWindow)},detach:function(b){a("div.form-managed-file .file a, .file-widget .file a",b).unbind("click",Drupal.file.openInNewWindow)}};Drupal.file=Drupal.file||{validateExtension:function(d){a(".file-upload-js-error").remove();var e=d.data.extensions.replace(/,\s*/g,"|");if(e.length>1&&this.value.length>0){var b=new RegExp("\\.("+e+")$","gi");if(!b.test(this.value)){var c=Drupal.t("The selected file %filename cannot be uploaded. Only files with the following extensions are allowed: %extensions.",{"%filename":this.value.replace("C:\\fakepath\\",""),"%extensions":e.replace(/\|/g,", ")});a(this).closest("div.form-managed-file").prepend('<div class="messages error file-upload-js-error" aria-live="polite">'+c+"</div>");this.value="";return false}}},disableFields:function(d){var e=this;if(!a(e).hasClass("ajax-processed")){return}var b=[];if(a(this).closest("div.form-managed-file").length>0){b=a(this).closest("div.form-managed-file").find("input.form-file")}var c=a("div.form-managed-file input.form-file").not(b).not(":disabled");c.attr("disabled","disabled");setTimeout(function(){c.attr("disabled",false)},1000)},progressBar:function(d){var e=this;var c=a(e).closest("div.form-managed-file").find("input.file-progress");if(c.length){var b=c.attr("name");c.attr("name",b.match(/APC_UPLOAD_PROGRESS|UPLOAD_IDENTIFIER/)[0]);setTimeout(function(){c.attr("name",b)},1000)}setTimeout(function(){a(e).closest("div.form-managed-file").find("div.ajax-progress-bar").slideDown()},500)},openInNewWindow:function(b){a(this).attr("target","_blank");window.open(this.href,"filePreview","toolbar=0,scrollbars=1,location=1,statusbar=1,menubar=0,resizable=1,width=500,height=550");return false}}})(jQuery);