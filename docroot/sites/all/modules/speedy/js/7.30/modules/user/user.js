(function(e){Drupal.behaviors.password={attach:function(t,n){var r=n.password;e("input.password-field",t).once("password",function(){var t=e(this),i=e(this).parent(),s=e(this).parent().parent();i.addClass("password-parent"),e("input.password-confirm",s).parent().prepend('<div class="password-confirm">'+r.confirmTitle+" <span></span></div>").addClass("confirm-parent");var o=e("input.password-confirm",s),u=e("div.password-confirm",s),a=e("span",u),f='<div class="password-strength"><div class="password-strength-text" aria-live="assertive"></div><div class="password-strength-title">'+r.strengthTitle+'</div><div class="password-indicator"><div class="indicator"></div></div></div>';e(o).parent().after('<div class="password-suggestions description"></div>'),e(i).prepend(f);var l=e("div.password-suggestions",s).hide(),c=function(){var r=Drupal.evaluatePasswordStrength(t.val(),n.password);l.html()!=r.message&&l.html(r.message),r.strength==100?l.hide():l.show(),e(i).find(".indicator").css("width",r.strength+"%"),e(i).find(".password-strength-text").html(r.indicatorText),h()},h=function(){if(o.val()){var e=t.val()===o.val();u.css({visibility:"visible"}),this.confirmClass&&a.removeClass(this.confirmClass);var n=e?"ok":"error";a.html(r["confirm"+(e?"Success":"Failure")]).addClass(n),this.confirmClass=n}else u.css({visibility:"hidden"})};t.keyup(c).focus(c).blur(c),o.keyup(h).blur(h)})}},Drupal.evaluatePasswordStrength=function(t,n){var r=0,i=100,s=[],o=/[a-z]+/.test(t),u=/[A-Z]+/.test(t),a=/[0-9]+/.test(t),f=/[^a-zA-Z0-9]+/.test(t),l=e("input.username"),c=l.length>0?l.val():n.username;t.length<6&&(s.push(n.tooShort),i-=(6-t.length)*5+30),o||(s.push(n.addLowerCase),r++),u||(s.push(n.addUpperCase),r++),a||(s.push(n.addNumbers),r++),f||(s.push(n.addPunctuation),r++);switch(r){case 1:i-=12.5;break;case 2:i-=25;break;case 3:i-=40;break;case 4:i-=40}return t!==""&&t.toLowerCase()===c.toLowerCase()&&(s.push(n.sameAsUsername),i=5),i<60?indicatorText=n.weak:i<70?indicatorText=n.fair:i<80?indicatorText=n.good:i<=100&&(indicatorText=n.strong),s=n.hasWeaknesses+"<ul><li>"+s.join("</li><li>")+"</li></ul>",{strength:i,message:s,indicatorText:indicatorText}},Drupal.behaviors.fieldUserRegistration={attach:function(t,n){var r=e("form#field-ui-field-edit-form input#edit-instance-settings-user-register-form");r.length&&e("input#edit-instance-required",t).once("user-register-form-checkbox",function(){e(this).bind("change",function(t){e(this).attr("checked")&&r.attr("checked",!0)})})}}})(jQuery);