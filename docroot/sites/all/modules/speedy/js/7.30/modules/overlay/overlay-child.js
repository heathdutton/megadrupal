(function($){Drupal.behaviors.overlayChild={attach:function(e,t){if(this.processed)return;this.processed=!0;if(!parent.Drupal||!parent.Drupal.overlay)window.location=window.location.href.replace(/([?&]?)render=overlay&?/g,"$1").replace(/\?$/,"");var t=t.overlayChild||{};t.refreshPage&&(parent.Drupal.overlay.refreshPage=!0);if(t.closeOverlay){parent.Drupal.overlay.bindChild(window,!0),setTimeout(function(){typeof t.redirect=="string"?parent.Drupal.overlay.redirect(t.redirect):parent.Drupal.overlay.close()},1);return}t.refreshRegions&&parent.Drupal.overlay.refreshRegions(t.refreshRegions),parent.Drupal.overlay.bindChild(window),window.scrollTo(window.scrollX,window.scrollY),Drupal.overlayChild.attachBehaviors(e,t),$("#overlay-disable-message",e).focusin(function(){$(this).addClass("overlay-disable-message-focused"),$("a.element-focusable",this).removeClass("element-invisible")}).focusout(function(){$(this).removeClass("overlay-disable-message-focused"),$("a.element-focusable",this).addClass("element-invisible")})}},Drupal.overlayChild=Drupal.overlayChild||{behaviors:{}},Drupal.overlayChild.prototype={},Drupal.overlayChild.attachBehaviors=function(e,t){$.each(this.behaviors,function(){this(e,t)})},Drupal.overlayChild.behaviors.addClickHandler=function(e,t){$(document).bind("click.drupal-overlay mouseup.drupal-overlay",$.proxy(parent.Drupal.overlay,"eventhandlerOverrideLink"))},Drupal.overlayChild.behaviors.parseForms=function(e,t){$("form",e).once("overlay",function(){var e=$(this).attr("action");e==undefined||e.indexOf("http")!=0&&e.indexOf("https")!=0?(e+=(e.indexOf("?")>-1?"&":"?")+"render=overlay",$(this).attr("action",e)):$(this).attr("target","_new")})},Drupal.overlayChild.behaviors.loading=function(e,t){var n,r=Drupal.t("Loading"),i="";$(document).bind("drupalOverlayBeforeLoad.drupal-overlay.drupal-overlay-child-loading",function(){n=$("#overlay-title").text(r);var e=setInterval(function(){i=i.length>10?"":i+".",n.text(r+i)},500)})},Drupal.overlayChild.behaviors.tabs=function(e,t){var n=$("#overlay-tabs > li > a");$("#overlay-tabs > li > a").bind("click.drupal-overlay",function(){var e=Drupal.t("(active tab)");n.parent().siblings().removeClass("active").find("element-invisible:contains("+e+")").appendTo(this),$(this).parent().addClass("active")})},Drupal.overlayChild.behaviors.shortcutAddLink=function(e,t){$("#overlay-titlebar").find(".add-or-remove-shortcuts").remove();var n=$(".add-or-remove-shortcuts");n.length&&n.insertAfter("#overlay-title"),$(document).bind("drupalOverlayBeforeLoad.drupal-overlay.drupal-overlay-child-loading",function(){$("#overlay-titlebar").find(".add-or-remove-shortcuts").remove()})},Drupal.overlayChild.behaviors.alterTableHeaderOffset=function(e,t){Drupal.settings.tableHeaderOffset&&(Drupal.overlayChild.prevTableHeaderOffset=Drupal.settings.tableHeaderOffset),Drupal.settings.tableHeaderOffset="Drupal.overlayChild.tableHeaderOffset"},Drupal.overlayChild.tableHeaderOffset=function(){var topOffset=Drupal.overlayChild.prevTableHeaderOffset?eval(Drupal.overlayChild.prevTableHeaderOffset+"()"):0;return topOffset+parseInt($(document.body).css("marginTop"))}})(jQuery);
