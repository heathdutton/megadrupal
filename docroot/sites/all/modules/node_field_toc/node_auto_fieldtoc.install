<?php

/**
 * @file
 * Installation file for node_auto_fieldtoc module.
 */

/**
 * Implements hook_uninstall().
 */
function node_auto_fieldtoc_uninstall() {
  // Get all variables from node_auto_fieldtoc
  // Getting variably named variables given that content types can change.
  // Using db_query() instead of db_select for this non-dynamic query per
  // Crell and his many convincing thread responses on this topic.
  $pattern = 'node_auto_fieldtoc%';
  $query = db_query("SELECT name from {variable} WHERE {variable}.name
    LIKE :name",
    array(':name' => $pattern)
  );

  while($row = $query->fetchAssoc()) {
    variable_del($row['name']);
  }

  drupal_set_message(t('Uninstalled Node Auto FieldTOC successfully.'));
}
