<?php

/**
 * @file
 * Code for the Views Mobile module.
 */


/**
 * Implementation of hook_views_pre_view().
 */
function views_mobile_views_pre_view(&$view, &$display_id, &$args) {
  // Change the display if in mobile device.
  $mob_display = $display_id . '_mobile';

  // Switch to the mobile display if present.
  $has_mobile = in_array($mob_display, array_keys($view->display));
  $detect = mobile_detect_get_object();
  if (!$detect->isMobile() || !$has_mobile) {
    return;
  }

  $view->set_display($display_id . '_mobile');
}
