<?php

/**
 * @file
 * Config UI
 *
 * @license GPL v2 http://www.fsf.org/licensing/licenses/gpl.html
 * @author Chris Skene chris at xtfer dot com
 * @copyright Copyright(c) 2015 Christopher Skene
 */


/**
 * Implements hook_menu().
 */
function config_ui_menu() {

  $menu = array();
  $menu['admin/config/development/config'] = array(
    'title' => 'Configuration API',
    'type' => MENU_NORMAL_ITEM,
    'page callback' => '\Drupal\\ghost\\Page\\PageController::createPage',
    'page arguments' => array(
      '\Drupal\\config_ui\\PageController\\ConfigViewer',
      'listAll',
    ),
    'access arguments' => array(CONFIG_PERM_ADMIN),
  );
  $menu['admin/config/development/config/view/%config_id'] = array(
    'title' => 'Configuration API',
    'type' => MENU_NORMAL_ITEM,
    'page callback' => '\Drupal\\ghost\\Page\\PageController::createPage',
    'page arguments' => array(
      '\Drupal\\config_ui\\PageController\\ConfigViewer',
      'view',
      5,
    ),
    'access arguments' => array(CONFIG_PERM_ADMIN),
  );

  return $menu;
}

/**
 * Load function for config_id.
 *
 * @param string $set_name
 *   Set to look for.
 *
 * @return array
 *   Array of setting or FALSE
 */
function config_id_load($set_name) {
//dpm($set_name);
  return \Drupal\config\ConfigManager\ConfigManager::create()->getSet(check_plain($set_name));
}
