<?php
// $Id: bing.module,v 1.1.2.1 2010/08/19 23:16:28 mfb Exp $

/**
 * Implements hook_menu().
 */
function bing_menu() {
  $items['admin/config/search/bing'] = array(
    'title' => 'Bing search',
    'description' => 'Configure settings for the Bing search tab.',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('bing_settings'),
    'access arguments' => array('administer Bing search'),
    'type' => MENU_NORMAL_ITEM,
    'file' => 'bing.admin.inc',
  );
  return $items;
}

/**
 * Implements hook_permission().
 */
function bing_permission() {
  return array(
    'use Bing search' => array(
      'title' => t('Use Bing search'),
    ),
    'use Bing advanced search' => array(
      'title' => t('Use Bing advanced search'),
    ),
    'administer Bing search' => array(
      'title' => t('Administer Bing search'),
    ),
  );
}

/**
 * Implements hook_search_access().
 */
function bing_search_access() {
  return user_access('use Bing search');
}

/**
 * Implements hook_search_info().
 */
function bing_search_info() {
  return array(
    'title' => variable_get('bing_title', 'Bing'),
  );
}

/**
 * Implements hook_search_execute().
 */
function bing_search_execute($keys = NULL, $conditions = NULL) {
  module_load_include('search.inc', 'bing');
  return bing_service($keys, $conditions);
}
