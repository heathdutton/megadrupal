<?php

function spotlight_install() {
    $defaults = array(
        'category' => array(
            'content' => 'content',
            'paths' => 'paths',
            'users' => 'users',
            'files' => 'files',
        ),

        'limit' => 3,
        'blank' => TRUE,
        'width' => '100%',
    );

    variable_set('spotlight_settings', $defaults);

    drupal_set_message("Spotlight has a " . l('configuration', 'admin/config/search/spotlight') . " page.");
}

function spotlight_uninstall() {
    variable_del('spotlight_settings');
}

function spotlight_schema() {
    $schema['spotlight_stats'] = array(
        'description' => t('Stores data about user searches.'),
        'fields' => array(
            'id' => array(
                'type' => 'serial',
                'unsigned' => TRUE,
                'not null' => TRUE),
            'uid' => array(
                'type' => 'int',
                'unsigned' => TRUE,
                'not null' => TRUE,
                'default' => 0),
            'keyword' => array(
                'type' => 'varchar',
                'length' => 255,
                'not null' => TRUE,
                'default' => ''),
            'path' => array(
                'type' => 'varchar',
                'length' => 255,
                'not null' => TRUE,
                'default' => ''),
            'title' => array(
                'type' => 'varchar',
                'length' => 255,
                'default' => ''),
            'icon' => array(
                'type' => 'varchar',
                'length' => 255,
                'default' => ''),
            'visits' => array(
                'type' => 'int',
                'unsigned' => TRUE,
                'not null' => TRUE,
                'default' => 1
            ),
         ),
        'indexes' => array(
            'uid' => array('uid'),
        ),
        'primary key' => array('id'),
    );

    return $schema;
}