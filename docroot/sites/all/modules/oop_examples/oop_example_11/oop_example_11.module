<?php

/**
 * @file
 * OOP Example 11 module.
 *
 * Dependency injection.
 */

// Declare class usage.
use Drupal\oop_example_11\BusinessLogic\Common\ColorInterface;
use Drupal\oop_example_11\BusinessLogic\Driver\Driver;
use Drupal\oop_example_11\BusinessLogic\Vehicle\Car\Toyota\ToyotaCamry;

/**
 * Implements hook_menu().
 */
function oop_example_11_menu() {
  return array(
    'oop-examples/oop-example-11' => array(
      'title' => '11 Dependency injection',
      'page callback' => 'oop_example_11_page',
      'access callback' => TRUE,
    ),
  );
}

/**
 * Page callback.
 */
function oop_example_11_page() {

  $v = new ToyotaCamry();
  $v->color = t('black');
  $message = $v->getDescription();
  $message .= '<br />';
  $message .= $v->getDoorsDescription();
  $message .= '<br />';

  $message .= _oop_example_11_color_output($v);
  $message .= '<br />';
  $message .= '<br />';

  $d = new Driver('John', $v);

  $directions1 = array(
    1,
    'Left',
    1.5,
  );

  $message .= $d->driveByDirections($directions1);
  $message .= '<br />';

  $directions2 = array(
    2,
    'Left',
    3.3,
    'Right',
    2.5,
  );

  $message .= $d->driveByDirections($directions2);

  return array(
    '#type' => 'markup',
    '#markup' => $message,
  );
}

/**
 * Returns color message.
 */
function _oop_example_11_color_output(ColorInterface $color_object) {
  $s = t('This object has color') . ' ' . $color_object->getColor() . '.';
  return $s;
}
