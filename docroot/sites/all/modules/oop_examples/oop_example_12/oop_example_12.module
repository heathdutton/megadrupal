<?php

/**
 * @file
 * OOP Example 12 module.
 *
 * ColorInterface.
 */

// Declare class usage.
use Drupal\oop_example_12\BusinessLogic\Common\ColorableFactory;
use Drupal\oop_example_12\BusinessLogic\Common\ColorInterface;

/**
 * Implements hook_menu().
 */
function oop_example_12_menu() {
  return array(
    'oop-examples/oop-example-12' => array(
      'title' => '12 Factory',
      'page callback' => 'oop_example_12_page',
      'access callback' => TRUE,
    ),
  );
}

/**
 * Page callback.
 */
function oop_example_12_page() {

  $cf = new ColorableFactory();

  $v1 = $cf->getColorable('Toyota Camry', 'black');
  $v2 = $cf->getColorable('Toyota Yaris', 'blue');

  $f1 = $cf->getColorable('Orange');
  $f2 = $cf->getColorable('Banana');

  $message = _oop_example_12_color_output($v1);
  $message .= '<br />';
  $message .= _oop_example_12_color_output($v2);
  $message .= '<br />';
  $message .= _oop_example_12_color_output($f1);
  $message .= '<br />';
  $message .= _oop_example_12_color_output($f2);
  $message .= '<br />';

  return array(
    '#type' => 'markup',
    '#markup' => $message,
  );
}

/**
 * Returns color message.
 */
function _oop_example_12_color_output(ColorInterface $color_object) {
  $s = t('This object has color') . ' ' . $color_object->getColor() . '.';
  return $s;
}
