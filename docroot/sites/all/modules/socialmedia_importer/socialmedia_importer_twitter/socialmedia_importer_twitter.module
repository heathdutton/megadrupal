<?php
/**
 * @file
 * Import Data from Social Media Twitter in JSON.
 */

/**
 * Implements hook_socialmedia_importer_application_info().
 */
function socialmedia_importer_twitter_socialmedia_importer_application_info() {
  $info = array(
    'twitter' => array(
      'class' => 'SocialMediaImporterTwitterApplication',
      'name' => 'Twitter',
      'description' => t("A Twitter Application is required to access 
          Twitter's API. Use your Application name, Consumer key and 
          Consumer secret to add an a Twitter Application. If you do not have
          a Twitter Application, you can create one at: !url.",
          array('!url' => l(t('https://dev.twitter.com/apps'), 'https://dev.twitter.com/apps'))),
    ),
  );
  return $info;
}

/**
 * Implements hook_menu_alter().
 */
function socialmedia_importer_twitter_form_alter(&$form, &$form_state, $form_id) {
  switch ($form_id) {
    case 'socialmedia_importer_ui_add_application_form';
      if ($form['provider']['#value'] == 'twitter') {
        $form['app_id']['#title'] = t('Consumer Key');
        $form['app_id']['#description'] = t('Enter the Consumer Key of your 
            Application. This can be found in the OAuth settings of your 
            Twitter Application Details page: !url.',
            array('!url' => l(t('https://dev.twitter.com/apps'), 'https://dev.twitter.com/apps')));

        $form['app_secret']['#title'] = t('Consumer Secret');
        $form['app_secret']['#description'] = t('Enter the Consumer Secret of 
            your Application. This can be found in the OAuth settings of your 
            Twitter Application Details page: !url.',
            array('!url' => l(t('https://dev.twitter.com/apps'), 'https://dev.twitter.com/apps')));
      }
      break;
  }
  return $form;
}

/**
 * Implements hook_help().
 */
function socialmedia_importer_twitter_help($path, $arg) {
  switch ($path) {
    case 'admin/help#socialmedia_importer_twitter':
      $module_path = $GLOBALS['base_url'] . '/' . drupal_get_path('module', 'socialmedia_importer_twitter');
      $output = '';
      $output .= '<h3>' . t('About') . '</h3>';
      $output .= '<p>' . t('Twitter Importer is a developer only module that integrate TwitterÂ´s
          API in Drupal.') . '</p>';
      $output .= '<h3>' . t('Uses') . '</h3>';
      $output .= '<dl>';
      $output .= '<p>' . t('This module allows you to authenticate with this API and
          use this authentication to Import Twitter Data in JSON') . '</p>';
      $output .= '<p>' . t("For more details read the
          <a href='@url'>README.txt</a> file in the Twitter Importer
          module directory.", array('@url' => "$module_path/README.txt")) . '</p>';
      return $output;
  }
}
