<?php
/**
 * @file
 * Provide structure for the administrative interface to Social Media Importer.
 */

/**
 * Implements hook_menu().
 */
function socialmedia_importer_ui_menu() {
  $items = array();
  // Application Menu.
  $items['admin/config/services/socialmedia_importer'] = array(
    'title' => 'Social Media Applications',
    'type' => MENU_NORMAL_ITEM,
    'description' => 'Review and manage Social Media Applications',
    'page callback' => 'socialmedia_importer_ui_applications',
    'access arguments' => array('administer social media applications'),
    'file' => 'socialmedia_importer_ui.pages.inc',
  );
  $items['admin/config/services/socialmedia_importer/applications'] = array(
    'title' => 'Social Media Applications',
    'type' => MENU_DEFAULT_LOCAL_TASK,
    'description' => 'Review and manage Social Media Applications',
    'page callback' => 'socialmedia_importer_ui_applications',
    'access arguments' => array('administer social media applications'),
    'weight' => 0,
    'file' => 'socialmedia_importer_ui.pages.inc',
  );
  $items['admin/config/services/socialmedia_importer/application/add'] = array(
    'title' => 'Add Social Media Application',
    'description' => 'Add a Social Media Application',
    'page callback' => 'socialmedia_importer_ui_add_application_page',
    'access arguments' => array('administer social media applications'),
    'weight' => 0,
    'file' => 'socialmedia_importer_ui.pages.inc',
    'type' => MENU_LOCAL_ACTION,
  );
  foreach (socialmedia_importer_get_application_providers_name_desc() as $provider) {
    $url_name = strtolower($provider['name']);
    $items['admin/config/services/socialmedia_importer/application/add/' . $url_name] = array(
      'title' => $provider['name'],
      'title callback' => 'check_plain',
      'page callback' => 'drupal_get_form',
      'page arguments' => array('socialmedia_importer_ui_add_application_form', $url_name),
      'access arguments' => array('administer social media applications'),
      'description' => $provider['description'],
      'file' => 'socialmedia_importer_ui.pages.inc',
    );
  }
  $items['admin/config/services/socialmedia_importer/application/%/edit'] = array(
    'title' => 'Edit Social Media Application',
    'type' => MENU_CALLBACK,
    'description' => 'Edit Social Media Application',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('socialmedia_importer_ui_add_application_form',
      NULL, 5),
    'access arguments' => array('administer social media applications'),
    'weight' => 10,
    'file' => 'socialmedia_importer_ui.pages.inc',
  );
  $items['admin/config/services/socialmedia_importer/application/%/delete'] = array(
    'title' => 'Delete Social Media Application',
    'type' => MENU_CALLBACK,
    'description' => 'Delete Social Media Application',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('socialmedia_importer_ui_delete_application_form', 5),
    'access arguments' => array('administer social media applications'),
    'weight' => 10,
    'file' => 'socialmedia_importer_ui.pages.inc',
  );
  $items['admin/config/services/socialmedia_importer/application/%/deauthorize'] = array(
    'title' => 'De-authorize Social Media Application',
    'type' => MENU_CALLBACK,
    'description' => 'De-authorize Social Media Application',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('socialmedia_importer_ui_deauthorize_application_form', 5),
    'access arguments' => array('administer social media applications'),
    'weight' => 10,
    'file' => 'socialmedia_importer_ui.pages.inc',
  );
  // Application Access Handling.
  $items['admin/config/services/socialmedia_importer/application/%/authorize'] = array(
    'title' => 'Application Access Handling',
    'type' => MENU_CALLBACK,
    'description' => 'Access Handling for Social Medial Applications',
    'page callback' => 'socialmedia_importer_ui_authorize_application',
    'page arguments' => array(5),
    'access arguments' => array('administer social media applications'),
    'weight' => 10,
    'file' => 'socialmedia_importer_ui.pages.inc',
  );
  // Application Access Handling.
  $items['socialmedia_importer/response_handler'] = array(
    'title' => 'Application Access Handling',
    'type' => MENU_CALLBACK,
    'description' => 'Access Handling for Social Medial Applications',
    'page callback' => 'socialmedia_importer_ui_authorize_application',
    'access callback' => TRUE,
    'weight' => 10,
    'file' => 'socialmedia_importer_ui.pages.inc',
  );
  return $items;
}

/**
 * Implements hook_theme().
 */
function socialmedia_importer_ui_theme() {
  return array(
    'application_add_list' => array(
      'variables' => array('content' => NULL),
      'file' => 'socialmedia_importer_ui.pages.inc',
    ),
  );
}
