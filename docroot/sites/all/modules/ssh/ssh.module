<?php
/**
 * @file
 * Module functions for ssh module.
 */

define('SSH_ADMIN_PERMISSION', 'administer ssh');
define('SSH_INFO_PERMISSION', 'get ssh messages');

/**
 * Implements hook_menu().
 */
function ssh_menu() {
  return array(
    'admin/config/system/ssh' => array(
      'title' => t('SSH'),
      'description' => t('Configure SSH settings'),
      'page callback' => 'drupal_get_form',
      'page arguments' => array('ssh_settings'),
      'access arguments' => array(SSH_ADMIN_PERMISSION),
      'file' => 'ssh.admin.inc',
      'type' => MENU_NORMAL_ITEM,
    ),
    'admin/config/system/ssh/settings' => array(
      'title' => t('Settings'),
      'description' => t('Configure SSH settings'),
      'type' => MENU_DEFAULT_LOCAL_TASK,
      'weight' => -1,
    ),
    'admin/config/system/ssh/hosts' => array(
      'title' => t('Hosts'),
      'description' => t('Pre-define SSH remote hosts'),
      'page callback' => 'drupal_get_form',
      'page arguments' => array('ssh_hosts'),
      'access arguments' => array(SSH_ADMIN_PERMISSION),
      'file' => 'ssh.admin.inc',
      'type' => MENU_LOCAL_TASK,
    ),
  );
}

/**
 * Implements hook_permission().
 */
function ssh_permission() {
  return array(
    SSH_ADMIN_PERMISSION => array(
      'title' => t('Administer SHH'),
      'description' => t('Configure SSH parameters and remote hosts'),
      'restrict access' => TRUE,
    ),
    SSH_INFO_PERMISSION => array(
      'title' => t('Get SHH statuses'),
      'description' => t('See SSH related system messages, e. g. which operation was performed and whether it was successful.'),
    ),
  );
}
