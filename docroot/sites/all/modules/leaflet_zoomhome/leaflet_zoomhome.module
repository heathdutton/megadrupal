<?php

/**
 * @file
 * Module file for Leaflet: Zoom home.
 */

/**
 * Implements hook_libraries_info().
 */
function leaflet_zoomhome_libraries_info() {
  $libraries['leaflet_zoomhome'] = [
    // Only used in administrative UI of Libraries API.
    'name' => 'Leaflet Zoom home',
    'vendor url' => 'https://torfsen.github.io/leaflet.zoomhome',
    'download url' => 'https://github.com/torfsen/leaflet.zoomhome/archive/master.zip',
    'version callback' => 'leaflet_zoomhome_libraries_info_version',
    'path' => 'dist',
    'files' => [
      'js' => [
        'leaflet.zoomhome.min.js' => [
          'type' => 'file',
          'group' => JS_LIBRARY,
          'preprocess' => FALSE,
          'weight' => 1,
        ],
      ],
      'css' => [
        'leaflet.zoomhome.css',
      ],
    ],
    'integration files' => [
      'leaflet_zoomhome' => [
        'js' => [
          'leaflet_zoomhome.drupal.js',
        ],
      ],
    ],
  ];

  return $libraries;
}

/**
 * Libraries info version callback for module.
 */
function leaflet_zoomhome_libraries_info_version() {
  // Since the plugin does not contains version information just return TRUE.
  return TRUE;
}

/**
 * Implements hook_leaflet_build_map_alter().
 */
function leaflet_zoomhome_leaflet_build_map_alter(&$build) {
  // Load Leaflet: Zoom home library.
  libraries_load('leaflet_zoomhome');
}

/**
 * Implements hook_leaflet_map_prebuild_alter().
 */
function leaflet_zoomhome_leaflet_map_prebuild_alter(&$settings) {
  // Disable default zoom controls.
  $settings['map']['settings']['zoomControl'] = FALSE;
}
