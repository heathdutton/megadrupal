<?php
/**
 * @file
 * Modules install hooks.
 */

/**
 * Implements hook_schema().
 */
function views_result_once_schema() {
  $schema = array();
  $schema['views_result_once'] = array(
    'description' => 'The base table for views_result_once log.',
    'fields' => array(
      'rid' => array(
        'description' => 'The primary identifier for a result.',
        'type' => 'int',
        'unsigned' => TRUE,
        'not null' => TRUE,
      ),
      'view_name' => array(
        'type' => 'varchar',
        // View name(32) + :(1) + display id(64).
        'length' => '97',
        'default' => '',
        'not null' => TRUE,
        'description' => 'The unique name of the view. This is the primary field views are loaded from, and is used so that views may be internal and not necessarily in the database. May only be alphanumeric characters plus underscores.',
      ),
      'sid' => array(
        'description' => 'The primary identifier for subscription id ({views_result_once_subscriptions}.sid).',
        'type' => 'int',
        'unsigned' => TRUE,
        'not null' => TRUE,
        'default' => 0,
      ),
      'created' => array(
        'description' => 'The Unix timestamp when the log was created.',
        'type' => 'int',
        'not null' => TRUE,
        'default' => 0,
      ),
    ),
    'indexes' => array(
      'fast_joint' => array('rid', 'view_name', 'sid'),
      'sid' => array('sid'),
    ),
  );

  return $schema;
}
