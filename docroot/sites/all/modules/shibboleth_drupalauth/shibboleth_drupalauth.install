<?php

/**
 * Implements hook_install().
 */
function shibboleth_drupalauth_install() {
  $settings = array(
    'cookiename' => 'drupalauth',
    'cookiedomain' => 'example.com',
    'cookieexpire' => 0,
    'cookiepath' => '/',
    'servers' => array(
      'any' => array(
        'ip' => 'any',
        'idpurl' => 'https://idp.example.com/idp/Authn/DrupalAuth',
        'principal' => 'username',
      ),
    ),
  );
  variable_set('shibboelth_drupalauth_settings', $settings);
}

/**
 *  Implements hook_update_N().
 *  Updates settings array
 */
function shibboleth_drupalauth_update_7000() {
  $settings = variable_get('shibboelth_drupalauth_settings', array());

  $settings['servers'] = array('any' => array(
    'ip' => 'any',
    'principal' => 'emailuser',
    'idpurl' => $settings['idpurl'],
  ));
  unset($settings['idpurl']);
  variable_set('shibboelth_drupalauth_settings', $settings);
}
