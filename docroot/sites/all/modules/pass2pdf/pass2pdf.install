<?php

/*
 * Implements hook_requirements().
 */

function pass2pdf_requirements($phase) {
  $t = get_t();
  $requirements = array();
  if ($phase == 'runtime') {
    $path_fpdf = pass2pdf_get_library('fpdf');
    if (!file_exists($path_fpdf)) {
      $requirements['pass2pdf_fpdf'] = array(
        'title' => $t('pass2pdf - FPDF library'),
        'value' => $t('Not present'),
        'description' => $t('The FPDF library is needed for pass2pdf. Please download it at @fpdf-url and extract it to @location', array('@fpdf-url' => url('http://www.fpdf.org/en/download.php'), '@location' => $path_fpdf)),
        'severity' => REQUIREMENT_ERROR,
      );
    }
    else {
      $requirements['pass2pdf_fpdf'] = array(
        'title' => $t('pass2pdf - FPDF library'),
        'severity' => REQUIREMENT_OK,
        'value' => $t('Present'),
        'description' => '',
      );
    }
    return $requirements;
  }
}
