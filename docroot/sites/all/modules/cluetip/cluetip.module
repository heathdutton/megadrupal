<?php

/**
 * @file
 * A wrapper for the cluetip jquery plugin
 */

define('CLUETIP_MIN_PLUGIN_VERSION', '1.0.7');

/**
 * Implements hook_help().
 */
function cluetip_help($path, $arg) {
  $output = '';
  switch ($path) {
    case 'admin/config/modules#description':
      $output .= t('This module will include the cluetip library in drupal.');
      break;
  }
  return $output;
}


/**
 * Implements hook_menu().
 */
function cluetip_menu() {
  $items['admin/config/user-interface/cluetip'] = array(
    'title' => 'Cluetip',
    'description' => 'Configure Cluetip.',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('cluetip_admin_settings'),
    'access arguments' => array('administer site configuration'),
    'file' => 'cluetip.admin.inc',
  );

  return $items;
}

/**
 *  Implements hook_libraries_info().
*/
function cluetip_libraries_info() {
  $libraries['cluetip'] = array(
    'title' => 'Cluetips',
    'website' => 'http://plugins.learningjquery.com/cluetip/',
    'version' => '1.2.10',
    'files' => array(
      'css' => array(
        'jquery.cluetip.css',
      ),
      'js' => array(
        'lib/jquery.hoverIntent.js',
        'lib/jquery.bgiframe.js',
        'jquery.cluetip.js',
      ),
    ),
  );

  return $libraries;
}

/**
 * Implements hook_preprocess_page().
 */
function cluetip_preprocess_page(&$vars) {
  //loading on every page can participate in aggregation
  if(variable_get('cluetip_every_page', 1)){ 
    libraries_load('cluetip');
  }
  drupal_add_js(array('cluetip' => array(
      'themeClass' => variable_get('cluetip_theme_class', 'rounded'))), 'setting');
}
