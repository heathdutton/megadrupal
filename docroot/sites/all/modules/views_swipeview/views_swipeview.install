<?php
/**
 * @file
 * Ensure the module installs, uninstalls and verifies requirements.
 */

/**
 * Implements hook_requirements().
 */
function views_swipeview_requirements($phase) {
  $requirements = array();
  if ($phase == 'runtime') {
    $success_description = t('The SwipeView library was found.');
    $fail_description = t('The SwipeView library could not be located. Please download the SwipeView library and place it in "sites/all/libraries/swipeview/swipeview.js".');
    $library = drupal_get_library('views_swipeview', 'swipeview');
    $lib_found = count($library['js']) == 2;
    $requirements['views_swipeview'] = array(
      'title' => t('jQuery SwipeView Library'),
      'severity' => $lib_found ? REQUIREMENT_OK : REQUIREMENT_WARNING,
      'version' => '1.0',
      'description' => $lib_found ? $success_description : $fail_description,
    );
  }
  return $requirements;
}
