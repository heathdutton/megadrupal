<?php
/**
 * @file
 * Test file for LiveInternet module.
 */

/**
 * Test basic counter code functionality of LiveInternet module.
 *
 * @see DrupalWebTestCase
 */
class LiveInternetBasicTest extends DrupalWebTestCase {

  /**
   * Give display information to the SimpleTest system.
   */
  public static function getInfo() {
    return array(
      'name' => 'LiveInternet basic test',
      'description' => 'Test basic counter code functionality of LiveInternet module.',
      'group' => 'LiveInternet',
    );
  }

  /**
   * Set up the test environment.
   */
  public function setUp() {

    parent::setUp('liveinternet');

    $permissions = array(
      'administer blocks',
      'administer liveinternet',
    );

    $this->privileged_user = $this->drupalCreateUser($permissions);

    $this->drupalLogin($this->privileged_user);

    $block = array();

    // Place "LiveInternet counter" block to "Sidebar second" region.
    $block['blocks[liveinternet_liveinternet][region]'] = 'sidebar_second';

    $this->drupalPost('admin/structure/block', $block, t('Save blocks'));

  }

  /**
   * Test for default counter code.
   */
  public function testLiveInternetOneImageType1() {

    $this->DrupalGet('<front>');

    $counter = <<<ONE_IMAGE_TYPE1
<script type="text/javascript"><!--
document.write("<a href='http://www.liveinternet.ru/click' "+
"target=_blank><img src='//counter.yadro.ru/hit?t52.1;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random()+
"' alt='' title='LiveInternet: number of pageviews and visitors"+
" for 24 hours is shown' "+
"border='0' width='88' height='31'><\/a>")
//--></script>
ONE_IMAGE_TYPE1;

    $this->assertRaw($counter, 'Default counter code in form of one image is found.');

  }

  /**
   * Test for counter in form of one image with type 2.
   */
  public function testLiveInternetOneImageType2() {

    variable_set('liveinternet_id', 11);
    $this->DrupalGet('<front>');

    $counter = <<<ONE_IMAGE_TYPE2
<script type="text/javascript"><!--
document.write("<a href='http://www.liveinternet.ru/click' "+
"target=_blank><img src='//counter.yadro.ru/hit?t11.1;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random()+
"' alt='' title='LiveInternet: number of pageviews for 24 hours,"+
" of visitors for 24 hours and for today is shown' "+
"border='0' width='88' height='31'><\/a>")
//--></script>
ONE_IMAGE_TYPE2;

    $this->assertRaw($counter, 'Counter code in form of one image with type 2 is found.');

  }

  /**
   * Test for counter in form of one image with type 3.
   */
  public function testLiveInternetOneImageType3() {

    variable_set('liveinternet_id', 57);
    $this->DrupalGet('<front>');

    $counter = <<<ONE_IMAGE_TYPE3
<script type="text/javascript"><!--
document.write("<a href='http://www.liveinternet.ru/click' "+
"target=_blank><img src='//counter.yadro.ru/hit?t57.1;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random()+
"' alt='' title='LiveInternet' "+
"border='0' width='88' height='31'><\/a>")
//--></script>
ONE_IMAGE_TYPE3;

    $this->assertRaw($counter, 'Counter code in form of one image with type 3 is found.');

  }

  /**
   * Test for counter in form of one image with type 4.
   */
  public function testLiveInternetOneImageType4() {

    variable_set('liveinternet_id', 23);
    $this->DrupalGet('<front>');

    $counter = <<<ONE_IMAGE_TYPE4
<script type="text/javascript"><!--
document.write("<a href='http://www.liveinternet.ru/click' "+
"target=_blank><img src='//counter.yadro.ru/hit?t23.1;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random()+
"' alt='' title='LiveInternet: number of visitors for today is"+
" shown' "+
"border='0' width='88' height='15'><\/a>")
//--></script>
ONE_IMAGE_TYPE4;

    $this->assertRaw($counter, 'Counter code in form of one image with type 4 is found.');

  }

  /**
   * Test for counter in form of one image with type 5.
   */
  public function testLiveInternetOneImageType5() {

    variable_set('liveinternet_id', 38);
    $this->DrupalGet('<front>');

    $counter = <<<ONE_IMAGE_TYPE5
<script type="text/javascript"><!--
document.write("<a href='http://www.liveinternet.ru/click' "+
"target=_blank><img src='//counter.yadro.ru/hit?t38.1;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random()+
"' alt='' title='LiveInternet' "+
"border='0' width='31' height='31'><\/a>")
//--></script>
ONE_IMAGE_TYPE5;

    $this->assertRaw($counter, 'Counter code in form of one image with type 5 is found.');

  }

  /**
   * Test for counter in form of one image with type 6.
   */
  public function testLiveInternetOneImageType6() {

    variable_set('liveinternet_id', 27);
    $this->DrupalGet('<front>');

    $counter = <<<ONE_IMAGE_TYPE6
<script type="text/javascript"><!--
document.write("<a href='http://www.liveinternet.ru/click' "+
"target=_blank><img src='//counter.yadro.ru/hit?t27.1;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random()+
"' alt='' title='LiveInternet: number of visitors and pageviews"+
" is shown' "+
"border='0' width='88' height='120'><\/a>")
//--></script>
ONE_IMAGE_TYPE6;

    $this->assertRaw($counter, 'Counter code in form of one image with type 6 is found.');

  }

  /**
   * Test for counter in form of one image with color scheme 2.
   */
  public function testLiveInternetOneImageColorScheme() {

    variable_set('liveinternet_color', 2);
    $this->DrupalGet('<front>');

    $counter = <<<ONE_IMAGE_COLOR_SCHEME
<script type="text/javascript"><!--
document.write("<a href='http://www.liveinternet.ru/click' "+
"target=_blank><img src='//counter.yadro.ru/hit?t52.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random()+
"' alt='' title='LiveInternet: number of pageviews and visitors"+
" for 24 hours is shown' "+
"border='0' width='88' height='31'><\/a>")
//--></script>
ONE_IMAGE_COLOR_SCHEME;

    $this->assertRaw($counter, 'Counter code in form of one image with color scheme 2 is found.');

  }

  /**
   * Test for counter in form of one image in one line.
   */
  public function testLiveInternetOneImageInOneLine() {

    variable_set('liveinternet_html_line', 1);
    $this->DrupalGet('<front>');

    $counter = <<<ONE_IMAGE_IN_ONE_LINE
<script type="text/javascript">document.write("<a href='http://www.liveinternet.ru/click' target=_blank><img src='//counter.yadro.ru/hit?t52.1;r" + escape(document.referrer) + ((typeof(screen)=="undefined")?"":";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?screen.colorDepth:screen.pixelDepth)) + ";u" + escape(document.URL) + ";" + Math.random() + "' border=0 width=88 height=31 alt='' title='LiveInternet: number of pageviews and visitors for 24 hours is shown'><\/a>")</script>
ONE_IMAGE_IN_ONE_LINE;

    $this->assertRaw($counter, 'Counter code in form of one image in one line is found.');

  }

  /**
   * Test for counter in form of one image with page titles tracking.
   */
  public function testLiveInternetOneImagePageTitles() {

    variable_set('liveinternet_page_titles', 1);
    $this->DrupalGet('<front>');

    $counter = <<<ONE_IMAGE_PAGE_TITLES
<script type="text/javascript"><!--
document.write("<a href='http://www.liveinternet.ru/click' "+
"target=_blank><img src='//counter.yadro.ru/hit?t52.1;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' alt='' title='LiveInternet: number of pageviews and visitors"+
" for 24 hours is shown' "+
"border='0' width='88' height='31'><\/a>")
//--></script>
ONE_IMAGE_PAGE_TITLES;

    $this->assertRaw($counter, 'Counter code in form of one image with with page titles tracking is found.');

  }

  /**
   * Test for counter in form of one image in one line.
   *
   * With page titles tracking.
   */
  public function testLiveInternetOneImageInOneLinePageTitles() {

    variable_set('liveinternet_html_line', 1);
    variable_set('liveinternet_page_titles', 1);
    $this->DrupalGet('<front>');

    $counter = <<<ONE_IMAGE_IN_ONE_LINE_PAGE_TITLES
<script type="text/javascript">document.write("<a href='http://www.liveinternet.ru/click' target=_blank><img src='//counter.yadro.ru/hit?t52.1;r" + escape(document.referrer) + ((typeof(screen)=="undefined")?"":";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?screen.colorDepth:screen.pixelDepth)) + ";u" + escape(document.URL) +";h"+escape(document.title.substring(0,80)) + ";" + Math.random() + "' border=0 width=88 height=31 alt='' title='LiveInternet: number of pageviews and visitors for 24 hours is shown'><\/a>")</script>
ONE_IMAGE_IN_ONE_LINE_PAGE_TITLES;

    $this->assertRaw($counter, 'Counter code in form of one image in one line with page titles tracking is found.');

  }

  /**
   * Test for default counter in form of two images.
   */
  public function testLiveInternetTwoImagesType1() {

    variable_set('liveinternet_style', 1);
    $this->DrupalGet('<front>');

    $counter = <<<TWO_IMAGES_DEFALUT
<div class="region region-page-top">
    <script type="text/javascript"><!--
new Image().src = "//counter.yadro.ru/hit?r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random();//--></script>
TWO_IMAGES_DEFALUT;

    $this->assertRaw($counter, 'Default JavaScript counter code in form of two images is found.');

    $image = '<a href="http://www.liveinternet.ru/click" target="_blank"><img border="0" typeof="foaf:Image" src="//counter.yadro.ru/logo?52.1" width="88" height="31" title="LiveInternet: number of pageviews and visitors for 24 hours is shown" /></a>';

    $this->assertRaw($image, 'Image for default counter in form of two images is found.');

  }

  /**
   * Test for counter in form of two images with color scheme 9.
   */
  public function testLiveInternetTwoImagesColorScheme() {

    variable_set('liveinternet_style', 1);
    variable_set('liveinternet_color', 9);
    $this->DrupalGet('<front>');

    $counter = <<<TWO_IMAGES_COLOR_SCHEME
<script type="text/javascript"><!--
new Image().src = "//counter.yadro.ru/hit?r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random();//--></script>
TWO_IMAGES_COLOR_SCHEME;

    $this->assertRaw($counter, 'JavaScript counter code in form of two images with color scheme 9 is found.');

    $image = '<a href="http://www.liveinternet.ru/click" target="_blank"><img border="0" typeof="foaf:Image" src="//counter.yadro.ru/logo?52.9" width="88" height="31" title="LiveInternet: number of pageviews and visitors for 24 hours is shown" /></a>';

    $this->assertRaw($image, 'Image for counter in form of two images with color scheme 9 is found.');

  }

  /**
   * Test for default counter in form of two images.
   *
   * JavaScript score is before </body> tag.
   */
  public function testLiveInternetTwoImagesBeforeBody() {

    variable_set('liveinternet_style', 1);
    variable_set('liveinternet_js_scope', 1);
    $this->DrupalGet('<front>');

    $counter = <<<TWO_IMAGES_BEFORE_BODY
<div class="region region-page-bottom">
    <script type="text/javascript"><!--
new Image().src = "//counter.yadro.ru/hit?r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random();//--></script>
TWO_IMAGES_BEFORE_BODY;

    $this->assertRaw($counter, 'Default JavaScript counter code (before </body> tag) in form of two images is found.');

    $image = '<a href="http://www.liveinternet.ru/click" target="_blank"><img border="0" typeof="foaf:Image" src="//counter.yadro.ru/logo?52.1" width="88" height="31" title="LiveInternet: number of pageviews and visitors for 24 hours is shown" /></a>';

    $this->assertRaw($image, 'Image for counter (before </body> tag) in form of two images is found.');

  }

  /**
   * Test for counter in form of two images in one line.
   */
  public function testLiveInternetTwoImagesInOneLine() {

    variable_set('liveinternet_style', 1);
    variable_set('liveinternet_html_line', 1);
    $this->DrupalGet('<front>');

    $counter = <<<TWO_IMAGES_IN_ONE_LINE
<script type="text/javascript">new Image().src = "//counter.yadro.ru/hit?r" + escape(document.referrer) + ((typeof(screen)=="undefined")?"" : ";s"+screen.width+"*"+screen.height+"*" + (screen.colorDepth?screen.colorDepth:screen.pixelDepth)) + ";u"+escape(document.URL) +  ";" +Math.random();</script>
TWO_IMAGES_IN_ONE_LINE;

    $this->assertRaw($counter, 'Counter code in form of two images in one line is found.');

    $image = '<a href="http://www.liveinternet.ru/click" target="_blank"><img border="0" typeof="foaf:Image" src="//counter.yadro.ru/logo?52.1" width="88" height="31" title="LiveInternet: number of pageviews and visitors for 24 hours is shown" /></a>';

    $this->assertRaw($image, 'Image for counter in form of two images in one line is found.');

  }

  /**
   * Test for counter in form of two images with page titles tracking.
   */
  public function testLiveInternetTwoImagesPageTitles() {

    variable_set('liveinternet_style', 1);
    variable_set('liveinternet_page_titles', 1);
    $this->DrupalGet('<front>');

    $counter = <<<TWO_IMAGES_PAGE_TITLES
<script type="text/javascript"><!--
new Image().src = "//counter.yadro.ru/hit?r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+
";"+Math.random();//--></script>
TWO_IMAGES_PAGE_TITLES;

    $this->assertRaw($counter, 'Counter code in form of two images with page titles tracking is found.');

    $image = '<a href="http://www.liveinternet.ru/click" target="_blank"><img border="0" typeof="foaf:Image" src="//counter.yadro.ru/logo?52.1" width="88" height="31" title="LiveInternet: number of pageviews and visitors for 24 hours is shown" /></a>';

    $this->assertRaw($image, 'Image for counter in form of two images with page titles tracking is found.');

  }

  /**
   * Test for counter in form of two images.
   *
   * In one line with page titles tracking.
   */
  public function testLiveInternetTwoImagesInOneLinePageTitles() {

    variable_set('liveinternet_style', 1);
    variable_set('liveinternet_html_line', 1);
    variable_set('liveinternet_page_titles', 1);
    $this->DrupalGet('<front>');

    $counter = <<<TWO_IMAGES_IN_ONE_LINE_PAGE_TITLES
<script type="text/javascript">new Image().src = "//counter.yadro.ru/hit?r" + escape(document.referrer) + ((typeof(screen)=="undefined")?"" : ";s"+screen.width+"*"+screen.height+"*" + (screen.colorDepth?screen.colorDepth:screen.pixelDepth)) + ";u"+escape(document.URL) +  ";h"+escape(document.title.substring(0,80)) + ";" +Math.random();</script>
TWO_IMAGES_IN_ONE_LINE_PAGE_TITLES;

    $this->assertRaw($counter, 'Counter code in form of two images in one line with page titles tracking is found.');

    $image = '<a href="http://www.liveinternet.ru/click" target="_blank"><img border="0" typeof="foaf:Image" src="//counter.yadro.ru/logo?52.1" width="88" height="31" title="LiveInternet: number of pageviews and visitors for 24 hours is shown" /></a>';

    $this->assertRaw($image, 'Image for counter in form of two images in one line with page titles tracking is found.');

  }

}

/**
 * Test group sites tracking functionality of LiveInternet module.
 *
 * @see DrupalWebTestCase
 */
class LiveInternetGroupcTest extends DrupalWebTestCase {

  /**
   * Give display information to the SimpleTest system.
   */
  public static function getInfo() {
    return array(
      'name' => 'LiveInternet group test',
      'description' => 'Test group sites tracking functionality of LiveInternet module.',
      'group' => 'LiveInternet',
    );
  }

  /**
   * Set up the test environment.
   */
  public function setUp() {

    parent::setUp('liveinternet');

    $permissions = array(
      'administer blocks',
      'administer liveinternet',
    );

    $this->privileged_user = $this->drupalCreateUser($permissions);

    $this->drupalLogin($this->privileged_user);

    $block = array();

    // Place "LiveInternet counter" block to "Sidebar second" region.
    $block['blocks[liveinternet_liveinternet][region]'] = 'sidebar_second';

    $this->drupalPost('admin/structure/block', $block, t('Save blocks'));

    // Set the group name.
    variable_set('liveinternet_group', '11Example-_com');

  }

  /**
   * Test for default group counter code.
   */
  public function testLiveInternetGroupOneImage() {

    $this->DrupalGet('<front>');

    $counter = <<<GROUP_ONE_IMAGE
<script type="text/javascript"><!--
document.write("<a href='http://www.liveinternet.ru/click;11Example-_com' "+
"target=_blank><img src='//counter.yadro.ru/hit;11Example-_com?t52.1;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random()+
"' alt='' title='LiveInternet: number of pageviews and visitors"+
" for 24 hours is shown' "+
"border='0' width='88' height='31'><\/a>")
//--></script>
GROUP_ONE_IMAGE;

    $this->assertRaw($counter, 'Default group counter code in form of one image is found.');

  }

  /**
   * Test for group counter code in one line.
   */
  public function testLiveInternetGroupOneImageInOneLine() {

    variable_set('liveinternet_html_line', 1);
    $this->DrupalGet('<front>');

    $counter = <<<GROUP_ONE_IMAGE_IN_ONE_LINE
<script type="text/javascript">document.write("<a href='http://www.liveinternet.ru/click;11Example-_com' target=_blank><img src='//counter.yadro.ru/hit;11Example-_com?t52.1;r" + escape(document.referrer) + ((typeof(screen)=="undefined")?"":";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?screen.colorDepth:screen.pixelDepth)) + ";u" + escape(document.URL) + ";" + Math.random() + "' border=0 width=88 height=31 alt='' title='LiveInternet: number of pageviews and visitors for 24 hours is shown'><\/a>")</script>
GROUP_ONE_IMAGE_IN_ONE_LINE;

    $this->assertRaw($counter, 'Group counter code in form of one image in one line is found.');

  }

  /**
   * Test for group counter code with page titles tracking.
   */
  public function testLiveInternetGroupOneImagePageTitles() {

    variable_set('liveinternet_page_titles', 1);
    $this->DrupalGet('<front>');

    $counter = <<<GROUP_ONE_IMAGE_PAGE_TITLES
<script type="text/javascript"><!--
document.write("<a href='http://www.liveinternet.ru/click;11Example-_com' "+
"target=_blank><img src='//counter.yadro.ru/hit;11Example-_com?t52.1;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' alt='' title='LiveInternet: number of pageviews and visitors"+
" for 24 hours is shown' "+
"border='0' width='88' height='31'><\/a>")
//--></script>
GROUP_ONE_IMAGE_PAGE_TITLES;

    $this->assertRaw($counter, 'Group counter code in form of one image with page titles tracking is found.');

  }

  /**
   * Test for group counter code in one line with page titles tracking.
   */
  public function testLiveInternetGroupOneImageInOneLinePageTitles() {

    variable_set('liveinternet_html_line', 1);
    variable_set('liveinternet_page_titles', 1);
    $this->DrupalGet('<front>');

    $counter = <<<GROUP_ONE_IMAGE_IN_ONE_LINE_PAGE_TITLES
<script type="text/javascript">document.write("<a href='http://www.liveinternet.ru/click;11Example-_com' target=_blank><img src='//counter.yadro.ru/hit;11Example-_com?t52.1;r" + escape(document.referrer) + ((typeof(screen)=="undefined")?"":";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?screen.colorDepth:screen.pixelDepth)) + ";u" + escape(document.URL) +";h"+escape(document.title.substring(0,80)) + ";" + Math.random() + "' border=0 width=88 height=31 alt='' title='LiveInternet: number of pageviews and visitors for 24 hours is shown'><\/a>")</script>
GROUP_ONE_IMAGE_IN_ONE_LINE_PAGE_TITLES;

    $this->assertRaw($counter, 'Group counter code in form of one image in one line with page title tracking is found.');

  }

  /**
   * Test for group counter in form of two images.
   */
  public function testLiveInternetGroupTwoImages() {

    variable_set('liveinternet_style', 1);
    $this->DrupalGet('<front>');

    $counter = <<<GROUP_TWO_IMAGES
<script type="text/javascript"><!--
new Image().src = "//counter.yadro.ru/hit;11Example-_com?r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random();//--></script>
GROUP_TWO_IMAGES;

    $this->assertRaw($counter, 'Group counter code in form of two images is found.');

    $image = '<a href="http://www.liveinternet.ru/click;11Example-_com" target="_blank"><img border="0" typeof="foaf:Image" src="//counter.yadro.ru/logo;11Example-_com?52.1" width="88" height="31" title="LiveInternet: number of pageviews and visitors for 24 hours is shown" /></a>';

    $this->assertRaw($image, 'Image for group counter in form of two images is found.');

  }

  /**
   * Test for group counter in form of two images in one line.
   */
  public function testLiveInternetGroupTwoImagesInOneLine() {

    variable_set('liveinternet_style', 1);
    variable_set('liveinternet_html_line', 1);
    $this->DrupalGet('<front>');

    $counter = <<<GROUP_TWO_IMAGES_IN_ONE_LINE
<script type="text/javascript">new Image().src = "//counter.yadro.ru/hit;11Example-_com?r" + escape(document.referrer) + ((typeof(screen)=="undefined")?"" : ";s"+screen.width+"*"+screen.height+"*" + (screen.colorDepth?screen.colorDepth:screen.pixelDepth)) + ";u"+escape(document.URL) +  ";" +Math.random();</script>
GROUP_TWO_IMAGES_IN_ONE_LINE;

    $this->assertRaw($counter, 'Group counter code in form of two images in one line is found.');

    $image = '<a href="http://www.liveinternet.ru/click;11Example-_com" target="_blank"><img border="0" typeof="foaf:Image" src="//counter.yadro.ru/logo;11Example-_com?52.1" width="88" height="31" title="LiveInternet: number of pageviews and visitors for 24 hours is shown" /></a>';

    $this->assertRaw($image, 'Image for group counter in form of two images in one line is found.');

  }

  /**
   * Test for group counter in form of two images with page titles tracking.
   */
  public function testLiveInternetGroupTwoImagesPageTitles() {

    variable_set('liveinternet_style', 1);
    variable_set('liveinternet_page_titles', 1);
    $this->DrupalGet('<front>');

    $counter = <<<GROUP_TWO_IMAGES_PAGE_TITLES
<script type="text/javascript"><!--
new Image().src = "//counter.yadro.ru/hit;11Example-_com?r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+
";"+Math.random();//--></script>
GROUP_TWO_IMAGES_PAGE_TITLES;

    $this->assertRaw($counter, 'Group counter code in form of two images with page titles tracking is found.');

    $image = '<a href="http://www.liveinternet.ru/click;11Example-_com" target="_blank"><img border="0" typeof="foaf:Image" src="//counter.yadro.ru/logo;11Example-_com?52.1" width="88" height="31" title="LiveInternet: number of pageviews and visitors for 24 hours is shown" /></a>';

    $this->assertRaw($image, 'Image for group counter in form of two images with page titles tracking is found.');

  }

  /**
   * Test for group counter in form of two images.
   *
   * In one with page titles tracking.
   */
  public function testLiveInternetGroupTwoImagesInOneLinePageTitles() {

    variable_set('liveinternet_style', 1);
    variable_set('liveinternet_html_line', 1);
    variable_set('liveinternet_page_titles', 1);
    $this->DrupalGet('<front>');

    $counter = <<<GROUP_TWO_IMAGES_IN_ONE_LINE_PAGE_TITLES
<script type="text/javascript">new Image().src = "//counter.yadro.ru/hit;11Example-_com?r" + escape(document.referrer) + ((typeof(screen)=="undefined")?"" : ";s"+screen.width+"*"+screen.height+"*" + (screen.colorDepth?screen.colorDepth:screen.pixelDepth)) + ";u"+escape(document.URL) +  ";h"+escape(document.title.substring(0,80)) + ";" +Math.random();</script>
GROUP_TWO_IMAGES_IN_ONE_LINE_PAGE_TITLES;

    $this->assertRaw($counter, 'Group counter code in form of two images in one line with page titles tracking is found.');

    $image = '<a href="http://www.liveinternet.ru/click;11Example-_com" target="_blank"><img border="0" typeof="foaf:Image" src="//counter.yadro.ru/logo;11Example-_com?52.1" width="88" height="31" title="LiveInternet: number of pageviews and visitors for 24 hours is shown" /></a>';

    $this->assertRaw($image, 'Image for group counter in form of two images in one line with page titles tracking is found.');

  }
}
