<?php

/**
 * @file
 * entity_prevent_revision_deletes module
 * A module that disallows entity revision deletion.
 */

/**
 * Implements hook_entity_info_alter().
 */
function entity_prevent_revision_deletes_entity_info_alter(&$entity_info) {
  foreach($entity_info as $entity => $value) {
    if (isset($value['revision delete'])) {
      unset($entity_info['$entity']['revision delete']);
    }
  }
}

/**
 * Implements hook_menu_alter().
 * Need to make adjustments to node revision delete menu callbacks.
 */
function entity_prevent_revision_deletes_menu_alter(&$items) {
  // Prevent revisions from being deleted.
  $items['node/%node/revisions/%/delete']['access callback'] = FALSE;
  $items['node/%node/revisions/%/delete']['access arguments'] = array();
}
