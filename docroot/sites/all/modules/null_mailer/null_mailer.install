<?php

/**
 * Implements hook_enable().
 */
function null_mailer_enable() {
  $mailer = variable_get('mail_system', FALSE);
  variable_set('null_mailer', $mailer);
  variable_set('mail_system', array('default-system' => 'NullMailSystem'));
}

/**
 * Implements hook_disable().
 */
function null_mailer_disable() {
  if (null_mailer_is_active()) {
    // Read saved mailer
    $mailer = variable_get('null_mailer', FALSE);
    if ($mailer) {
      // Set mailer if it has something
      variable_set('mail_system', $mailer);
    }
    else {
      // Delete mail_system if it was empty when enabled Null mailer
      variable_del('mail_system');
    }
  }
}

/**
 * Implements hook_uninstall().
 */
function null_mailer_uninstall() {
  variable_del('null_mailer');
}
