<?php

/**
 * @file
 * Main module file for Node Permissions Grid.
 */

/**
 * Implementation of hook_help().
 */
function node_permissions_grid_help($path, $arg) {
  switch ($path) {
    case 'admin/people/permissions/node_permissions':
      return t("These pages show the permissions relating to node types in a grid, to make them easier to work with.");
    case 'admin/people/permissions/node_permissions/%':
      return t("This page is an alternative view of the user permissions relating to content types on your site. Permissions are shown below in a grid, with content types down the side and the possible actions such as 'create', 'edit own' along the top. So for example, the checkbox at the intersection of 'edit any' and 'page' is the user permission 'edit any page'.");
  }
}

/**
 * Implementation of hook_theme().
 */
function node_permissions_grid_theme($path, $arg) {
  return array(
    'node_permissions_grid_admin_node_permissions' => array(
      'render element' => 'form',
      'file' => 'node_permissions_grid.admin.inc',
    ),
  );
}

/**
 * Implementation of hook_menu().
 */
function node_permissions_grid_menu() {
  $items['admin/people/permissions/node_permissions'] = array(
    'title' => 'Node permissions',
    'description' => 'Manage permissions for nodes.',
    'page callback' => 'node_permissions_grid_admin_roles',
    'access arguments' => array('administer permissions'),
    'file' => 'node_permissions_grid.admin.inc',
    'type' => MENU_LOCAL_TASK,
    'weight' => -7,
  );
  $items['admin/people/permissions/node_permissions/%user_role'] = array(
    'title' => 'Node permissions',
    'description' => 'Manage permissions for nodes.',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('node_permissions_grid_admin_node_permissions', 4),
    'access arguments' => array('administer permissions'),
    'file' => 'node_permissions_grid.admin.inc',
    'type' => MENU_LOCAL_TASK,
    'weight' => -7,
  ); 

  return $items;
}
