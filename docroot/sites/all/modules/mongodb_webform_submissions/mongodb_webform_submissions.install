<?php
/**
 * @file
 * install file for mongodb_webform_submissions module.
 */

/**
 * Implements hook_install().
 */
function mongodb_webform_submissions_install() {
  mongodb_collection('webform_submissions')
    ->ensureIndex(array('sid' => 1));
  mongodb_collection('webform_submissions')
    ->ensureIndex(array('nid' => 1, 'uid' => 1));
}

/**
 * Implements hook_enable().
 */
function mongodb_webform_submissions_enable() {
  if (variable_get('mongodb_webform_submissions_auto_migrate', FALSE)) {
    mongodb_webform_submissions_migrate_to_mongodb();
  }
}

/**
 * Implements hook_disable().
 */
function mongodb_webform_submissions_disable() {
  if (variable_get('mongodb_webform_submissions_auto_migrate', FALSE)) {
    mongodb_webform_submissions_migrate_to_db();
  }
}

/**
 * Implements hook_uninstall().
 */
function mongodb_webform_submissions_uninstall() {
  mongodb_collection('webform_submissions')->drop();
}
