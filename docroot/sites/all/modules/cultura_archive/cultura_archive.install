<?php

/**
 * Implements hook_install().
 */
function cultura_archive_install() {
  require drupal_get_path('module', 'cultura_archive') . '/install/taxonomy.inc';
  cultura_archive_create_school_vocabulary();
  cultura_archive_create_language_vocabulary();
  cultura_archive_create_year_vocabulary();
  cultura_archive_create_semester_vocabulary();
  require drupal_get_path('module', 'cultura_archive') . '/install/content_type.inc';
  cultura_archive_add_host_school_to_discussion_content_type();
  cultura_archive_add_guest_school_to_discussion_content_type();
  cultura_archive_add_year_to_discussion_content_type();
  cultura_archive_add_semester_to_discussion_content_type();
  cultura_archive_add_host_language_to_discussion_content_type();
  cultura_archive_add_guest_language_to_discussion_content_type();

  // Create an Archives link in the main menu.
  // We do this here, rather than defining this link in the view, so the
  // Cultura installation profile can override it.
  $item = array(
    'link_title' => st('Past exchanges'),
    'link_path' => 'archive',
    'menu_name' => 'main-menu',
    'weight' => 10,
  );
  menu_link_save($item);
  menu_rebuild();
}

function cultura_archive_update_7000() {
  $view = views_get_view('cultura_exchange_archive');
  views_revert_view($view);
}
