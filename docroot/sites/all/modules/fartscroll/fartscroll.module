<?php
/**
 * @file
 * Functions for fartscroll module.
 */

/**
 * Implements hook_menu().
 */
function fartscroll_menu() {
  $items['admin/config/system/fartscroll'] = array(
    'title' => 'Farts',
    'description' => 'Manage where and how many farts your website emits.',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('fartscroll_admin_settings_form'),
    'access arguments' => array('administer fartscroll'),
    'weight' => 10,
    'file' => 'fartscroll.admin.inc',
  );
  return $items;
}

/**
 * Implements hook_permission().
 */
function fartscroll_permission() {
  return array(
    'administer fartscroll' => array(
      'title' => t('Administer Fartscroll'),
      'description' => t('Administer configurations for Fartscroll.'),
    ),
  );
}

/**
 * Implements of hook_library().
 */
function fartscroll_init() {
  $patterns = variable_get('fartscroll_pages');

  if (drupal_match_path($_GET['q'], $patterns)) {

    $path = libraries_get_path('fartscroll.js');
    drupal_add_js($path . '/fartscroll.js');
    $path = drupal_get_path('module', 'fartscroll');
    $js = '(function($) {
  Drupal.behaviors.fartscrollDrupal = {
    attach:function (context) {
      $(document).fartscroll(' . variable_get('fartscroll_farts', 400) . ');
    }
  }
})(jQuery);';
    drupal_add_js($js, 'inline');
  }

}
