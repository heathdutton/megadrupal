<?php


/**
 * Integrate Bontact services with your website
 * 
 * @author Bhavin Joshi <bhavinjosi@joshics.in>
 */


/**
 * Implementation of hook_menu
 * 
 * @author Bhavin Joshi <bhavinjosi@joshics.in>
 */
function bontact_menu() {
	$item = array();
	$item['admin/config/services/bontact'] = array(
			'title' => t('Bontact'),
			'description' => t('Set up Bontact client for your webiste'),
			'page callback' => 'drupal_get_form',
			'page arguments' => array('bontact_admin_config'),
			'access arguments' => array('administer site configuration'),
			'file' => 'bontact_admin_config.inc.php',
			'file_path' => drupal_get_path('module', 'bontact'),
			'type' => MENU_NORMAL_ITEM,
	);
	
	return $item;
}

/**
 * Implementation of hook_page_build
 * 
 * @author Bhavin Joshi <bhavinjosi@joshics.in>
 */
function bontact_page_build() {
	$bontact_customer = variable_get('bontact_customer');
	if (!path_is_admin(current_path()) && !empty($bontact_customer)) {		
		drupal_add_js(array('bontact' => array('customerId' => variable_get('bontact_customer'))), 'setting');
		drupal_add_js(drupal_get_path('module', 'bontact') .'/bontact_client.js', 'file');		
	}	
}