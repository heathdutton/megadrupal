<?php

/**
 * @file
 * Installation procedure for Drupal Commerce Keyclient payment gateway.
 */

/**
 * Implements hook_requirements().
 */
function commerce_keyclient_requirements($phase) {
  $requirements = array();

  if ($phase == 'runtime') {
    $t = get_t();
    $settings = commerce_keyclient_getsettings();

    if (!is_array($settings) || empty($settings['alias'])) {
      $requirements['commerce_keyclient_merchant_id'] = array(
        'title' => $t('Keyclient Merchant ID'),
        'description' => $t('You need to set your Merchant id in order to complete a checkout with Keyclient payment method. Click !here to insert your merchant id',
          array(
            '!here' => l($t('here'), 'admin/commerce/config/payment-methods/manage/commerce_payment_keyclient'),
          )),
        'severity' => REQUIREMENT_WARNING,
      );

      drupal_set_message($requirements['commerce_keyclient_merchant_id']['description'],'warning');
    }
  }

  return $requirements;
}
