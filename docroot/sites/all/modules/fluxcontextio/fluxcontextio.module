<?php

/**
 * @file
 * Main module file.
 */

/**
 * Implements hook_rules_category_info().
 */
function fluxcontextio_rules_category_info() {
  return array(
    // Use the same icon as for the service plugin.
    'fluxcontextio' => array(
      'label' => t('Context.io'),
    ) + fluxservice_get_service_icon_info('fluxcontextio'),
  );
}

/**
 * Implements hook_fluxservice_plugin_directory().
 */
function fluxcontextio_fluxservice_plugin_directory() {
  return 'lib/Drupal/fluxcontextio/Plugin';
}

function fluxcontextio_form_alter(&$form, $form_state, $form_id) {
  if ($form_id == 'fluxservice_account_edit_fluxcontextio_form') {
    $form['label']['#title'] = t('Email');
    if (empty($form['label']['#default_value'])) {
      $form['label']['#default_value'] = $form['data']['email']['#value'];
    }
  }
}

