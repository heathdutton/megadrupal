<?php
// $Id$

/**
 * @file:
 * This module provides integration between Drupal comments and CollectiveAccess comments
 */

/**
 * Implementation of hook_comment().
 */
function collectiveaccess_comment_comment(&$a1, $op) {
  switch ($op) {
    case 'insert':
      $nid = $a1['nid'];
      $ca_item_id = collectiveaccess_node_get_ca_item_id($nid);
      $comment = $a1['comment'];
      $user = $a1['author'];
      collectiveaccess_comment_add($ca_item_id, $comment, $user);
      break;
  }
}

function collectiveaccess_comment_add($ca_item_id, $comment, $user) {
  // @TODO: call UserInfo::addComment method
}