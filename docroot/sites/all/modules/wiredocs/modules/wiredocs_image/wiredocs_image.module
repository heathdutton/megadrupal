<?php
/**
 * @file wiredocs_image.module
 * The image editing capabilty is provided in scope a field in the node edit form.
 */

/**
 * Implements hook_field_widget_info().
 */
function wiredocs_image_field_widget_info() {
  return array(
    'image_wiredocs' => array(
      'label' => t('Image Edit'),
      'field types' => array('image'),
      'settings' => array(
        'progress_indicator' => 'throbber',
      ),
      'behaviors' => array(
        'multiple values' => FIELD_BEHAVIOR_CUSTOM,
        'default value' => FIELD_BEHAVIOR_NONE,
      ),
    ),
  );
}

/**
 * Implements hook_field_settings_form().
 */
function wiredocs_image_field_widget_form(&$form, &$form_state, $field, $instance, $langcode, $items, $delta, $element) {
  $elements = image_field_widget_form($form, $form_state, $field, $instance, $langcode, $items, $delta, $element);
  foreach ($items as $item) {
    $elements[$delta]['#process'][] = 'wiredocs_file_field_widget_process';
    $delta++;
  }
  return $elements;
}