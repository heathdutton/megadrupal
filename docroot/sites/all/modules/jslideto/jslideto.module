<?php
/**
 * @file : jslideto module functionality implementation.
 */
  

/**
  * Implements hook_init().
  */
function jslideto_init() {
  $settings = array(
    'background' => variable_get('jslideto_color', '#CCC'), 
    'duration' => variable_get('jslideto_suration', '1000')
  );
  if (module_exists('libraries')) {
    if ($path = libraries_get_path('jslideto')) {
      if (file_exists($path . '/jquery.color.js')) {
        drupal_add_js($path . '/jquery.color.js');
      }
    }
  }
  drupal_add_js(array('jslideto' => $settings), 'setting');
}


 /**
  * Implements hook_menu().
  */
function jslideto_permission() {
  return array(
    'administer jslideto' => array(
      'title' => t('Administer jslideto'),
      'description' => t('Perform administration task for jslideto module.'),
    ),
  );
}

 /**
  * Implements hook_menu().
  */
function jslideto_menu() {
  $items = array();

  $items['admin/config/user-interface/jslideto'] = array(
    'title' => 'Jslideto configration',
    'description' => 'Jslideto configration page',
    'type' => MENU_NORMAL_ITEM,
    'page callback' => 'drupal_get_form',
    'page arguments' => array('_jslideto_admin_from'),
    'access arguments' => array('administer jslideto'),
  );

  return $items;
}

function _jslideto_admin_from() {
  $form = array();

  $form['jslideto_color'] = array(
    '#type' => 'textfield',
    '#title' => t('Anchored elemenet background-color'),
    '#description' => t('CSS background color value for the element that will be anchored (#CCC), to see this option working please download jquery-color plugin inside libraries folder'),
    '#default_value' => variable_get('jslideto_color', '#CCC')
  );

  $form['jslideto_suration'] = array(
    '#type' => 'textfield',
    '#title' => t('Slide duration'),
    '#description' => t('The amount time of slide animation in milesecon (1000).'),
    '#default_value' => variable_get('jslideto_suration', '1000')
  );

  return system_settings_form($form);
}
