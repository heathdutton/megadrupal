<?php
/**
 * @file
 * Mica migration module, Export Studies/networks/datasets.
 */

/**
 * Implements hook_requirements().
 */
function mica_migration_requirements($phase) {
  $requirements = array();
  $t = get_t();
  $requirements['library_requirement'] = array(
    'title' => $t('Protobuf library required'),
    'description' =>
    $t('The Protobuf library dependency'),
  );
  if ($phase == 'runtime') {
    if (!libraries_get_path('mica_protobuf_lib')) {
      $requirements['library_requirement']['value']
        = $t('Pleas download the Protobuf library https://github.com/smirfolio/mica_protobuf_lib you can use drush get-protobuf');
      $requirements['library_requirement']['severity'] = REQUIREMENT_ERROR;
    }
    else {
      $requirements['library_requirement']['value'] = $t('The Protobuf library already installed');
      $requirements['library_requirement']['severity'] = REQUIREMENT_OK;
    }
  }
  return $requirements;
}
