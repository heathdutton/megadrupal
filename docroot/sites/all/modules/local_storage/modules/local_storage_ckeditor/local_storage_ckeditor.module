<?php

/**
 * @file
 * Main file of the module.
 */

/**
 * Implements hook_ckeditor_plugin().
 */
function local_storage_ckeditor_ckeditor_plugin() {
  return array(
    'html5ls' => array(
      // Name of the plugin used to write it.
      'name' => 'html5ls',
      // Description of the plugin - it would be displayed in the plugins
      // management section of profile settings.
      'desc' => t('Local Storage Info plugin'),
      // The full path to the CKEditor plugins directory, with the trailing
      // slash.
      'path' => drupal_get_path('module', 'local_storage_ckeditor') . '/plugins/html5ls/',
      'buttons' => array(
        'html5ls' => array(
          'icon' => 'images/local-storage.png',
          'label' => t('Local Storage'),
        ),
      ),
    ),
  );
}

/**
 * Implements hook_local_storage_attach_alter().
 */
function local_storage_ckeditor_local_storage_attach_alter(&$element) {
  $path = drupal_get_path('module', 'local_storage_ckeditor');
  $element['#attached']['js'][] = array(
    'type' => 'file',
    'data' => $path . '/js/local-storage-ckeditor.plugin.js',
  );
  $element['#attached']['js'][] = array(
    'type' => 'file',
    'data' => $path . '/js/local-storage-ckeditor.js',
    'weight' => 6.02,
  );
}
