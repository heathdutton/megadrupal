<?php

/**
 * @file
 * Install, Uninstall, and update functions for the Vanilla Forum module.
 */

/**
 * Implements hook_install().
 */
function vanilla_forum_install() {
  // Set a high module weight to ensure the vanilla_forum.js file
  // takes precedence over the default_settings.inc file which sets
  // external links to target _blank.
  db_query("UPDATE {system} SET weight = 20 WHERE type = 'module' AND name = 'vanilla_forum'");
}

/**
 * Implements hook_uninstall().
 */
function vanilla_forum_uninstall() {
  // Delete Vanilla related variables on uninstall.
  $vanilla_variables = array(
    'vanilla_forum_client_id',
    'vanilla_forum_url',
    'vanilla_forum_main_cookie_id',
    'vanilla_forum_privacy_settings',
    'vanilla_forum_profile_image_style',
    'vanilla_forum_profile_image_sync',
    'vanilla_forum_secret',
    'vanilla_forum_volatile_cookie_id',
  );
  foreach ($vanilla_variables as $vanilla_var) {
    variable_del($vanilla_var);
  }
}
