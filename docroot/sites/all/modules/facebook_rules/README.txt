/**FACEBOOK RULES**/

Installation
------------

1. Download and extract module directory in sites/all/modules directory of your Drupal installation.
2. Go to admin/modules and enable Facebook Rules.

Dependencies
------------

1. FBOauth
2. Rules

Usage
-----

Facebook Rules module provides following rules.

  Events:
    a. User logged in using Facebook connect.
    b. User connected existing own account to Facebook.
    c. User registered using Facebook connect.
    d. User registered using Facebook connect, requires admin approval.
  
  Condition:
    a. User's Drupal account is connected to Facebook account.

  Action:
    a. Post to user's wall.

This modules extends the permissions(publish_stream) asked by FBOauth and stores the access token generated by FBOauth module in the database. In case a rule is fired and access token is found to be expired or not set, it would prompt the user to renew it.

Individual users can specify if they want this module to post on their walls or not, despite the configured rules(if any). Intentionally, there is no option for the admin to force users to update their walls on any activity. In case it is a required feature, developers may look into hook_form_alter() for a solution.
/**
 * Implemets hook_form_form_id_alter().
 * This would remove the option for the user to deny posting on his wall from his drupal account settings.
 * However, the user may still remove the permissions to post on his wall from facebook account settings under apps tab.
 */
function hook_form_user_profile_form_alter(&$form, &$form_state) {
  unset($form['account']['facebook_rules_allow']);
}

The FBOauth connect function is overridden, hence if a user connects his account with the site, an access token is generated and stored in the database. In case user is already connected to facebook when this module is installed, user would see a button on his profile edit page to generate access token or prompted when the rule is fired.

