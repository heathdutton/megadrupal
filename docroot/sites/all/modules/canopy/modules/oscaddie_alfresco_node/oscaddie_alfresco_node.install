<?php

/**
 * @file
 * Installs the osCaddie Alfresco Node module and the DB schema that facilitates
 * Node files with Alfresco.
 */

/**
 * Implements hook_install().
 */
function oscaddie_alfresco_node_install() {
  $sql = "UPDATE {system} SET weight = :weight WHERE name = :module";
  $row_count = db_query($sql, array(':weight' => 9999, ':module' => 'oscaddie_alfresco_node'))->rowCount();
}

/**
 * Implements hook_uninstall().
 */
function oscaddie_alfresco_node_uninstall() {

}

/**
 * Implements hook_schema().
 */
function oscaddie_alfresco_node_schema() {
  $schema = array(
    'oscaddie_alfresco_node_uuid' => array(
      'fields' => array(
        'nid' => array(
          'type' => 'int',
          'not null' => TRUE,
        ),
        'uuid' => array(
          'type' => 'varchar',
          'length' => 256,
          'not null' => TRUE,
        ),
      ),
      'primary key' => array('nid'),
    ),
    'oscaddie_alfresco_node_uuid_files' => array(
      'fields' => array(
        'fid' => array(
          'type' => 'int',
          'not null' => TRUE,
        ),
        'nid' => array(
          'type' => 'int',
          'not null' => TRUE,
        ),
        'uuid' => array(
          'type' => 'varchar',
          'length' => 256,
        ),
      ),
      'primary key' => array('fid'),
      'unique keys' => array('fid_nid' => array('fid', 'nid')),
    ),
  );

  return $schema;
}
