<?php

/**
 * @file
 * Installation code for skip_maintenance_mode_by_ip module.
 */

/**
 * Implements hook_uninstall().
 */
function skip_maintenance_mode_by_ip_uninstall() {
  variable_del('skip_maintenance_mode_by_ip_ip'); 
}

/**
 * 'skip_maintenance_mode_by_ip_ip' variable: migrate currently set ip addresses into new array structure
 */ 
function skip_maintenance_mode_by_ip_update_7101() {
  $new = array();
  $ips = variable_get('skip_maintenance_mode_by_ip_ip', array());
  foreach($ips as $i) {
    if($i) {
      $new[] = array(
        'ip' => $i,
        'label' => '',
        );
    }
  }
  variable_set('skip_maintenance_mode_by_ip_ip', $new);
}