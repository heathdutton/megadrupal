<?php
/**
 * @file
 * Installation file for the Format Currencies project.
 */

/**
 * Implements hook_schema().
 */
function format_currency_schema() {
  $schema['currencies'] = array(
    'description' => 'Stores currency formatting rules.',
    'export' => array(
      'key' => 'code',
      'identifier' => 'currency',
      'default hook' => 'default_currency',
      'api' => array(
        'owner' => 'format_currency',
        'api' => 'default_currencies',
        'minimum_version' => 1,
        'current_version' => 1,
      ),
    ),
    'fields' => array(
      'name' => array(
        'type' => 'varchar',
        'length' => 64,
        'not null' => TRUE,
        'default' => '',
        'description' => 'Currency name.',
      ),
      'code' => array(
        'type' => 'varchar',
        'length' => 5,
        'not null' => TRUE,
        'default' => '',
        'description' => 'Primary Key: ISO 4217 Currency code : http://en.wikipedia.org/wiki/ISO_4217.',
      ),
      'num' => array(
        'type' => 'int',
        'not null' => FALSE,
        'default' => NULL,
        'size' => 'small',
        'description' => 'ISO 4217 Currency code number.',
      ),
      'base' => array(
        'type' => 'int',
        'not null' => FALSE,
        'default' => 100,
        'size' => 'small',
        'description' => 'Coinage (centesimal) base (usually 1/100 i.e. 100 pence in Â£1, 100 cents in $1).',
      ),
      'symbol' => array(
        'type' => 'varchar',
        'length' => 5,
        'not null' => TRUE,
        'default' => '',
        'description' => 'Currency symbol.',
      ),
      'html_entity' => array(
        'type' => 'varchar',
        'length' => 32,
        'not null' => TRUE,
        'default' => '',
        'description' => 'Currency symbol in HTML entity form.',
      ),
      'coinage_symbol' => array(
        'type' => 'varchar',
        'length' => 15,
        'not null' => TRUE,
        'default' => '',
        'description' => 'Currency coinage symbol.',
      ),
      'coinage_html_entity' => array(
        'type' => 'varchar',
        'length' => 32,
        'not null' => TRUE,
        'default' => '',
        'description' => 'Currency coinage symbol in HTML entity form.',
      ),
      'decimal_places' => array(
        'type' => 'int',
        'not null' => TRUE,
        'default' => 2,
        'size' => 'tiny',
        'description' => 'Number of decimal places.',
      ),
      'decimal_separator' => array(
        'type' => 'varchar',
        'length' => 5,
        'not null' => TRUE,
        'default' => '.',
        'description' => 'Character to use as separator for between whole numbers and floating numbers.',
      ),
      'thousands_separator' => array(
        'type' => 'varchar',
        'length' => 5,
        'not null' => TRUE,
        'default' => ',',
        'description' => 'Character to use as separator for thousands.',
      ),
      'symbol_position' => array(
        'type' => 'int',
        'not null' => TRUE,
        'default' => 0, // FORMAT_CURRENCY_LEFT
        'size' => 'tiny',
        'description' => 'Whether to display the currency symbol to the (0) left or the (1) right.',
      ),
      'coinage_position' => array(
        'type' => 'int',
        'not null' => TRUE,
        'default' => 1, // FORMAT_CURRENCY_RIGHT
        'size' => 'tiny',
        'description' => 'Whether to display the currency symbol to the (0) left or the (1) right.',
      ),
      'status' => array(
        'type' => 'int',
        'not null' => TRUE,
        'default' => 1, // FORMAT_CURRENCY_ACTIVE
        'size' => 'tiny',
        'description' => 'Current status of this currency, (0) inactive/ obsolete/ expired or (1) active.',
      ),
    ),
    'primary key' => array('code'),
  );

  return $schema;
}

/**
 * Implements hook_uninstall().
 */
function format_currency_uninstall() {
  variable_del('format_currency_display_code');
  variable_del('format_currency_display_symbol');
  variable_del('format_currency_prefer_coinage');
}
