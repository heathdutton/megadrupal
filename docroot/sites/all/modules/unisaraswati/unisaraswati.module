<?php
/* $Id: unisaraswati.module,v 1.2 2010/06/29 10:57:58 tusharvjoshi Exp $ */

/**
 * @file
 * Allows typing in devnagari.
 */


/**
* Display help and module information
* @param section which section of the site we're displaying help
* @return help text for section
*/
function unisaraswati_help($path, $arg) {
  switch ($path) {
    case 'admin/help#unisaraswati':
		return '<p>' . t('Allows devnagari-character typing. Go to ' . l('block administration', 'admin/structure/block'). ' to make sure that the UniSarasvati Devnagari Transliterator block has been enabled in both default as well as administration theme.') . '</p>'; 
		break;
  }
}

/**
 * Implementation of hook_theme().
 */ 
function unisaraswati_theme() {
  return array(
    'language_switcher_render' => array()
  );
}

/**
 * Implements hook_block_info().
 */
function unisaraswati_block_info() {
	$blocks['unisaraswati'] = array(
		'info' => t('UniSarasvati devnagari transliterator'), 
		'weight' => 10,
		'pages' => "node/*\nadmin/*\nuser/*/edit\nsearch/*\ncomment/reply/*",
		'visibility' => BLOCK_VISIBILITY_LISTED,
	);
	return $blocks;
}


/**
* Generate HTML for the unisaraswati block
* @param delta offset
* @returns block HTML
*/
function unisaraswati_block_view($delta = '') {
	global $user;
	if($user->uid){
		switch($delta){
			case 'unisaraswati':
				$block['subject'] = t('Writing style');
				$block['content'] = drupal_get_form('unisaraswati_language_switcher');
		}
		return $block;
	}else{
		return;
	}
}


/**
* Generate form for the unisaraswati block
* @returns block HTML
*/
function unisaraswati_language_switcher() { 
  $form['language'] = array(
    '#id' => 'language',
    '#type' => 'radios',
    '#options' => array(
      'devnagari' => t('Devnagari'), 
      'roman' => t('Roman')
    ),
    '#default_value' => 'devnagari',
    '#description' => t('Change language by F8'),
  ); 
  return $form;
}