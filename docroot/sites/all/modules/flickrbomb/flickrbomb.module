<?php
/**
 * @file
 * Integrates the Flickrbomb service by ZURB.
 */

/**
 * The default Flickrbomb API key.
 */
define('FLICKRBOMB_API_KEY', '66b5c17019403c96779e8fe88d5b576d');

/**
 * Implements hook_page_build().
 */
function flickrbomb_page_build(&$page) {
  if ($path = libraries_get_path('flickrbomb')) {
    // Include library CSS.
    drupal_add_css($path . '/css/flickrbomb.css');

    // Include library JS.
    drupal_add_js($path . '/js/underscore.js', array('scope' => 'footer'));
    drupal_add_js($path . '/js/backbone.js', array('scope' => 'footer'));
    drupal_add_js($path . '/js/backbone-localstorage.js', array('scope' => 'footer'));
    drupal_add_js($path . '/js/flickrbomb.js', array('scope' => 'footer'));

    // Include custom settings.
    drupal_add_js(array(
      'flickrbomb' => array(
        'apiKey' => variable_get('flickrbomb_api_key', FLICKRBOMB_API_KEY),
      ),
    ), 'setting');
  }
}

/**
 * Implements hook_menu().
 */
function flickrbomb_menu() {
  $items['admin/config/development/flickrbomb'] = array(
    'title' => 'Flickrbomb',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('flickrbomb_admin_settings_form'),
    'access arguments' => array('access content'),
    'file' => 'flickrbomb.admin.inc',
  );

  return $items;
}
