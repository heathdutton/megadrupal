<?php
/**
 * @file
 * Trails test module.
 */

/**
 * Implements hook_menu().
 */
function trails_test_menu() {
  $items = array();

  // Define basic menu hierarchy.
  $items['trails-test'] = array(
    'title' => 'Test menu',
    'page callback' => 'node_page_default',
    'access arguments' => array('access content'),
    'type' => MENU_NORMAL_ITEM,
    'menu_name' => 'trails-test',
  );
  $items['trails-test/item'] = array(
    'title' => 'Test menu item',
    'page callback' => 'node_page_default',
    'access arguments' => array('access content'),
    'type' => MENU_NORMAL_ITEM,
  );

  // Define test router items.
  $items['trails-test-page'] = array(
    'title' => 'Test page',
    'page callback' => 'trails_test_menu_trail',
    'access arguments' => array('access content'),
  );

  return $items;
}

/**
 * Dummy page callback.
 */
function trails_test_menu_trail() {
  $output = '';

  // Set menu trail.
  menu_tree_set_path('trails-test', 'trails-test/item');
  $trail = trails_get_menu_trail('trails-test');
  $output .= 'trails:' . serialize($trail);

  return $output;
}
