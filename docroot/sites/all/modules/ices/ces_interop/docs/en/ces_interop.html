<html>
  <head>
    <title>ICES web services</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>
  <body>
    <h1>ICES web services</h1>
    <p>
    The module ces_iterop from ICES project comes with two web services that 
    allows third applications to communicate with the banking server. These two
    web services are:
    <ul>
      <li><a href="#opentransact">OpenTransact</a>: A simple protocol for 
        financial transactions</li>
      <li><a href="#resources">Resources</a>: A simple JSON service to retrieve
      some resources in ICES.</li>
    </ul>
    </p>
    <h2><a name="opentransact">OpenTransact</a></h2>
    <p>ICES comes with an implementation of the OpenTransact (<a href=
    "http://www.opentransact.org">www.opentransact.org</a>) protocol.
    The OpenTransact protocol is an extension of the OAuth2 (<a href=
    "http://oauth.net/2/">http://oauth.net/2/</a>) protocol adding some fields
    to define the transactions. We refer to the specification of the protocol at
    <a href="http://www.opentransact.org/core.html">http://www.opentransact.org/core.html</a>.       
    </p>
    <p>
    There are some minor differences between the official specification and the
    implementation in this module:
    <ul>
      <li>The <a href="http://www.opentransact.org/core.html#transfer-request-1">Transfer request</a>
      link has not been implemented due to the ease for an attacker to provide a 
      payment link that will be done with a single click. We restrict the use of
      the opentransact services to authorized clients.</li>
      <li>The <a href="http://www.opentransact.org/core.html#validity-duration">validity</a>
      attribute is not fully supported. We do no support repeating intervals. We
      don't reserve the amount so the transfer is not guaranteed to be accepted
      in the moment of application.</li>
    </ul>  
    </p>
    <p>
    The endpoint of the service, or the asset URI in opentransct terms, is:
    <pre><code>https://[site name]/ces/interop/opentransact/XXXX</code></pre>
    where XXXX is the code of the exchange where the transaction takes place.
    </p>
    The token endpoint is 
    <pre><code>https://[site name]/ces/interop/opentransact/token</code></pre>
    <p>
    See the test file ces_interop.test included in this module for a complete 
    example on how to use this service.
    </p>
    <p>
    In order to use the service a client must be granted with a <code>client_id</code>
    and a <code>client_key</code> that should be provided by the system 
    administrator of the ICES instance. For http://www.integralces.net please
    contact with info@integralces.net.
    </p>
    <h2><a name="resources">Resources</a></h2>
    <p>The resources service is a simple JSON web service to access to some 
    objects in ICES. The authorization of this service is OAuth2 (<a href=
    "http://oauth.net/2/">http://oauth.net/2/</a>) similar to the opentransact 
    protocol.</p>
    <p>The authorization endpoint is
    <pre><code>https://[site name]/oauth2/authorize</code></pre>
    The <code>scope</code> attribute is required and must be set to 
    <code>resources</code>. The token endpoint is
    <pre><code>https://[site name]/oauth2/token</code></pre>
    </p>
    <p>
    There are three available resources:
    <ul>
    <li><code>https://[site name]/ces/interop/resources/user/N</code>: where <code>N</code>
    is the identifier of the user.</li>
    <li><code>https://[site name]/ces/interop/resources/account/N</code>: where <code>N</code>
    is the identifier of the account.</li>
    <li><code>https://[site name]/ces/interop/resources/transaction/N</code>: where <code>N</code>
    is the identifier of the transaction.</li>
    </ul>
    </p>
  </body>
</html>
