<?php

/**
 * Implements hook_page_build().
 */
function simplebar_page_build(&$page) {
  $page['page_top']['toolbar']['#pre_render'][] = 'simplebar_simplify';
}

/**
 * Remove extra JS from the toolbar to allow non-jqueried admin pages.
 */
function simplebar_simplify($toolbar) {
  unset($toolbar['#attached']['js']);
  unset($toolbar['#attached']['library']);

  $toolbar['#attached']['css'][] = drupal_get_path('module', 'simplebar') . '/simplebar.css';

  return $toolbar;
}

/**
 * Implements hook_preprocess_HOOK().
 */
function simplebar_preprocess_toolbar(&$variables) {
  if (module_exists('shortcut')) {
    $variables['classes_array'][] = 'shortcut-enabled';
  }
}
