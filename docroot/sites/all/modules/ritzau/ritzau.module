<?php

/**
 * Implements hook_ctools_plugin_api().
 */

function ritzau_ctools_plugin_api() {
  list($module, $api) = func_get_args();
  if ($module == "field_group" && $api == "field_group") {
    return array("version" => "1");
  }
}

/**
 * Implements hook_node_presave().
 */
function ritzau_node_presave($node) {
  if ($node->type == 'ritzau' && $node->nid) {
    if (isset($node->field_ritzau_original_sent_time)) {
      //Ensure, that original sent time is not edited after node creation.
      unset($node->field_ritzau_original_sent_time);
    }
  }
}

/**
 * Implements hook_form_FORM_ID_alter().
 */
function ritzau_form_ritzau_node_form_alter(&$form, &$form_state, $form_id) {
  //Ensure, that original sent time is not edited after node creation.
  if (isset($form_state['node']->nid)) {
    $form['field_ritzau_original_sent_time']['#disabled'] = TRUE;
  }
}
