<?php
/**
 * @file
 * webrupee module file.
 */

/**
 * Implements hook_menu().
 */
function webrupee_menu() {
  $items = array();

  $items['admin/config/content/webrupee'] = array(
    'title' => 'WebRupee Configuration',
    'description' => 'Manage WebRupee',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('webrupee_admin_form'),
    'access arguments' => array('administer webrupee'),
  );

  return $items;
}

/**
 * Webrupee admin form to set webrupee options for the site.
 */
function webrupee_admin_form() {
  $form = array();

  $form['webrupee_status'] = array(
    '#type' => 'radios',
    '#default_value' => (variable_get('webrupee_status', 0)) ? (variable_get('webrupee_status', 0)) : 0,
    '#options' => array(
      '0' => t('Disable'),
      '1' => t('Use Style Sheet'),
      '2' => t('Use JS'),
    ),
  );

  return system_settings_form($form);
}

/**
 * Implements hook_init().
 */
function webrupee_init() {
  switch (variable_get('webrupee_status', 0)) {
    case '1':
      // Create an array to add webrupee css in html head.
      $element = array(
        '#tag' => 'link',
        '#attributes' => array(
          'href' => 'http://cdn.webrupee.com/font',
          'rel' => 'stylesheet',
          'type' => 'text/css',
        ),
      );
      drupal_add_html_head($element, 'webrupee_font');
      break;

    case '2':
      // Create an array to add webrupee javascript in html head.
      $element = array(
        '#type' => 'markup',
        '#markup' => '<script type="text/javascript" src="http://cdn.webrupee.com/js"></script>',
      );
      drupal_add_html_head($element, 'webrupee_js');
      break;

    default:
      break;
  }
}
