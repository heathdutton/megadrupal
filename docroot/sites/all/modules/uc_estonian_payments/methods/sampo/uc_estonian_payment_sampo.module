<?php
# http://api.lullabot.com/hook_uc_payment_method/7 
function uc_estonian_payment_sampo_uc_payment_method() {
  $methods[] = array(
    'id' => 'sampo',
    'name' => t('Sampo'),
    'title' => estonian_payments_get_icon('sampo'),
    'review' => 'Sampo',
    'desc' => t('Pay via Sampo'),
    'callback' => 'uc_estonian_payment_sampo',
    'weight' => 3,
    'checkout' => TRUE,
    'no_gateway' => TRUE,
  );
  return $methods;
}

function uc_estonian_payment_sampo($op, &$arg1) {
switch ($op) {
    case 'cart-details':
      return;

    case 'cart-process':
      return;

    case 'settings':
      $form['sampo_merchant_id'] = array(
        '#type' => 'textfield',
        '#title' => t('Merchant ID'),
        '#default_value' => variable_get('sampo_merchant_id', ''),
      );
      $form['sampo_banklink_url'] = array(
        '#type' => 'textfield',
        '#title' => t('Banklink URL'),
        '#default_value' => variable_get('sampo_banklink_url', ''),
      );
      $form['sampo_merchant_private_key'] = array(
        '#type' => 'textarea',
        '#title' => t('Merchant private key'),
        '#default_value' => variable_get('sampo_merchant_private_key', ''),
        '#size' => 16,
      );
      $form['sampo_merchant_private_key_passphrase'] = array(
        '#type' => 'textfield',
        '#title' => t('Merchant private key passphrase'),
        '#default_value' => variable_get('sampo_merchant_private_key_passphrase', ''),
      );
      $form['sampo_bank_public_key'] = array(
        '#type' => 'textarea',
        '#title' => t('Bank public key'),
        '#default_value' => variable_get('sampo_bank_public_key', ''),
        '#size' => 16,
      );
      return $form;
  }
}

