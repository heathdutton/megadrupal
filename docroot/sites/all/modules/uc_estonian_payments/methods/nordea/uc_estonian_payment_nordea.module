<?php
# http://api.lullabot.com/hook_uc_payment_method/7 
function uc_estonian_payment_nordea_uc_payment_method() {
  $methods[] = array(
    'id' => 'nordea',
    'name' => t('nordea'),
    'title' => estonian_payments_get_icon('nordea'),
    'review' => 'nordea',
    'desc' => t('Pay via nordea'),
    'callback' => 'uc_estonian_payment_nordea',
    'weight' => 3,
    'checkout' => TRUE,
    'no_gateway' => TRUE,
  );
  return $methods;
}

function uc_estonian_payment_nordea($op, &$arg1) {
switch ($op) {
    case 'cart-details':
      return;

    case 'cart-process':
      return;

    case 'settings':
      $form['nordea_merchant_id'] = array(
        '#type' => 'textfield',
        '#title' => t('Merchant ID'),
        '#default_value' => variable_get('nordea_merchant_id', ''),
      );
      $form['nordea_merchant_mac'] = array(
        '#type' => 'textfield',
        '#title' => t('Merchant MAC key'),
        '#default_value' => variable_get('nordea_merchant_mac', ''),
      );
      $form['nordea_hash'] = array(
        '#type' => 'textfield',
        '#title' => t('Hash function'),
        '#default_value' => variable_get('nordea_hash', 'md5'),
      );
      $form['nordea_banklink_url'] = array(
        '#type' => 'textfield',
        '#title' => t('Banklink URL'),
        '#default_value' => variable_get('nordea_banklink_url', ''),
      );
      return $form;
  }
}

