<?php
# http://api.lullabot.com/hook_uc_payment_method/7 
function uc_estonian_payment_seb_uc_payment_method() {
  $methods[] = array(
    'id' => 'seb',
    'name' => t('SEB'),
    'title' => estonian_payments_get_icon('seb'),
    'review' => 'SEB',
    'desc' => t('Pay via SEB'),
    'callback' => 'uc_estonian_payment_seb',
    'weight' => 3,
    'checkout' => TRUE,
    'no_gateway' => TRUE,
  );
  return $methods;
}

function uc_estonian_payment_seb($op, &$arg1) {
  switch ($op) {
    case 'cart-details':
      return;

    case 'cart-process':
      return;

    case 'settings':
      $form['seb_merchant_id'] = array(
        '#type' => 'textfield',
        '#title' => t('Merchant ID'),
        '#default_value' => variable_get('seb_merchant_id', ''),
      );
      $form['seb_banklink_url'] = array(
        '#type' => 'textfield',
        '#title' => t('Banklink URL'),
        '#default_value' => variable_get('seb_banklink_url', ''),
      );
      $form['seb_merchant_private_key'] = array(
        '#type' => 'textarea',
        '#title' => t('Merchant private key'),
        '#default_value' => variable_get('seb_merchant_private_key', ''),
        '#size' => 16,
      );
      $form['seb_bank_public_key'] = array(
        '#type' => 'textarea',
        '#title' => t('Bank public key'),
        '#default_value' => variable_get('seb_bank_public_key', ''),
        '#size' => 16,
      );
      return $form;
  }
}

