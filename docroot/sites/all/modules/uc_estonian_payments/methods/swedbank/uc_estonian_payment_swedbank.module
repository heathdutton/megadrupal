<?php
# http://api.lullabot.com/hook_uc_payment_method/7 
function uc_estonian_payment_swedbank_uc_payment_method() {
  $methods['swedbank'] = array(
    'name' => t('Swedbank'),
    'title' =>  estonian_payments_get_icon('swedbank'),
    'review' => 'SWEDBANK',
    'desc' => t('Pay via Swedbank'),
    'callback' => 'uc_estonian_payment_swedbank',
    'weight' => 3,
    'checkout' => TRUE,
    'no_gateway' => TRUE,
  );
  return $methods;
}

function uc_estonian_payment_swedbank($op, &$arg1) {
  switch ($op) {
    case 'cart-details':
      return;

    case 'cart-process':
      return;

    case 'settings':
      $form['swedbank_merchant_id'] = array(
        '#type' => 'textfield',
        '#title' => t('Merchant ID'),
        '#default_value' => variable_get('swedbank_merchant_id', ''),
      );
      $form['swedbank_banklink_url'] = array(
        '#type' => 'textfield',
        '#title' => t('Banklink URL'),
        '#default_value' => variable_get('swedbank_banklink_url', ''),
      );
      $form['swedbank_merchant_private_key'] = array(
        '#type' => 'textarea',
        '#title' => t('Merchant private key'),
        '#default_value' => variable_get('swedbank_merchant_private_key', ''),
        '#size' => 16,
      );
      $form['swedbank_bank_public_key'] = array(
        '#type' => 'textarea',
        '#title' => t('Bank public key'),
        '#default_value' => variable_get('swedbank_bank_public_key', ''),
        '#size' => 16,
      );
      return $form;
  }
}


