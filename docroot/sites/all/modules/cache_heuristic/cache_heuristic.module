<?php
/**
 * @file
 * Cache Heuristic module file.
 *
 * Cache Heuristic keeps track of which cache-entries are loaded a page,
 * and bundles the loads thereby reducing queries to the caching backend.
 *
 * @todo Bundle cache entries for similar pages somehow, to reduce amount of
 *       data stored.
 */

/**
 * Implements hook_init().
 */
function cache_heuristic_init() {
  if (class_exists('HeuristicCache')) {
    HeuristicCache::prefetchBins();
    foreach (HeuristicCache::getErrors() as $error) {
      watchdog('cache_heuristic', $error[0], $error[1], WATCHDOG_ERROR);
    }
  }
}

/**
 * Implements hook_flush_caches().
 */
function cache_heuristic_flush_caches() {
  return array('cache_heuristic');
}
