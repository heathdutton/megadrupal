<?php
function cbh_menu() {
  $items = array();
  $items['admin/structure/block/manage/%/%/hide'] = array(
    'title' => "Hide on that page",
    'page callback' => 'cbh_block_save',
    'page arguments' => array(4, 5),
    'access arguments' => array('administer blocks'),
    'type' => MENU_DEFAULT_LOCAL_TASK,
    'context' => MENU_CONTEXT_INLINE
  );
  return $items;
}

function cbh_block_save($module, $delta) {
  if (isset($_GET['destination'])) {
    $block = block_load($module, $delta);
  
    $pages = $block->pages . "\r\n". check_plain($_GET['destination']);
     db_update('block')
      ->fields(array(
        'visibility' => (int) BLOCK_VISIBILITY_NOTLISTED, 
        'pages' => trim($pages), 
      ))
      ->condition('module', $module)
      ->condition('delta', $delta)
      ->execute();

    drupal_set_message(t('The block configuration has been saved.'));
    cache_clear_all();
    drupal_goto();
  }
}