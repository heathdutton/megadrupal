<?php

/**
 * @file
 * Dummy module implementing node access related hooks to test access interaction with
 * the Module Grants module.
 *
 */

function module_grants_test_animal_get_grants() {
  return array(
    'pets' => array(
      'cat' => 1,
      'dog' => 2,
      'fish' => 3,
    ),
    'farm' => array(
      'horse' => 1,
      'cow' => 2,
    ),
  );

}

/**
 * Implements hook_permission().
 *
 * Sets up permissions for this module.
 */
function module_grants_test_animal_permission() {
  return _module_grants_test_get_permissions(module_grants_test_animal_get_grants());
}

/**
 * Implements hook_node_grants().
 */
function module_grants_test_animal_node_grants($account, $op) {
  return _module_grants_test_get_node_grants(module_grants_test_animal_get_grants(), $account, $op);
}

/**
 * Implements hook_node_access_records().
 */
function module_grants_test_animal_node_access_records($node) {
  return _module_grants_test_get_node_access_records(module_grants_test_animal_get_grants(), $node);
}

/**
 * Implement hook_module_grants_realm_function_register
 */
function module_grants_test_animal_module_grants_realm_function_register_alter(&$function_registry) {
  $function_registry['module_grants_test_animal'] = function ($realm) {
    return array_key_exists($realm, module_grants_test_animal_get_grants());
  };
}