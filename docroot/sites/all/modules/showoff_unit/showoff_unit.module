<?php
/**
 * @file
 * Code for the Showoff Unit feature.
 */

include_once 'showoff_unit.features.inc';

/**
 * Implements hook_views_post_execute().
 */
function showoff_unit_views_post_execute(&$view) {
  $links = array();
  $vocab = taxonomy_vocabulary_machine_name_load('feeds');
  if ($vocab !== FALSE && $view->name == 'feeds_list') {
    if (user_access('edit terms in ' . $vocab->vid)) {
      $links[] = array(
        'href' => 'category/add',
        'title' => t('Add a Category'),
      );
    }
    if (user_access('administer views')) {
      $links[] = array(
        'href' => 'feed/add',
        'title' => t('Add a Feed'),
      );
    }
    $view->attachment_before = theme('links', array('links' => $links));
  }
  else if ($view->name == 'units' && user_access('create unit content')) {
    $links[] = array(
      'href' => 'node/add/unit',
      'title' => t('Add a Unit'),
    );
    $view->attachment_before = theme('links', array('links' => $links));
  }
}