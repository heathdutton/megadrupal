<!DOCTYPE html>
<html>

  <head>
    <title>User</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.js"></script>
  </head>

  <body>
  
    <div data-role="page" id="login">
      <div data-role="header">
        <h1>User login</h1>
        <a href="#" data-icon="delete" class="close_button ui-btn-right">Close</a>
      </div><!-- header -->
      <div data-role="navbar">
        <ul>
          <li><a href="#" class="ui-btn-active ui-state-persist">Login</a></li>
          <li><a href="#register" >Create new account</a></li>
        </ul>
      </div>
      <div data-role="content" class='content'>
        <div data-role="fieldcontain">
          <label for="login_name">Username</label>
          <input type="text" id="login_name" value="" />
        </div>
        <div data-role="fieldcontain">
          <label for="login_pass">Password</label>
          <input type="password" id="login_pass" />
        </div>
        <fieldset>
          <div><button type="submit" id="login_submit">Login</button></div>
        </fieldset>
      </div><!-- /content -->
    </div><!-- /page -->
  
    <div data-role="page" id="register">
      <div data-role="header">
        <h1>Create new account</h1>
        <a href="#" data-icon="delete" class="close_button ui-btn-right">Close</a>
      </div><!-- header -->
      <div data-role="navbar">
        <ul>
          <li><a href="#login">Login</a></li>
          <li><a href="#" class="ui-btn-active ui-state-persist">Create new account</a></li>
        </ul>
      </div>
      <div data-role="content" class='content'>
        <div data-role="fieldcontain">
          <label for="register_name">Username</label>
          <input type="text" id="register_name" value="" />
        </div>
        <div data-role="fieldcontain">
          <label for="register_mail">E-mail address</label>
          <input type="email" id="register_mail" value="" />
        </div>
        <fieldset>
          <div><button type="submit" id="register_submit">Create new account</button></div>
        </fieldset>
      </div><!-- /content -->
    </div><!-- /page -->
    
    <div data-role="page" id="account">
      <div data-role="header">
        <h1>Account</h1>
        <a href="#" data-icon="delete" class="close_button ui-btn-right">Close</a>
      </div><!-- header -->
      <div data-role="content" class='content'>
        <button type="submit" id="logout">Logout</button>
      </div><!-- /content -->
    </div><!-- /page -->
    
    <script type="text/javascript">
      $().ready(function() {
          $('#login_submit').on('click',function(){
              var name = $('#login_name').val();
              if (!name) { alert('Please enter your user name.'); return false; }
              var pass = $('#login_pass').val();
              if (!pass) { alert('Please enter your password.'); return false; }
              var options = {
                "name":name,
                "pass":pass,
                "page":"user_login",
              };
              var location = "pebblejs://close#" + encodeURIComponent(JSON.stringify(options));
              document.location = location;
              return false;
          });
          $('#register_submit').on('click',function(){
              var name = $('#register_name').val();
              if (!name) { alert('Please enter your user name.'); return false; }
              var mail = $('#register_mail').val();
              if (!mail) { alert('Please enter your e-mail address.'); return false; }
              var options = {
                "name":name,
                "mail":mail,
                "page":"user_register",
              };
              var location = "pebblejs://close#" + encodeURIComponent(JSON.stringify(options));
              document.location = location;
              return false;
          });
          $('#logout').on('click',function(){
              var options = {
                "page":"user_logout",
              };
              var location = "pebblejs://close#" + encodeURIComponent(JSON.stringify(options));
              document.location = location;
              return false;
          });
          $('.close_button').on('click',function(){
              var location = "pebblejs://close";
              document.location = location;
              return false;
          });
      });
    </script>
  </body>
</html>

