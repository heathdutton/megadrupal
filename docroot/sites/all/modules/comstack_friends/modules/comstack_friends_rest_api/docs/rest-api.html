<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Comstack Friends API</title>

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <style type="text/css">
      /* Space out content a bit */
      body {
        padding-top: 20px;
        padding-bottom: 20px;
      }

      /* Everything but the jumbotron gets side spacing for mobile first views */
      .header,
      .marketing,
      .footer {
        padding-right: 15px;
        padding-left: 15px;
      }

      /* Custom page header */
      .header {
        padding-bottom: 20px;
        border-bottom: 1px solid #e5e5e5;
      }
      /* Make the masthead heading the same height as the navigation */
      .header h3 {
        margin-top: 0;
        margin-bottom: 0;
        line-height: 40px;
      }

      /* Custom page footer */
      .footer {
        padding-top: 19px;
        color: #777;
        border-top: 1px solid #e5e5e5;
      }

      /* Customize container */
      @media (min-width: 768px) {
        .container {
          max-width: 730px;
        }
      }
      .container-narrow > hr {
        margin: 30px 0;
      }

      /* Main marketing message and sign up button */
      .jumbotron {
        text-align: center;
        border-bottom: 1px solid #e5e5e5;
      }
      .jumbotron .btn {
        padding: 14px 24px;
        font-size: 21px;
      }

      /* Supporting marketing content */
      .marketing {
        margin: 40px 0;
      }
      .marketing p + h4 {
        margin-top: 28px;
      }

      /* Responsive: Portrait tablets and up */
      @media screen and (min-width: 768px) {
        /* Remove the padding we set earlier */
        .header,
        .marketing,
        .footer {
          padding-right: 0;
          padding-left: 0;
        }
        /* Space out the masthead */
        .header {
          margin-bottom: 30px;
        }
        /* Remove the bottom border on the jumbotron for visual effect */
        .jumbotron {
          border-bottom: 0;
        }
      }
    </style>

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style type="text/css">
      .copy h1,
      .copy h2,
      .copy h3,
      .copy h4 {
        margin-top: 40px;
        margin-bottom: 10px;
        padding-bottom: 10px;
        border-bottom: 1px solid #eee;
      }

      .resource-request {
        margin: 20px 0;
        font-size: 16px;
        background-color: #f5f5f5;
        font-weight: bold;
        border-radius: 5px;
      }

      .resource-verb {
        display: inline-block;
        margin-right: 15px;
        padding: 10px 20px;
        color: white;
        border-top-left-radius: 5px;
        border-bottom-left-radius: 5px;
      }

      .resource-verb.get {
        background-color: #14892c;
      }

      .resource-verb.post {
        background-color: #ADAB26;
      }

      .resource-verb.put,
      .resource-verb.patch {
        background-color: #4b0082;
      }

      .resource-verb.delete {
        background-color: #d04437;
      }

      .show-details {
        float: right;
      }

      .resource-request .show-details {
        margin-right: 20px;
        line-height: 42px;
      }

      .response-details {
        margin-bottom: 50px;
      }

      .response-details h4 {
        margin-top: 0;
        border-bottom: 0;
        padding-bottom: 0;
      }

      .response-details blockquote {
        font-size: 14px;
      }

      table.request-body td:first-child,
      table.model-body td:first-child {
        font-family: Menlo,Monaco,Consolas,"Courier New",monospace;
        font-size: 12px;
        line-height: 22px;
      }

      table.request-body td:last-child {
        text-align: center;
        color: #6F6F6F;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header clearfix">
        <nav>
          <ul class="nav nav-pills pull-right">
            <li role="presentation" class="active"><a href="#">The basics</a></li>
            <li role="presentation"><a href="#endpoints">Endpoints</a></li>
            <li role="presentation"><a href="#models">Models</a></li>
          </ul>
        </nav>
        <h3 class="text-muted">Comstack Friends API</h3>
      </div>

      <div class="copy">
        <h3>Hi!</h3>

        <p>This document follows on from the <a href="https://rawgit.com/lohi-io/comstack_pm/7.x-1.x/modules/comstack_pm_rest_api/docs/rest-api.html">Comstack Private Messaging REST API documentation</a>, same thinking rules etc applies.</p>
        <p>With that in mind this document will only cover the endpoints and data models, if you want to know how paging, filtering, sorting and what else is available to you, refer to the <a href="https://rawgit.com/lohi-io/comstack_pm/7.x-1.x/modules/comstack_pm_rest_api/docs/rest-api.html">Comstack Private Messaging REST API documentation</a>.</p>


        <h4>Base path</h4>

        <p>The API will live at <code>/api/v1/cs-fr</code> on the installed site.</p>



        <a name="endpoints"></a>
        <h3>Endpoints</h3>

        <h4 class="text-primary">/friends</h4>

        <div class="resource-request">
          <span class="resource-verb get">GET</span> /api/v1/cs-fr/friends
          <span class="show-details"><a href="#resource-friends-get" data-toggle="collapse">Show details</a></span>
        </div>

        <div id="resource-friends-get" class="collapse response-details">
          <blockquote>
            <p>List the current users friends. This will include pending friend requests which are noted by the <code>approved</code> property.</p>
            <p><strong>Requires:</strong> Authenticated user session.</p>
            <p><strong>Default limit:</strong> 50.</p>
          </blockquote>

          <h4>Responses</h4>

          <table class="table table-striped responses">
            <thead>
              <tr>
                <th>Status</th>
                <th>Description</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>200</code></td>
                <td>Valid response.</td>
                <td>
<h5>Body</h5>
<pre>{
  "data": [
    {
      "type": "relationship",
      "id": 1,
      "relationship_type": "comstack_friends",
      "user": {
        "type": "user",
        "id": 1,
        "name": "username"
        "avatars": {
          "100-100": "https://example.com/sites/default/files/styles/cs-100-100/public/avatars/av1.jpg?itok=123",
          "200-200": "https://example.com/sites/default/files/styles/cs-200-200/public/avatars/av1.jpg?itok=123"
        },
        "contact_frequency": 0
      },
      "created": "2015-08-03T16:34:58+01:00",
      "changed": "2015-08-03T16:35:55+01:00",
      "approved": true
    },
    ...
  ],
  "paging": {
    // See the Comstack Private Messaging documentation for that.
  }
}</pre>
                </td>
              </tr>
              <tr>
                <td><code>204</code></td>
                <td colspan="2">No content (you don't have any friends :C).</td>
              </tr>
            </tbody>
          </table>

        </div>


        <div class="resource-request">
          <span class="resource-verb post">POST</span> /api/v1/cs-fr/friends
          <span class="show-details"><a href="#resource-friends-post" data-toggle="collapse">Show details</a></span>
        </div>

        <div id="resource-friends-post" class="collapse response-details">
          <blockquote>
            <p>Send/create a new friend request.</p>
          </blockquote>

          <h4>Request body</h4>

          <table class="table table-striped request-body">
            <thead>
              <tr>
                <th>Property</th>
                <th>Type</th>
                <th>Description</th>
                <th>Required?</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>user</td>
                <td><code>Integer</code></td>
                <td>The ID of the user you'd like to be friends with.</td>
                <td><span class="glyphicon glyphicon-ok"></span></td>
              </tr>
            </tbody>
          </table>

          <h4>Example request body</h4>

<pre>{
  "user": 2
}</pre>

          <h4>Responses</h4>

          <table class="table table-striped responses">
            <thead>
              <tr>
                <th>Status</th>
                <th>Description</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>201</code></td>
                <td>Request sent.</td>
                <td>
<h5>Headers</h5>
<h5>Body</h5>
<pre>{
  // See relationship model.
}</pre>
                </td>
              </tr>
              <tr>
                <td><code>400</code></td>
                <td colspan="2">Validation issue, in this case you've not sent a valid ID number.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h4 class="text-primary">/friends/{relationship_id}</h4>

        <div class="resource-request">
          <span class="resource-verb get">GET</span> /api/v1/cs-fr/friends/{relationship_id}
          <span class="show-details"><a href="#resource-friends-specific-get" data-toggle="collapse">Show details</a></span>
        </div>

        <div id="resource-friends-specific-get" class="collapse response-details">
          <blockquote>
            <p>Get a specific relationship.</p>
            <p><strong>Requires:</strong> Authenticated user session.</p>
          </blockquote>

          <h4>Responses</h4>
           <table class="table table-striped responses">
            <thead>
              <tr>
                <th>Status</th>
                <th>Description</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>200</code></td>
                <td>Relationship found.</td>
                <td>
<h5>Body</h5>
<pre>{
  // See relationship model.
}</pre>
                </td>
              </tr>
              <tr>
                <td><code>404</code></td>
                <td colspan="2">Relationship not found.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="resource-request">
          <span class="resource-verb delete">DELETE</span> /api/v1/cs-fr/friends/{relationship_id}
          <span class="show-details"><a href="#resource-friends-specific-delete" data-toggle="collapse">Show details</a></span>
        </div>

        <div id="resource-friends-specific-delete" class="collapse response-details">
          <blockquote>
            <p>Delete a friend relationship.</p>
          </blockquote>

          <h4>Responses</h4>

          <table class="table table-striped responses">
            <thead>
              <tr>
                <th>Status</th>
                <th>Description</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>200</code></td>
                <td colspan="2">The relationship has been deleted.</td>
              </tr>
              <tr>
                <td><code>400</code></td>
                <td colspan="2">Failed to delete relationship.</td>
              </tr>
              <tr>
                <td><code>404</code></td>
                <td colspan="2">Relationship not found.</td>
              </tr>
            </tbody>
          </table>
        </div>


        <h4 class="text-primary">/friends/{relationship_id}/approve</h4>
        <div class="resource-request">
          <span class="resource-verb put">PUT</span> /api/v1/cs-fr/friends/{relationship_id}/approve
          <span class="show-details"><a href="#resource-friends-specific-approve-put" data-toggle="collapse">Show details</a></span>
        </div>

        <div id="resource-friends-specific-approve-put" class="collapse response-details">
          <blockquote>
            <p>Approve a pending friend request.</p>
            <p><strong>Requires:</strong> Authenticated user session.</p>
          </blockquote>

          <h4>Responses</h4>

          <table class="table table-striped responses">
            <thead>
              <tr>
                <th>Status</th>
                <th>Description</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>200</code></td>
                <td colspan="2">The relationship has been approved.</td>
              </tr>
              <tr>
                <td><code>400</code></td>
                <td colspan="2">Failed to approve relationship.</td>
              </tr>
              <tr>
                <td><code>404</code></td>
                <td colspan="2">Relationship not found.</td>
              </tr>
            </tbody>
          </table>
        </div>



        <h4 class="text-primary">/friends/{relationship_id}/reject</h4>

        <div class="resource-request">
          <span class="resource-verb put">PUT</span> /api/v1/cs-fr/friends/{relationship_id}/reject
          <span class="show-details"><a href="#resource-friends-specific-reject-put" data-toggle="collapse">Show details</a></span>
        </div>

        <div id="resource-friends-specific-reject-put" class="collapse response-details">
          <blockquote>
            <p>Reject a friend request.</p>
            <p><strong>Requires:</strong> Authenticated user session.</p>
          </blockquote>

          <h4>Responses</h4>
           <table class="table table-striped responses">
            <thead>
              <tr>
                <th>Status</th>
                <th>Description</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>200</code></td>
                <td colspan="2">The friend request has been rejected.</td>
              </tr>
              <tr>
                <td><code>400</code></td>
                <td colspan="2">Failed to reject the request.</td>
              </tr>
              <tr>
                <td><code>404</code></td>
                <td colspan="2">Request not found.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h4 class="text-primary">/friends/{relationship_id}/cancel</h4>

        <div class="resource-request">
          <span class="resource-verb put">PUT</span> /api/v1/cs-fr/friends/{relationship_id}/cancel
          <span class="show-details"><a href="#resource-friends-specific-cancel-put" data-toggle="collapse">Show details</a></span>
        </div>

        <div id="resource-friends-specific-cancel-put" class="collapse response-details">
          <blockquote>
            <p>Cancel a friend request.</p>
            <p><strong>Requires:</strong> Authenticated user session.</p>
          </blockquote>

          <h4>Responses</h4>
           <table class="table table-striped responses">
            <thead>
              <tr>
                <th>Status</th>
                <th>Description</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>200</code></td>
                <td colspan="2">A friend request has been cancelled.</td>
              </tr>
              <tr>
                <td><code>204</code></td>
                <td colspan="2">No content (no messages in conversation).</td>
              </tr>
              <tr>
                <td><code>404</code></td>
                <td colspan="2">Conversation not found.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h4 class="text-primary">/blocked</h4>

        <div class="resource-request">
          <span class="resource-verb get">GET</span> /api/v1/cs-fr/blocked
          <span class="show-details"><a href="#resource-blocked-get" data-toggle="collapse">Show details</a></span>
        </div>

        <div id="resource-blocked-get" class="collapse response-details">
          <blockquote>
            <p>List the users that the current user has blocked.</p>
            <p><strong>Requires:</strong> Authenticated user session.</p>
            <p><strong>Default limit:</strong> 50.</p>
          </blockquote>

          <h4>Responses</h4>

          <table class="table table-striped responses">
            <thead>
              <tr>
                <th>Status</th>
                <th>Description</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>200</code></td>
                <td>Valid response.</td>
                <td>
<h5>Body</h5>
<pre>{
  "data": [
    {
      "type": "relationship",
      "id": 2,
      "relationship_type": "comstack_blocked",
      "user": {
        "type": "user",
        "id": 3,
        "name": "username"
        "avatars": {
          "100-100": "https://example.com/sites/default/files/styles/cs-100-100/public/avatars/av1.jpg?itok=123",
          "200-200": "https://example.com/sites/default/files/styles/cs-200-200/public/avatars/av1.jpg?itok=123"
        },
        "contact_frequency": 0
      },
      "created": "2015-08-03T16:34:58+01:00",
      "changed": "2015-08-03T16:35:55+01:00",
    },
    ...
  ],
  "paging": {
    // See the Comstack Private Messaging documentation for that.
  }
}</pre>
                </td>
              </tr>
              <tr>
                <td><code>204</code></td>
                <td colspan="2">No content (you've not blocked anyone).</td>
              </tr>
            </tbody>
          </table>

        </div>


        <div class="resource-request">
          <span class="resource-verb post">POST</span> /api/v1/cs-fr/blocked
          <span class="show-details"><a href="#resource-blocked-post" data-toggle="collapse">Show details</a></span>
        </div>

        <div id="resource-blocked-post" class="collapse response-details">
          <blockquote>
            <p>Create a new blocked relationship, block someone.</p>
          </blockquote>

          <h4>Request body</h4>

          <table class="table table-striped request-body">
            <thead>
              <tr>
                <th>Property</th>
                <th>Type</th>
                <th>Description</th>
                <th>Required?</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>user</td>
                <td><code>Integer</code></td>
                <td>The ID of the user you'd like to block.</td>
                <td><span class="glyphicon glyphicon-ok"></span></td>
              </tr>
            </tbody>
          </table>

          <h4>Example request body</h4>

<pre>{
  "user": 3
}</pre>

          <h4>Responses</h4>

          <table class="table table-striped responses">
            <thead>
              <tr>
                <th>Status</th>
                <th>Description</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>201</code></td>
                <td>Request sent.</td>
                <td>
<h5>Body</h5>
<pre>{
  // See relationship model.
}</pre>
                </td>
              </tr>
              <tr>
                <td><code>400</code></td>
                <td colspan="2">Validation issue, in this case you've not sent a valid ID number.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h4 class="text-primary">/blocked/{relationship_id}</h4>

        <div class="resource-request">
          <span class="resource-verb get">GET</span> /api/v1/cs-fr/blocked/{relationship_id}
          <span class="show-details"><a href="#resource-blocked-specific-get" data-toggle="collapse">Show details</a></span>
        </div>

        <div id="resource-blocked-specific-get" class="collapse response-details">
          <blockquote>
            <p>Get a specific blocked relationship.</p>
            <p><strong>Requires:</strong> Authenticated user session.</p>
          </blockquote>

          <h4>Responses</h4>
           <table class="table table-striped responses">
            <thead>
              <tr>
                <th>Status</th>
                <th>Description</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>200</code></td>
                <td>Relationship found.</td>
                <td>
<h5>Body</h5>
<pre>{
  // See relationship model.
}</pre>
                </td>
              </tr>
              <tr>
                <td><code>404</code></td>
                <td colspan="2">Relationship not found.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="resource-request">
          <span class="resource-verb delete">DELETE</span> /api/v1/cs-fr/blocked/{relationship_id}
          <span class="show-details"><a href="#resource-blocked-specific-delete" data-toggle="collapse">Show details</a></span>
        </div>

        <div id="resource-blocked-specific-delete" class="collapse response-details">
          <blockquote>
            <p>Delete a blocked relationship, unblock someone.</p>
          </blockquote>

          <h4>Responses</h4>

          <table class="table table-striped responses">
            <thead>
              <tr>
                <th>Status</th>
                <th>Description</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>200</code></td>
                <td colspan="2">The relationship has been deleted.</td>
              </tr>
              <tr>
                <td><code>400</code></td>
                <td colspan="2">Failed to delete relationship.</td>
              </tr>
              <tr>
                <td><code>404</code></td>
                <td colspan="2">Relationship not found.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <a name="models"></a>
        <h3>Models</h3>

        <h4 class="text-primary">Relationship <span class="show-details"><a href="#models-relationship" data-toggle="collapse">Show details</a></span></h4>
<div id="models-relationship" class="collapse">
<h5>Structure</h5>
<table class="table table-striped model-body">
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>type</td>
      <td><code>String</code></td>
      <td>The type of entity that this is for convenience, <code>relationship</code>.</td>
    </tr>
    <tr>
      <td>id</td>
      <td><code>Integer</code></td>
      <td>ID of the relationship record.</td>
    </tr>
    <tr>
      <td>user</td>
      <td><code>Object</code></td>
      <td>The user that this relationship is with.</td>
    </tr>
    <tr>
      <td>created</td>
      <td><code>String</code></td>
      <td>An <code>ISO 8601</code> date and time including timezone of when the relationship was started or requested.</td>
    </tr>
    <tr>
      <td>changed</td>
      <td><code>String</code></td>
      <td>An <code>ISO 8601</code> date and time including timezone of when the relationship was last updated.</td>
    </tr>
    <tr>
      <td>approved</td>
      <td><code>Boolean</code></td>
      <td>Whether or not the relationship has been approved, for friends if false then the request is pending. Blocked relationships are one sided so always approved.</td>
    </tr>
  </tbody>
</table>
<h5>Example</h5>
<pre>
{
  "type": "relationship",
  "id": 1,
  "relationship_type": "comstack_friends",
  "user": {
    "type": "user",
    "id": 1,
    "name": "username"
    "avatars": {
      "100-100": "https://example.com/sites/default/files/styles/cs-100-100/public/avatars/av1.jpg?itok=123",
      "200-200": "https://example.com/sites/default/files/styles/cs-200-200/public/avatars/av1.jpg?itok=123"
    },
    "contact_frequency": 0
  },
  "created": "2015-08-03T16:34:58+01:00",
  "changed": "2015-08-03T16:35:55+01:00",
  "approved": true
}</pre>
</div>

      </div>
    </div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  </body>
</html>
