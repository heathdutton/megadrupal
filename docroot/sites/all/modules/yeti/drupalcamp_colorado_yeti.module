<?php

/*
 * implementation of hook_block_info()
 */
function drupalcamp_colorado_yeti_block_info() {
  $blocks['drupalcamp_colorado_yeti'] = array(
    'info' => t('DrupalCamp Colorado Yeti'),
  );
  return $blocks;
} // end drupalcamp_colorado_yeti_block_info()


/*
 * implementation of hook_block_view()
 */
function drupalcamp_colorado_yeti_block_view($delta = 'drupalcamp_colorado_yeti') {
  $block = array();
  switch ($delta) {
    case 'drupalcamp_colorado_yeti':
      // calculate the date
      $campstart = strtotime('August 2, 2014');
      $now = time();
      $days = round(($campstart - $now) / (60 * 60 * 24));

      // the markup for the yeti
      $markup = '<div class="drupalcamp_colorado_yeti_block">
          <a href="http://drupalcampcolorado.org"><div class="logo">' . t('DrupalCamp Colorado') . '</div></a>
          <div class="yeti">
            <div class="date"><a href="http://drupalcampcolorado.org">' . $days . ' ' . t('Days') . '</a></div>
          </div>
        </div>';

      // generate the block
      $block['subject'] = t('DrupalCamp Colorado');

      // modified per http://drupal.org/node/214856#comment-3331836
      $block['content'] = array(
        '#markup' => $markup,
        '#attached' => array(
          'css' => array(drupal_get_path('module', 'drupalcamp_colorado_yeti') . '/css/drupalcamp_colorado_yeti.css'),
          ),
        );
      break;
  }

  return $block;
} // end drupalcamp_colorado_yeti_block_view()
