<?php

/**
 * @file
 * Custom add content install.
 */

/**
 * Implements hook_enable().
 */
function custom_add_content_enable() {
  $t = get_t();

  // Create a custom menu.
  if (module_exists('menu')) {
    $menu = array(
      'menu_name' => 'custom_add_content_page',
      'title' => $t('Custom add content page'),
      'description' => $t('Content creation links'),
    );
    menu_save($menu);
  }

  // This module must execute after core's node module and i18n module.
  db_update('system')
    ->fields(array('weight' => 15))
    ->condition('type', 'module')
    ->condition('name', 'custom_add_content')
    ->execute();
}

/**
 * Implements hook_uninstall().
 */
function custom_add_content_uninstall() {
  // Menu deletion and cache empty.
  if (!module_exists('custom_add_content') && ($devel_menu = menu_load('custom_add_content_page'))) {
    menu_delete($devel_menu);
    menu_rebuild();
  }

  // Configuration variable deletion.
  variable_del('custom_add_content_renderer');
}
