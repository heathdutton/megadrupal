(function(a){function e(a){document.location.href=a}function f(){return a(".mnav").length?true:false}function g(b){var c=true;b.each(function(){if(!a(this).is("ul")&&!a(this).is("ol")){c=false}});return c}function h(){return a(window).width()<b.switchWidth}function i(b){return a.trim(b.clone().children("ul, ol").remove().end().text())}function j(b,c,d){if(!d){a('<option value="'+b.find("a:first").attr("href")+'">'+a.trim(i(b))+"</option>").appendTo(c)}else{a('<option value="'+b.find("a:first").attr("href")+'">'+d+"</option>").appendTo(c)}}function k(c,d){var e=a('<optgroup label="'+a.trim(i(c))+'" />');j(c,e,b.groupPageText);c.children("ul, ol").each(function(){a(this).children("li").each(function(){j(a(this),e)})});e.appendTo(d)}function l(c){var f=a('<select id="mm'+d+'" class="mnav" />');d++;if(b.topOptionText){j(a("<li>"+b.topOptionText+"</li>"),f)}c.children("li").each(function(){var c=a(this);if(c.children("ul, ol").length&&b.nested){k(c,f)}else{j(c,f)}});f.change(function(){e(a(this).val())}).prependTo(b.prependTo)}function m(){if(h()&&!f()){c.each(function(){l(a(this))})}if(h()&&f()){a(".mnav").show();c.hide()}if(!h()&&f()){a(".mnav").hide();c.show()}}var b={groupPageText:"Main",nested:true,prependTo:"body",switchWidth:480,topOptionText:"Select a page"},c,d=0;a.fn.mobileMenu=function(d){if(d){a.extend(b,d)}if(g(a(this))){c=a(this);m();a(window).resize(function(){m()})}else{alert("mobileMenu only works with <ul>/<ol>")}}})(jQuery)